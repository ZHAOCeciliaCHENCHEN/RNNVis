{"version":3,"sources":["webpack:///static/js/app.d98cff66465a3838eb9f.js","webpack:///./src/event-bus.js","webpack:///./src/layout/chart.js","webpack:///./src/layout/sentence.js","webpack:///./src/preprocess.js","webpack:///./src/components/InfoBoard.vue?732a","webpack:///./src/App.vue?fc6a","webpack:///./src/algorithm/cluster.js","webpack:///./src/main.js","webpack:///App.vue","webpack:///ArcView.vue","webpack:///ClusterView.vue","webpack:///InfoBoard.vue","webpack:///InfoView.vue","webpack:///MainView.vue","webpack:///ModelConfig.vue","webpack:///ModelView.vue","webpack:///ProjectGraph.vue","webpack:///ProjectView.vue","webpack:///TestView.vue","webpack:///./src/services/dataService.js","webpack:///TextView.vue","webpack:///./src/components/ArcView.vue?65fd","webpack:///./src/components/ClusterView.vue?baef","webpack:///./src/components/InfoView.vue?4c49","webpack:///./src/components/MainView.vue?f5a7","webpack:///./src/components/ModelConfig.vue?32d1","webpack:///./src/components/ModelView.vue?ad30","webpack:///./src/components/ProjectGraph.vue?4d40","webpack:///./src/components/ProjectView.vue?92ed","webpack:///./src/components/TestView.vue","webpack:///./src/components/TextView.vue?e947","webpack:///./src/components/TextView.vue?f2df","webpack:///./src/components/ProjectView.vue?f152","webpack:///./src/components/InfoBoard.vue?caee","webpack:///./src/components/ProjectGraph.vue?04b0","webpack:///./src/App.vue?9a80","webpack:///./src/components/TestView.vue?f541","webpack:///./src/components/ArcView.vue?a4dd","webpack:///./src/components/InfoView.vue?0a57","webpack:///./src/components/ModelConfig.vue?f670","webpack:///./src/components/ModelView.vue?e6cb","webpack:///./src/components/MainView.vue?0901","webpack:///./src/components/ClusterView.vue?fa4b","webpack:///./src/layout/cloud.js"],"names":["webpackJsonp","11","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","afterChangeWords","words","forEach","word","i","color","state","activateText","focusText","deactivateText","data","d3","select","el","style","opacity","weight","baseColor","bound","remove","box","getBBox","parentNode","insert","attr","x","width","y","Object","defineProperty","value","SELECT_SENTENCE_NODE","CLOSE_SENTENCE","DESELECT_WORD","DESELECT_UNIT","SELECT_LAYER","SELECT_WORD","SELECT_UNIT","SentenceRecord","CoClusterProcessor","EVALUATE_SENTENCE","CHANGE_LAYOUT","SELECT_STATE","SELECT_MODEL","bus","undefined","_assign","_assign2","_set","_set2","_promise","_promise2","_vue","_vue2","_dataService","_dataService2","_d","newObj","key","prototype","hasOwnProperty","call","_preprocess","selectedModel","selectedState","selectedLayer","selectedModel2","selectedState2","selectedLayer2","layout","layout2","modelConfigs","coClusters","availableModels","sentenceRecords","statistics","modelsSet","selectedUnits","selectedWords","selectedUnits2","selectedWords2","selectedNode","selectedNode2","compare","scaleOrdinal","schemeCategory10","renderPos","renderPos2","Vue","cell2states","GRU","BasicLSTM","BasicRNN","computed","methods","loadModelConfig","modelName","resolve","dataService","getModelConfig","response","status","reject","loadAvailableModels","_this","this","console","log","getModels","models","loadCoCluster","arguments","length","stateName","_this2","nCluster","params","top_k","mode","layer","coCluster","coClusterName","identifier","then","has","load","getCoCluster","modelCellType","model","cell_type","availableStates","config","layerNum","cells","layerSize","num_units","evalSentence","sentence","record","push","loadStatistics","stat","StateStatistics","getStatistics","loadPosStatistics","callback","getPosStatistics","created","_this3","$on","newLayout","clusterNum","unitDim","units","slice","splice","text","unit","idx","indexOf","findIndex","d","node","165","BoxArtist","AreaArtist","LineArtist","Chart","_getPrototypeOf","_getPrototypeOf2","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_keys","_keys2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","Artist","chart","handles","drawHooks","drawHook","handle","transition","duration","get","group","scale","defaultColorScheme","svg","height","bggroup","append","bg","marginAll","extents","Infinity","axis","axisHandles","charts","artists","xAxis","yAxis","offset","rotateFlag","marginLeft","marginRight","marginTop","marginBottom","artist","translate","drawTmp","draw","tmpSize","tmpMargin","updateScale","reverse","drawAxis","alpha","top","right","bottom","left","extent","range","timer","Math","round","min","floor","max","ceil","xExtent","yExtent","updateExtentI","xfn","yfn","updateScaleX","updateScaleY","scaleLinear","domain","rangeRound","label","pos","translateStr","axisBottom","axisTop","labelSize","_this4","axisLeft","axisRight","lineArtist","lines","plot","y0fn","y1fn","areas","r1fn","r2fn","boxes","_this5","transform","name","c","_this6","clean","_Artist","_this7","__proto__","_this8","line","datum","_Artist2","_this9","_this10","area","y0","y1","_Artist3","_this11","_this12","xShift","drawBox","map","v","xs","mean","range1","range2","mid","abs","166","selector","SentenceLayout","_sign","_sign2","_from","_from2","_toConsumableArray2","_toConsumableArray3","layoutParams","nodeIntervalScale","schemeCategory20","radiusScale","widthScale","avgValueRange","rulerScale","markerWidthScale","markerHeightScale","wordSize","negColor","posColor","_size","_rectSize","_sentence","_coCluster","_dataList","type","_mouseoverCallback","_","_barMouseoverCallback","func","size","transformStr","nodeWidth","_words","prepareDraw","getWordPos","g","drawWord","gl","drawConnection","nodeInterval","rectSize","brushY","on","event","sourceEvent","selection","target","move","current","labels","preprocess","maxValue","dataList","clst","clstMaxP","currents","updateds","clstMaxN","clstMax","scaleHeight","nodeHeight","stateSize","j","scaleWidth","drawOneWordPie","drawOneWordBar","drawOneWordBar2","drawOneConnection","drawOneConnection2","gSelector","selectAll","g1","enter","accumulate","prev","g2","updated","major","t","paintColor","self","unitWidth","gCurrent","cur","gUpdated1","updated1","gUpdated2","updated2","fontSize","valRange","wordX","each","els","rulerWidth","markerWidth","markerHeight","gs","keptRate","calPoints","arr","Array","mar","radius","arc1","arc","innerRadius","outerRadius","arc2","arc3","updatedRate","arcs","pie","sort","classed","k","len","clustersSize","colClusters","accClustersSize","Float32Array","currentStates","cluster","updatedData","infoPositive","infoNegative","infoCurrent","infoPrevious","concat","h_tij","infoKept","keptPositive","keptNegative","ratio","keptP","keptN","kept","positive","negative","prevPositive","prevNegative","updatedPositive","updatedNegative","kepts","_radius","radius2","_strengthByCluster","167","memorize","fn","cache","join","f","apply","sortBy","rawData","_rowClusters","_colClusters","_colSizes","_rolSizes","_aggregation_info","strength","rowNum","colNum","hasData","_labels","colLabels","rowLabels","a","b","colSizes","rowSizes","Int32Array","_rowSizes","row","col","ids","Boolean","row_cluster_2_col_cluster","Create2DArray","row_single_2_col_cluster","row_cluster_2_col_single","row_single_2_col_single","correlation","strength_list","r_index","s","c_index","strength_filter","_cluster2cluster","_single2cluster","_cluster2single","_single2single","rowClusters","r","l","processor","inputs","tokens","records","getTextEvaluation","_states","_layerNum","states","getStateStatistics","id","word2Id","wordsData","_statesData","m","low1","low2","high1","high2","rank","sort_idx","indices","_word2Id","_this13","_wordsData","low","280","Component","282","283","307","points","meanPoint","sum","kmeans","vectors","maxIter","distance","snapshotFn","kMeans","distances","_stringify","_stringify2","euclidean","v1","v2","total","pow","sqrt","manhattan","centroids","random","point","index","dist","randomCentroids","assignment","clusters","iterations","movement","classify","assigned","filter","p","centroid","newCentroid","JSON","parse","json","308","_elementUi","_elementUi2","_App","_App2","use","ElementUI","render","h","App","309","_ModelView","_ModelView2","_MainView","_MainView2","_TextView","_TextView2","_InfoView","_InfoView2","_InfoBoard","_InfoBoard2","_eventBus","components","ModelView","MainView","TextView","InfoView","InfoBoard","shared","mainHeight","infoHeight","mounted","window","innerHeight","innerWidth","addEventListener","310","_cloud","fdGraph","wordNum","cluster_data","state_data","word_data","cluster_mode","props","Number","watch","newWidth","update_scale","newHeight","newState","ps","loadStateWordData","loadClusterData","all","values","reset","newWordNum","newClusterNum","svgId","paneId","getProjectionData","getStrengthData","destroy","document","getElementById","ForceDirectedGraph","process_data","insert_element","start_simulation","strengthfn","clientWidth","clientHeight","arcNodes","innerNodes","links","word_clouds","simulation","graph","rScale","defaultAlpha","strength_threshold","normal_opacity_line","high_opacity_line","low_opacity_line","normal_opacity_node","high_opacity_node","low_opacity_node","strength_range","arc_radius","g_links","arc_data","inner_data","label2arc","label2inner","inner_k","arc_k","cluster_strength","inner_item","arc_item","strength_item","link","source","strength_normalize","nodes","strength_extent","cos","angle","sin","g_arc","arc_centroid","fx","fy","w","WordCloud","update","repelForce","forceCollide","init","initialize","forceSimulation","force","forceLink","ticked","curve","curveBundle","beta","line_data","data_center","311","colorHex","colorScheme","LayoutParamsConstructor","unitWidthRatio","unitMarginRatio","clusterMarginRatio","wordCloudArcDegree","wordCloudHightlightRatio","wordCloudPaddingLength","wordCloudChord2ClusterDistance","wordCloudChordLength2ClientHeightRatio","wordCloudChord2stateClusterHeightRatio","wordCloudWidth2HeightRatio","littleTriangleWidth","littleTriangleHeight","strengthThresholdPercent","wordSize2StrengthRatio","dxShrinkFactor","spacePerSentence","sentenceNodeWidth","sentenceInitTranslate","middleLineY","brushTranslationX","sentenceWordThreshold","middleLineOffset","sentenceBrushRectWidth","clusterInterval2HeightRatio","clusterSizes","callTime","maxClusterSize","reduce","totalClusterSize","_unitHeight","wordCloudChordLength","clusterHeight","packNum","unitHeight","cluster2UnitRatio","clusterInterval","computeParams","maxClusterWidth","unitMargin","widthPackNum","clusterWidth","clusterMargin","heightSum","pack","pos2tag","VERB","NOUN","PRON","ADJ","ADV","ADP","CONJ","DET","NUM","PRT","X",".","labelParams","interval","clusterData","painter","changingFlag","posLabel","rootGroup","defautl","strokeControlStrength","linkFilterThreshold","stateClip","maybeReload","_strokeControlStrength","changeStroke","_linkFilterThreshold","_clusterNum","newStateClip","changeStateClip","newMode","newModel","oldModel","render_state","wordsStatistics","statOfWord","_renderPos","posRatio","renderWord","oldWidth","updateWidth","updateHeight","checkLegality","reload","Painter","PosLabel","controlStrength","refreshStroke","p2","evaluate","sentenceRecord","getRecords","addSentence","deleteSentence","SELECT_COLOR","newColor","False","tags","transStr","topGroupClass","topg","hg","wg","dx","dy","clusterSelected","state_elements","loc","wordClouds","unitNormalColor","unitRangeColor","linkWidthRange","linkColor","stateTranslateHis","sentenceTranslateHis","sentences","strokeWidth","sentenceStrokeWidth","colorLegendAxis","trans","draw_link","sentence_info","si","flatten","max_strength","strength_bound","ls","clip","state_info","property","tmp_s","axisScale","tickValues","parseInt","tickFormat","format","precisionFixed","sentence_to_add","translateX","adjustdx","stateClusterWordCloudDX","tmpSentenceInfo","updateSentence","extent_","_record$tokens","scaleFactor","client_height","translateY","sent","actualY","source_init","createLink","highlightSentenceLinkByNodeIndex","highlight","changeCheckStatus","selected","$emit","barHighlightState","state_index","update_ref","state_cluster_info","needTranslate","client_width","translationForEachSentence","translationForState","sg","spg","rectGroup","drawBrushRect","mouseoverCallback","barMouseoverCallback","strengthByCluster","strengths","wordPos","top_left","middle_line_x","middle_line_y","lsg","dataLength","maxHeight","brush","lower","upper","state_loc","state_cluster_loc","computeUnitParams","stateClusters","s_width","s_height","s_top_left","selected_state_cluster_index","baseWordCloudWidth","wordCloudWidth","wordClusters","agg_info","aggregation_info","chordLength","availableLength","wordCloudArcRadius","PI","highlight_clouds","link_info","word_info","wd_height","wd_height_sum","acc","val","wdst","actual_height","actual_width","top_left_y","top_left_x","words_data","tmp_strength","tmp_state","tmp_g","wordCluster","draw_word","calculate_word_info","calculate_link_info","hiddenClusters","isArray","String","selectCluster","redraw_word_link","bgHandle","hGroups","ref","_this14","wclst","active","myWordCloud","_this15","_this16","tmp_path","calculate_state_info","draw_state","newdx","deleteAllSentences","erase_state","erase_link","erase_word","dxOffset","middleLineX","312","start","end","num","_chart","lineLength","wordWidth","labelBoard","unitsStatistics","header","typeStr","repaintWord","repaintState","statesData","dataArray","wordData","getWordStatistics","background","resize","labelLength","margin","sortIdx","ranges","subChartWidth","unitData","xLabel","subWidth","subchart","subChart","ticks","rotate","labelPos","toString","$el","313","type1","type2","SELECT_SENTECE_NODE","314","_ProjectView","_ProjectView2","_TestView","_TestView2","_ArcView","_ArcView2","_ClusterView","_ClusterView2","activeTab","handleClick","tab","ProjectView","TestView","ArcView","ClusterView","315","posSwitch","inputVisible","inputValue","toggle","Function","colorType","LayerNum","maxWidth","_selectedModel","Cell","LayerSize","catch","newLayer","layoutChange","closeSentence","showInput","$nextTick","$refs","saveTagInput","input","focus","handleInputConfirm","colorChange","316","_typeof2","_ModelConfig","_ModelConfig2","ModelConfig","getAvailableModels","setTimeout","modelColor","toggleCompare","states2","317","normalize","calExtent","factor_x","factor_y","factor","coords","mouseover","_target","refreshLinkStyle","refreshWordStyle","mouseout","clickState","opacityHigh","refreshStateStyle","stateNodes","wordNodes","_cluster","defaultConfig","repel","strength_thred","color2","graphData","required","ready","fdGraoh","newReady","buildGraph","insertElements","initSimulation","startSimulation","refreshGraph","refresh","clusterStates","signature","svgEl","invert_x","invert_y","e","state_id","layers","id2states","intensity","_source","forceManyBody","distanceMax","collideForce","g_states","drag","alphaTarget","restart","mouse","_graph","xCenter","yCenter","_x","_y","stateSignature","clusterAssignments","318","_ProjectGraph","_ProjectGraph2","ProjectGraph","oldState","strengthFn","farDistance","cacheTag","p1","strengthData","getStateSignature","errResponse","configWatcher","319","draw2","showNewWords","vis","processed","freqs","indice","vocab","getVocab","word_id","boxData","subchart2","draw_arc","startAngle","endAngle","draw4","brushended","rectWidth","rectInterval","scaleTime","Date","rect_g","brushX","drawRect","draw5","sent_g","draw3","32","_vueResource","_vueResource2","VueResource","devMainUrl","location","origin","$http","http","getUrlData","url","parameters","post","n_cluster","320","activeColorScheme","isInput","selectedDim","oldInputs","displayControl","token","onSubmit","696","697","698","699","700","701","702","703","704","705","706","707","711","712","713","714","715","716","717","718","719","720","721","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","$$v","expression","_l","span","staticStyle","_e","rows","placeholder","click","backgroundColor","_s","staticRenderFns","722","svg-id","graph-data","change","$set","step","723","724","725","theme","default-active","gutter","726","727","728","729","label-position","label-width","icon","keys","margin-top","on-text","off-text","margin-left","blur","nativeOn","keyup","$event","_k","keyCode","closable","close","padding-bottom","730","731","732","stop-color","735","97","_d3Cloud","_d3Cloud2","bgLayout","stroke","stroke-width","fill","fill-opacity","stroke-opacity","wordLayout","font","fontWeight","padding","radiusX","radiusY","bgshape","cloud","margin_","word2data","boundingSize","param","drawBackground","filterData","exit","fontExtent","scalePow","weightScale","scaleQuantize","words_","spiral","bounds","scaleX","scaleY","centerX","centerY","polygon"],"mappings":"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","file":"static/js/app.d98cff66465a3838eb9f.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 11:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SELECT_SENTENCE_NODE = exports.CLOSE_SENTENCE = exports.DESELECT_WORD = exports.DESELECT_UNIT = exports.SELECT_LAYER = exports.SELECT_WORD = exports.SELECT_UNIT = exports.SentenceRecord = exports.CoClusterProcessor = exports.EVALUATE_SENTENCE = exports.CHANGE_LAYOUT = exports.SELECT_STATE = exports.SELECT_MODEL = exports.bus = undefined;\n\nvar _assign = __webpack_require__(71);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _set = __webpack_require__(72);\n\nvar _set2 = _interopRequireDefault(_set);\n\nvar _promise = __webpack_require__(34);\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _vue = __webpack_require__(10);\n\nvar _vue2 = _interopRequireDefault(_vue);\n\nvar _dataService = __webpack_require__(32);\n\nvar _dataService2 = _interopRequireDefault(_dataService);\n\nvar _d = __webpack_require__(21);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _preprocess = __webpack_require__(167);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SELECT_MODEL = 'SELECT_MODEL';\nvar SELECT_STATE = 'SELECT_STATE';\nvar CHANGE_LAYOUT = 'CHANGE_LAYOUT';\nvar EVALUATE_SENTENCE = 'EVALUATE_SENTENCE';\nvar SELECT_UNIT = 'SELECT_UNIT';\nvar SELECT_WORD = 'SELECT_WORD';\nvar DESELECT_UNIT = 'DESELECT_UNIT';\nvar DESELECT_WORD = 'DESELECT_WORD';\nvar SELECT_LAYER = 'SELECT_LAYER';\nvar CLOSE_SENTENCE = 'CLOSE_SENTENCE';\nvar SELECT_SENTENCE_NODE = 'SELECT_SENTENCE_NODE';\nvar SELECT_COLOR = 'SELECT_COLOR';\n\nvar state = {\n  selectedModel: null,\n  selectedState: null,\n  selectedLayer: null,\n  selectedModel2: null,\n  selectedState2: null,\n  selectedLayer2: null,\n  layout: {},\n  layout2: {},\n  modelConfigs: {},\n  coClusters: {},\n  availableModels: null,\n  sentenceRecords: {},\n  statistics: {},\n  modelsSet: null,\n  selectedUnits: [],\n  selectedWords: [],\n  selectedUnits2: [],\n  selectedWords2: [],\n  selectedNode: null,\n  selectedNode2: null,\n  compare: false,\n  color: d3.scaleOrdinal(d3.schemeCategory10),\n  renderPos: false,\n  renderPos2: false\n};\n\nvar bus = new _vue2.default({\n  data: {\n    state: state,\n    cell2states: {\n      'GRU': ['state'],\n      'BasicLSTM': ['state_c', 'state_h'],\n      'BasicRNN': ['state']\n    }\n  },\n  computed: {},\n  methods: {\n    loadModelConfig: function loadModelConfig(modelName) {\n      if (!modelName) return _promise2.default.reject(modelName);\n      if (!Object.prototype.hasOwnProperty.call(state.modelConfigs, modelName)) {\n        return _dataService2.default.getModelConfig(modelName, function (response) {\n          if (response.status === 200) {\n            state.modelConfigs[modelName] = response.data;\n          }\n        });\n      }\n      return _promise2.default.resolve(modelName);\n    },\n    loadAvailableModels: function loadAvailableModels() {\n      var _this = this;\n\n      if (this.state.availableModels === null) {\n        console.log(\"Start loading model data\");\n        return _dataService2.default.getModels(function (response) {\n          if (response.status === 200) {\n            var data = response.data;\n            _this.state.availableModels = data.models;\n            _this.state.modelsSet = new _set2.default(_this.state.availableModels);\n          }\n        });\n      }\n      return _promise2.default.resolve('Already Loaded');\n    },\n    loadCoCluster: function loadCoCluster() {\n      var modelName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.selectedModel;\n      var stateName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.state.selectedState;\n\n      var _this2 = this;\n\n      var nCluster = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n      var params = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : { top_k: 300, mode: 'raw', layer: -1 };\n\n      var coCluster = new _preprocess.CoClusterProcessor(modelName, stateName, nCluster, params);\n      var coClusterName = _preprocess.CoClusterProcessor.identifier(coCluster);\n      if (this.state.coClusters.hasOwnProperty(coClusterName)) return _promise2.default.resolve('Cocluster data already loaded');\n      return this.loadAvailableModels().then(function () {\n        if (_this2.state.modelsSet.has(modelName)) {\n          return coCluster.load();\n        }\n        throw 'No model named ' + modelName;\n      }).then(function () {\n        _this2.state.coClusters[coClusterName] = coCluster;\n        return 'Succeed';\n      });\n    },\n    getCoCluster: function getCoCluster() {\n      var modelName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.selectedModel;\n      var stateName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.state.selectedState;\n      var nCluster = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n      var params = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : { top_k: 300, mode: 'raw', layer: -1 };\n\n      var coCluster = new _preprocess.CoClusterProcessor(modelName, stateName, nCluster, params);\n      var coClusterName = _preprocess.CoClusterProcessor.identifier(coCluster);\n      if (this.state.coClusters.hasOwnProperty(coClusterName)) return this.state.coClusters[coClusterName];\n      console.log('First call loadCoCluster(...) to load remote Data!');\n      return undefined;\n    },\n    modelCellType: function modelCellType() {\n      var modelName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : state.selectedModel;\n\n      if (state.modelsSet.has(modelName)) {\n        var config = this.state.modelConfigs[modelName];\n        return config.model.cell_type;\n      }\n      return undefined;\n    },\n    availableStates: function availableStates() {\n      var modelName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.selectedModel;\n\n      if (state.modelsSet.has(modelName)) {\n        var config = this.state.modelConfigs[modelName];\n        return this.cell2states[config.model.cell_type];\n      }\n      return undefined;\n    },\n    layerNum: function layerNum() {\n      var modelName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.selectedModel;\n\n      if (state.modelsSet.has(modelName)) {\n        var config = this.state.modelConfigs[modelName];\n        return config.model.cells.length;\n      }\n      return undefined;\n    },\n    layerSize: function layerSize() {\n      var modelName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.selectedModel;\n      var layer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n\n      if (state.modelsSet.has(modelName)) {\n        if (layer === -1) {\n          layer = this.layerNum(modelName) - 1;\n        }\n        var config = this.state.modelConfigs[modelName];\n        return config.model.cells[layer].num_units;\n      }\n      return undefined;\n    },\n    evalSentence: function evalSentence(sentence) {\n      var modelName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : state.selectedModel;\n\n      if (!state.sentenceRecords.hasOwnProperty(modelName)) {\n        state.sentenceRecords[modelName] = [];\n      }\n      var record = new _preprocess.SentenceRecord(sentence, modelName);\n      state.sentenceRecords[modelName].push(record);\n      return record;\n    },\n    loadStatistics: function loadStatistics() {\n      var modelName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : state.selectedModel;\n      var stateName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : state.selectedState;\n      var layer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : -1;\n      var top_k = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 300;\n\n      if (!state.modelsSet.has(modelName)) return _promise2.default.reject('No available model ' + modelName);\n      if (!(stateName === 'state' || stateName === 'state_c' || stateName === 'state_h')) return _promise2.default.reject('No available state ' + stateName);\n      if (!state.statistics.hasOwnProperty(modelName)) {\n        state.statistics[modelName] = {};\n      }\n      if (!state.statistics[modelName].hasOwnProperty(stateName)) {\n        state.statistics[modelName][stateName] = [];\n      }\n      if (layer === -1) {\n        layer = this.layerNum(modelName) - 1;\n      }\n      if (state.statistics[modelName][stateName][layer]) {\n        return state.statistics[modelName][stateName][layer].load();\n      }\n      var stat = new _preprocess.StateStatistics(modelName, stateName, layer, top_k);\n      state.statistics[modelName][stateName][layer] = stat;\n      return stat.load();\n    },\n    getStatistics: function getStatistics() {\n      var modelName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : state.selectedModel;\n      var stateName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : state.selectedState;\n      var layer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : -1;\n      var top_k = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 300;\n\n      if (state.statistics.hasOwnProperty(modelName)) {\n        if (state.statistics[modelName].hasOwnProperty(stateName)) {\n          if (state.statistics[modelName][stateName][layer]) return state.statistics[modelName][stateName][layer];\n        }\n      }\n      console.log('bus > unable to get statistics for ' + modelName + ', ' + stateName + ', ' + layer);\n      return undefined;\n    },\n    loadPosStatistics: function loadPosStatistics() {\n      var modelName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : state.selectedModel;\n      var top_k = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 300;\n      var callback = arguments[2];\n\n      if (this.state.modelsSet.has(modelName)) {\n        return _dataService2.default.getPosStatistics(modelName, top_k, callback);\n      }\n      return _promise2.default.reject('No model with name ' + modelName + ' available!');\n    }\n  },\n  created: function created() {\n    var _this3 = this;\n\n    this.$on(SELECT_MODEL, function (modelName, compare) {\n      if (compare) {\n        _this3.state.selectedModel2 = modelName;\n        _this3.state.compare = modelName ? true : false;\n      } else _this3.state.selectedModel = modelName;\n      console.log('bus > current models : ' + state.selectedModel + ', ' + state.selectedModel2);\n    });\n\n    this.$on(SELECT_STATE, function (stateName, compare) {\n      if (compare) _this3.state.selectedState2 = stateName;else _this3.state.selectedState = stateName;\n      console.log('bus > current states : ' + state.selectedState + ', ' + state.selectedState2);\n    });\n\n    this.$on(SELECT_LAYER, function (layer, compare) {\n      if (compare) _this3.state.selectedLayer2 = layer;else _this3.state.selectedLayer = layer;\n    });\n\n    this.$on(CHANGE_LAYOUT, function (newLayout, compare) {\n      if (compare) _this3.state.layout2 = (0, _assign2.default)({}, newLayout);else _this3.state.layout = (0, _assign2.default)({}, newLayout);\n      console.log('bus > ' + (compare ? 'compare' : '') + ' clusterNum: ' + newLayout.clusterNum);\n    });\n\n    this.$on(EVALUATE_SENTENCE, function (sentence, compare) {\n      console.log('bus > evaluating model ' + (compare ? state.selectedModel2 : state.selectedModel) + ' on sentence \"' + sentence + '\"');\n    });\n\n    this.$on(SELECT_UNIT, function (unitDim, compare) {\n      if (compare) {\n        var units = _this3.state.selectedUnits2.slice();\n        units.push(unitDim);\n        if (units.length > 2) units.splice(0, 1);\n        _this3.state.selectedUnits2 = units;\n        _this3.state.selectedWords2 = [];\n        _this3.state.selectedNode2 = null;\n      } else {\n        var _units = _this3.state.selectedUnits.slice();\n        _units.push(unitDim);\n        if (_units.length > 2) _units.splice(0, 1);\n        _this3.state.selectedUnits = _units;\n        if (_this3.state.compare) {\n          _this3.state.selectedWords = [];\n          _this3.state.selectedNode = null;\n        }\n      }\n      console.log('bus > selected unit ' + unitDim);\n    });\n\n    this.$on(SELECT_WORD, function (word, compare) {\n      var maxSelected = 3;\n      var words = void 0;\n      if (compare) {\n        words = _this3.state.selectedWords2.slice();\n        _this3.state.selectedUnits2 = [];\n        _this3.state.selectedNode2 = null;\n      } else {\n        words = _this3.state.selectedWords.slice();\n        if (_this3.state.compare) {\n          _this3.state.selectedUnits = [];\n          _this3.state.selectedNode = null;\n        }\n      }\n      words.push(word);\n      if (words.length > maxSelected) {\n        deactivateText(words[0]);\n        words.splice(0, 1);\n      }\n      afterChangeWords(words);\n      if (compare) _this3.state.selectedWords2 = words;else _this3.state.selectedWords = words;\n      console.log('bus > selected word: ' + word.text);\n    });\n\n    this.$on(DESELECT_UNIT, function (unit, compare) {\n      if (compare) {\n        var idx = _this3.state.selectedUnits2.indexOf(unit);\n        _this3.state.selectedUnits2.splice(idx, 1);\n      } else {\n        var _idx = _this3.state.selectedUnits.indexOf(unit);\n        _this3.state.selectedUnits.splice(_idx, 1);\n      }\n      console.log('bus > deselected unit: ' + unit);\n    });\n\n    this.$on(DESELECT_WORD, function (word, compare) {\n      var words = void 0;\n      if (compare) words = _this3.state.selectedWords2.slice();else words = _this3.state.selectedWords.slice();\n      var idx = words.findIndex(function (d) {\n        return d.text === word.text;\n      });\n      console.log('bus > deleted idx: ' + idx);\n      deactivateText(words[idx]);\n      words.splice(idx, 1);\n      afterChangeWords(words);\n      if (compare) _this3.state.selectedWords2 = words;else _this3.state.selectedWords = words;\n      console.log('bus > deselected word: ' + word.text);\n    });\n\n    this.$on(CLOSE_SENTENCE, function (sentence, compare) {\n      console.log('bus > close sentence: ' + sentence);\n    });\n    this.$on(SELECT_SENTENCE_NODE, function (node, compare) {\n      if (compare) _this3.state.selectedNode2 = node;else _this3.state.selectedNode = node;\n      console.log('bus > sentence node selected: ' + node.word);\n    });\n  }\n});\n\nfunction afterChangeWords(words) {\n  words.forEach(function (word, i) {\n    word.color = state.color(i);\n    activateText(word);\n    focusText(word);\n  });\n}\n\nfunction deactivateText(data) {\n  d3.select(data.el).style('fill-opacity', data.opacity).style('font-weight', data.weight).style('stroke', 'none').style('fill', data.baseColor);\n  if (data.bound) {\n    data.bound.remove();\n    data.bound = null;\n  }\n}\n\nfunction activateText(data) {\n  d3.select(data.el).style('fill-opacity', 1).style('font-weight', data.weight + 300).style('stroke', 'none').style('fill', data.color);\n  if (data.bound) {\n    data.bound.remove();\n    data.bound = null;\n  }\n}\n\nfunction focusText(data) {\n  var box = data.el.getBBox();\n\n  data.bound = d3.select(data.el.parentNode).insert('path').attr('d', 'M ' + (data.x - box.width / 2 - 1.5) + ' ' + (data.y + 2) + ' H ' + (data.x + box.width / 2 + 1.5)).style('stroke', data.color);\n}\n\nexports.default = bus;\nexports.bus = bus;\nexports.SELECT_MODEL = SELECT_MODEL;\nexports.SELECT_STATE = SELECT_STATE;\nexports.CHANGE_LAYOUT = CHANGE_LAYOUT;\nexports.EVALUATE_SENTENCE = EVALUATE_SENTENCE;\nexports.CoClusterProcessor = _preprocess.CoClusterProcessor;\nexports.SentenceRecord = _preprocess.SentenceRecord;\nexports.SELECT_UNIT = SELECT_UNIT;\nexports.SELECT_WORD = SELECT_WORD;\nexports.SELECT_LAYER = SELECT_LAYER;\nexports.DESELECT_UNIT = DESELECT_UNIT;\nexports.DESELECT_WORD = DESELECT_WORD;\nexports.CLOSE_SENTENCE = CLOSE_SENTENCE;\nexports.SELECT_SENTENCE_NODE = SELECT_SENTENCE_NODE;\n\n/***/ }),\n\n/***/ 165:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BoxArtist = exports.AreaArtist = exports.LineArtist = exports.Chart = undefined;\n\nvar _getPrototypeOf = __webpack_require__(324);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _possibleConstructorReturn2 = __webpack_require__(329);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(328);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _keys = __webpack_require__(33);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _classCallCheck2 = __webpack_require__(25);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(26);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _d = __webpack_require__(21);\n\nvar d3 = _interopRequireWildcard(_d);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Artist = function () {\n  function Artist(chart) {\n    (0, _classCallCheck3.default)(this, Artist);\n\n    this.chart = chart;\n\n    this.handles = [];\n    this.drawHooks = [];\n  }\n\n  (0, _createClass3.default)(Artist, [{\n    key: 'draw',\n    value: function draw() {\n      this.drawHooks.forEach(function (drawHook) {\n        return drawHook();\n      });\n    }\n  }, {\n    key: 'clean',\n    value: function clean() {\n      this.handles.forEach(function (handle) {\n        handle.transition().duration(200).style('opacity', 0).remove();\n      });\n      this.handles = [];\n      this.drawHooks = [];\n    }\n  }, {\n    key: 'group',\n    get: function get() {\n      return this.chart.group;\n    }\n  }, {\n    key: 'scale',\n    get: function get() {\n      return this.chart.scale;\n    }\n  }]);\n  return Artist;\n}();\n\nvar defaultColorScheme = d3.scaleOrdinal(d3.schemeCategory10);\n\nfunction drawBox(el, xs, mean, range1, range2) {\n  var box = el.append('g');\n\n  var mid = (xs[0] + xs[1]) / 2;\n  box.append('rect').attr('x', xs[0]).attr('y', Math.min(range1[0], range1[1])).attr('width', xs[1] - xs[0]).attr('height', Math.abs(range1[1] - range1[0]));\n  box.append('line').attr('x1', xs[0]).attr('y1', mean).attr('x2', xs[1]).attr('y2', mean);\n  for (var i = 0; i < 2; i += 1) {\n    box.append('line').attr('x1', mid).attr('y1', range1[i]).attr('x2', mid).attr('y2', range2[i]);\n    box.append('line').attr('x1', xs[0]).attr('y1', range2[i]).attr('x2', xs[1]).attr('y2', range2[i]);\n  }\n  return box;\n}\n\nvar Chart = exports.Chart = function () {\n  function Chart(svg) {\n    var width = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;\n    var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 100;\n    (0, _classCallCheck3.default)(this, Chart);\n\n    this.bggroup = svg.append('g');\n    this.bg = this.bggroup.append('rect').attr('opacity', 0);\n    this.group = this.bggroup.append('g');\n    this.width = width;\n    this.height = height;\n    this.marginAll = [0, 0, 0, 0];\n    this.scale = { x: null, y: null };\n    this.extents = [[Infinity, -Infinity], [Infinity, -Infinity]];\n    this.axis = { x: null, y: null };\n    this.axisHandles = { x: null, y: null };\n    this.charts = [];\n    this.artists = {};\n    this.drawHooks = { xAxis: null, yAxis: null };\n    this.offset = [];\n    this.rotateFlag = false;\n  }\n\n  (0, _createClass3.default)(Chart, [{\n    key: 'resize',\n    value: function resize(width, height) {\n      this.width = width;\n      this.height = height;\n      return this;\n    }\n  }, {\n    key: 'translate',\n    value: function translate(x, y) {\n      this.offset = [x, y];\n      this.bggroup.attr('transform', 'translate(' + this.offset[0] + ',' + this.offset[1] + ')');\n\n      return this;\n    }\n  }, {\n    key: 'transform',\n    value: function transform() {\n      var _this = this;\n\n      if (this.rotateFlag === true) {\n        var x = this.width - this.marginLeft - this.marginRight;\n        var y = this.height - this.marginTop - this.marginBottom;\n        var rx = y / x;\n        var ry = x / y;\n        (0, _keys2.default)(this.artists).forEach(function (artist) {\n          _this.artists[artist].handles.forEach(function (handle) {\n            var scale = '';\n            var rotate = 'rotate(-90, 0, 0)';\n            var translate = 'translate(' + -(_this.width - _this.marginLeft - _this.marginRight) + ', 0)';\n            handle.attr('transform', rotate + translate + scale);\n          });\n        });\n      }\n    }\n  }, {\n    key: 'rotate',\n    value: function rotate() {\n      var _this2 = this;\n\n      this.rotateFlag = !this.rotateFlag;\n      if (this.rotateFlag) {\n        this.drawTmp = this.draw;\n        var tmpSize = [this.width, this.height];\n        var tmpMargin = this.marginAll;\n        this.draw = function () {\n          _this2.axisHandles.x = _this2.axisHandles.y = 1;\n\n          _this2.width = tmpSize[1];\n          _this2.height = tmpSize[0];\n          _this2.marginAll = [tmpMargin[1], tmpMargin[2], tmpMargin[3], tmpMargin[0]];\n\n          _this2.updateScale();\n          _this2.drawTmp();\n\n          _this2.axisHandles.x = _this2.axisHandles.y = null;\n\n          _this2.width = tmpSize[0];\n          _this2.height = tmpSize[1];\n\n          _this2.marginAll = tmpMargin;\n          _this2.extents.reverse();\n          _this2.updateScale();\n          _this2.drawAxis();\n          _this2.extents.reverse();\n        };\n      } else {\n        this.draw = this.drawTmp;\n      }\n      return this;\n    }\n  }, {\n    key: 'background',\n    value: function background(color, alpha) {\n      this.bg.attr('width', this.width).attr('height', this.height).attr('fill', color).attr('opacity', alpha);\n      return this;\n    }\n  }, {\n    key: 'margin',\n    value: function margin(top) {\n      var right = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : top;\n      var bottom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : top;\n      var left = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : right;\n\n      this.marginAll = [top, right, bottom, left];\n      this.group.attr('transform', 'translate(' + this.marginLeft + ', ' + this.marginTop + ')');\n      return this;\n    }\n  }, {\n    key: 'subChart',\n    value: function subChart() {\n      var width = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 100;\n      var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;\n\n      var chart = new Chart(this.group, width, height).translate(this.marginLeft, this.marginTop);\n      this.charts.push(chart);\n      return chart;\n    }\n  }, {\n    key: 'updateExtentI',\n    value: function updateExtentI(extent, i) {\n      var range = extent[1] - extent[0];\n\n      var timer = range === 0 ? 10000 : 10 < range ? 1 : Math.round(10 / range);\n      this.extents[i][0] = Math.min(Math.floor(timer * (extent[0] - range * 0.02)) / timer, this.extents[i][0]);\n      this.extents[i][1] = Math.max(Math.ceil(timer * (extent[1] + range * 0.02)) / timer, this.extents[i][1]);\n\n      return this;\n    }\n  }, {\n    key: 'updateExtent',\n    value: function updateExtent(xExtent, yExtent) {\n      return this.updateExtentI(xExtent, 0).updateExtentI(yExtent, 1);\n    }\n  }, {\n    key: 'updateScale',\n    value: function updateScale(data) {\n      var xfn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (d) {\n        return d[0];\n      };\n      var yfn = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function (d) {\n        return d[1];\n      };\n\n      return this.updateScaleX(data, xfn).updateScaleY(data, yfn);\n    }\n  }, {\n    key: 'updateScaleX',\n    value: function updateScaleX(data, xfn) {\n      if (data) this.updateExtentI(d3.extent(data, xfn), 0);\n      this.scale.x = d3.scaleLinear().domain(this.extents[0]).rangeRound([0, this.width - this.marginRight - this.marginLeft]);\n      return this;\n    }\n  }, {\n    key: 'updateScaleY',\n    value: function updateScaleY(data, yfn) {\n      if (data) this.updateExtentI(d3.extent(data, yfn), 1);\n      this.scale.y = d3.scaleLinear().domain(this.extents[1]).rangeRound([this.height - this.marginBottom - this.marginTop, 0]);\n      return this;\n    }\n  }, {\n    key: 'drawAxis',\n    value: function drawAxis() {\n      if (!this.axisHandles.x && this.drawHooks.xAxis) {\n        this.drawHooks.xAxis();\n      }\n      if (!this.axisHandles.y && this.drawHooks.yAxis) {\n        this.drawHooks.yAxis();\n      }\n    }\n  }, {\n    key: 'xAxis',\n    value: function xAxis() {\n      var _this3 = this;\n\n      var label = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'x';\n      var pos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'bottom';\n\n      var translateStr = void 0;\n      if (pos === 'bottom') {\n        translateStr = function translateStr() {\n          return [0, _this3.scale.y(_this3.extents[1][0])];\n        };\n        this.axis.x = d3.axisBottom();\n      } else if (pos === 'top') {\n        translateStr = function translateStr() {\n          return [0, _this3.scale.y(_this3.extents[1][1])];\n        };\n        this.axis.x = d3.axisTop();\n      } else {\n        console.log('Unknown axis position: ' + pos);\n        return this;\n      }\n      this.drawHooks.xAxis = function () {\n        _this3.axis.x.scale(_this3.scale.x);\n        _this3.axisHandles.x = _this3.group.append('g');\n        _this3.axisHandles.x.attr('transform', 'translate(' + translateStr() + ')').call(_this3.axis.x);\n        if (label) {\n          var labelSize = 13;\n          _this3.axisHandles.x.append('text').attr('transform', 'translate(' + [_this3.scale.x(_this3.extents[0][1]), 0] + ')').attr('dx', labelSize / 2).attr('dy', labelSize / 2).attr('text-anchor', 'start').attr('font-size', labelSize).style('fill', '#000').text(label);\n        }\n      };\n      return this;\n    }\n  }, {\n    key: 'yAxis',\n    value: function yAxis() {\n      var _this4 = this;\n\n      var label = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'y';\n      var pos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'left';\n\n      var translateStr = void 0;\n      if (pos === 'left') {\n        translateStr = function translateStr() {\n          return [_this4.scale.x(_this4.extents[0][0]), 0];\n        };\n        this.axis.y = d3.axisLeft();\n      } else if (pos === 'right') {\n        translateStr = function translateStr() {\n          return [_this4.scale.x(_this4.extents[0][1]), 0];\n        };\n        this.axis.y = d3.axisRight();\n      } else {\n        console.log('Unknown axis position: ' + pos);\n        return this;\n      }\n      this.drawHooks.yAxis = function () {\n        _this4.axis.y.scale(_this4.scale.y);\n        _this4.axisHandles.y = _this4.group.append('g').attr('transform', 'translate(' + translateStr() + ')').call(_this4.axis.y);\n        if (label) {\n          var labelSize = 13;\n          _this4.axisHandles.y.append('text').attr('transform', 'translate(' + [0, _this4.scale.y(_this4.extents[1][1])] + ')').attr('dx', 0).attr('dy', -labelSize / 2).attr('text-anchor', 'middle').attr('font-size', labelSize).style('fill', '#000').text(label);\n        }\n      };\n      return this;\n    }\n  }, {\n    key: 'line',\n    value: function line(data) {\n      var xfn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (d) {\n        return d[0];\n      };\n      var yfn = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function (d) {\n        return d[1];\n      };\n\n      this.updateScale(data, xfn, yfn);\n      var lineArtist = void 0;\n      if (this.artists.lines) {\n        lineArtist = this.artists.lines;\n      } else {\n        var self = this;\n        lineArtist = new LineArtist(self);\n        this.artists.lines = lineArtist;\n      }\n      var handle = lineArtist.plot(data, xfn, yfn);\n      return handle;\n    }\n  }, {\n    key: 'area',\n    value: function area(data, xfn, y0fn, y1fn, color) {\n      this.updateScaleX(data, xfn).updateScaleY(data, y0fn).updateScaleY(data, y1fn);\n      var artist = void 0;\n      if (this.artists.areas) {\n        artist = this.artists.areas;\n      } else {\n        var self = this;\n        artist = new AreaArtist(self);\n        this.artists.areas = artist;\n      }\n      var handle = artist.plot(data, xfn, y0fn, y1fn, color);\n      return handle;\n    }\n  }, {\n    key: 'box',\n    value: function box(data, width, xfn, y0fn, r1fn, r2fn) {\n      var params = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : {};\n\n      this.updateScaleX(data, xfn).updateScaleY(data, function (d, i) {\n        return r2fn(d, i)[0];\n      }).updateScaleY(data, function (d, i) {\n        return r2fn(d, i)[1];\n      });\n      var artist = void 0;\n      if (this.artists.boxes) {\n        artist = this.artists.boxes;\n      } else {\n        var self = this;\n        artist = new BoxArtist(self);\n        this.artists.boxes = artist;\n      }\n      var handle = artist.plot(data, width, xfn, y0fn, r1fn, r2fn, params = {});\n      return handle;\n    }\n  }, {\n    key: 'draw',\n    value: function draw() {\n      var _this5 = this;\n\n      this.transform();\n\n      (0, _keys2.default)(this.artists).forEach(function (name) {\n        return _this5.artists[name].draw();\n      });\n      this.charts.forEach(function (c) {\n        return c.draw();\n      });\n      this.drawAxis();\n    }\n  }, {\n    key: 'clean',\n    value: function clean() {\n      var _this6 = this;\n\n      this.charts.forEach(function (c) {\n        return c.clean();\n      });\n      (0, _keys2.default)(this.artists).forEach(function (name) {\n        return _this6.artists[name].clean();\n      });\n      (0, _keys2.default)(this.axisHandles).forEach(function (name) {\n        if (_this6.axisHandles[name]) {\n          _this6.axisHandles[name].remove();\n          _this6.axisHandles[name] = null;\n        }\n      });\n      this.marginAll = [0, 0, 0, 0];\n      this.rotateFlag = false;\n      this.scale = { x: null, y: null };\n      this.extents = [[Infinity, -Infinity], [Infinity, -Infinity]];\n\n      this.drawHooks = { xAxis: null, yAxis: null };\n      this.charts = [];\n      return this;\n    }\n  }, {\n    key: 'marginTop',\n    get: function get() {\n      return this.marginAll[0];\n    }\n  }, {\n    key: 'marginRight',\n    get: function get() {\n      return this.marginAll[1];\n    }\n  }, {\n    key: 'marginBottom',\n    get: function get() {\n      return this.marginAll[2];\n    }\n  }, {\n    key: 'marginLeft',\n    get: function get() {\n      return this.marginAll[3];\n    }\n  }]);\n  return Chart;\n}();\n\nvar LineArtist = exports.LineArtist = function (_Artist) {\n  (0, _inherits3.default)(LineArtist, _Artist);\n\n  function LineArtist(chart) {\n    (0, _classCallCheck3.default)(this, LineArtist);\n\n    var _this7 = (0, _possibleConstructorReturn3.default)(this, (LineArtist.__proto__ || (0, _getPrototypeOf2.default)(LineArtist)).call(this, chart));\n\n    _this7.data = [];\n    _this7.lines = [];\n    return _this7;\n  }\n\n  (0, _createClass3.default)(LineArtist, [{\n    key: 'plot',\n    value: function plot(data) {\n      var xfn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (d) {\n        return d[0];\n      };\n\n      var _this8 = this;\n\n      var yfn = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function (d) {\n        return d[1];\n      };\n      var color = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : defaultColorScheme(this.handles.length);\n\n      var handle = this.group.append('path');\n      var line = d3.line().x(function (d, i) {\n        return _this8.scale.x(xfn(d, i));\n      }).y(function (d, i) {\n        return _this8.scale.y(yfn(d, i));\n      });\n      var drawHook = function drawHook() {\n        handle.datum(data).attr('d', line).attr('fill', 'none').attr('stroke-linejoin', 'round').attr('stroke-linecap', 'round');\n      };\n      this.data.push(data);\n      this.handles.push(handle);\n      this.lines.push(line);\n      this.drawHooks.push(drawHook);\n      return handle;\n    }\n  }]);\n  return LineArtist;\n}(Artist);\n\nvar AreaArtist = exports.AreaArtist = function (_Artist2) {\n  (0, _inherits3.default)(AreaArtist, _Artist2);\n\n  function AreaArtist(chart) {\n    (0, _classCallCheck3.default)(this, AreaArtist);\n\n    var _this9 = (0, _possibleConstructorReturn3.default)(this, (AreaArtist.__proto__ || (0, _getPrototypeOf2.default)(AreaArtist)).call(this, chart));\n\n    _this9.data = [];\n    _this9.areas = [];\n    return _this9;\n  }\n\n  (0, _createClass3.default)(AreaArtist, [{\n    key: 'plot',\n    value: function plot(data, xfn, y0fn, y1fn) {\n      var _this10 = this;\n\n      var color = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : defaultColorScheme(this.handles.length);\n\n      var handle = this.group.append('path');\n      var area = d3.area().x(function (d, i) {\n        return _this10.scale.x(xfn(d, i));\n      }).y0(function (d, i) {\n        return _this10.scale.y(y0fn(d, i));\n      }).y1(function (d, i) {\n        return _this10.scale.y(y1fn(d, i));\n      });\n      var drawHook = function drawHook() {\n        handle.datum(data);\n        handle.attr('d', area);\n      };\n      this.data.push(data);\n      this.handles.push(handle);\n      this.areas.push(area);\n      this.drawHooks.push(drawHook);\n      return handle;\n    }\n  }]);\n  return AreaArtist;\n}(Artist);\n\nvar BoxArtist = exports.BoxArtist = function (_Artist3) {\n  (0, _inherits3.default)(BoxArtist, _Artist3);\n\n  function BoxArtist(chart) {\n    (0, _classCallCheck3.default)(this, BoxArtist);\n\n    var _this11 = (0, _possibleConstructorReturn3.default)(this, (BoxArtist.__proto__ || (0, _getPrototypeOf2.default)(BoxArtist)).call(this, chart));\n\n    _this11.data = [];\n    return _this11;\n  }\n\n  (0, _createClass3.default)(BoxArtist, [{\n    key: 'plot',\n    value: function plot(data, width, xfn, y0fn, r1fn, r2fn, params) {\n      var _this12 = this;\n\n      var handle = this.group.append('g');\n      var drawHook = function drawHook() {\n        data.forEach(function (d, i) {\n          var xShift = _this12.scale.x(xfn(d, i));\n          BoxArtist.drawBox(handle, [xShift - width / 2, xShift + width / 2], _this12.scale.y(y0fn(d, i)), r1fn(d, i).map(function (v) {\n            return _this12.scale.y(v);\n          }), r2fn(d, i).map(function (v) {\n            return _this12.scale.y(v);\n          }));\n        });\n      };\n      this.handles.push(handle);\n      this.drawHooks.push(drawHook);\n      this.data.push(data);\n      return handle;\n    }\n  }], [{\n    key: 'drawBox',\n    value: function drawBox(el, xs, mean, range1, range2) {\n      var box = el.append('g');\n\n      var mid = (xs[0] + xs[1]) / 2;\n      box.append('rect').attr('x', xs[0]).attr('y', Math.min(range1[0], range1[1])).attr('width', xs[1] - xs[0]).attr('height', Math.abs(range1[1] - range1[0]));\n      box.append('line').attr('x1', xs[0]).attr('y1', mean).attr('x2', xs[1]).attr('y2', mean).attr('stroke-width', 0.5);\n      for (var i = 0; i < 2; i += 1) {\n        box.append('line').attr('x1', mid).attr('y1', range1[i]).attr('x2', mid).attr('y2', range2[i]).attr('stroke-width', 0.5);\n        box.append('line').attr('x1', xs[0]).attr('y1', range2[i]).attr('x2', xs[1]).attr('y2', range2[i]).attr('stroke-width', 0.5);\n      }\n      return box;\n    }\n  }]);\n  return BoxArtist;\n}(Artist);\n\nexports.default = {\n  Chart: Chart\n};\n\n/***/ }),\n\n/***/ 166:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sentence = undefined;\n\nvar _sign = __webpack_require__(168);\n\nvar _sign2 = _interopRequireDefault(_sign);\n\nvar _from = __webpack_require__(50);\n\nvar _from2 = _interopRequireDefault(_from);\n\nvar _toConsumableArray2 = __webpack_require__(73);\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _classCallCheck2 = __webpack_require__(25);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(26);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _d = __webpack_require__(21);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _preprocess = __webpack_require__(167);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar layoutParams = {\n  nodeIntervalScale: 1.5,\n  color: d3.scaleOrdinal(d3.schemeCategory20),\n  radiusScale: 1.5,\n  widthScale: 1.5,\n  avgValueRange: [-0.5, 0.5],\n  rulerScale: 0.2,\n  markerWidthScale: 0.6,\n  markerHeightScale: 0.3,\n  wordSize: 12,\n  labelSize: 10,\n  negColor: '#09adff',\n  posColor: '#ff5b09'\n};\n\nvar SentenceLayout = function () {\n  function SentenceLayout(selector) {\n    var compare = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : layoutParams;\n    (0, _classCallCheck3.default)(this, SentenceLayout);\n\n    this.group = selector;\n    this._size = [50, 600];\n    this._rectSize = [20, 50];\n    this._sentence;\n    this._coCluster;\n    this.params = params;\n\n    this._dataList = [];\n    this.type = 'bar2';\n    this.compare = compare;\n    this._mouseoverCallback = function (_) {\n      console.log(_);\n    };\n    this._barMouseoverCallback = function (_) {\n      console.log(_);\n    };\n    this.transform();\n  }\n\n  (0, _createClass3.default)(SentenceLayout, [{\n    key: 'mouseoverCallback',\n    value: function mouseoverCallback(func) {\n      return arguments.length ? (this._mouseoverCallback = func, this) : this._mouseoverCallback;\n    }\n  }, {\n    key: 'barMouseoverCallback',\n    value: function barMouseoverCallback(func) {\n      return arguments.length ? (this._barMouseoverCallback = func, this) : this._barMouseoverCallback;\n    }\n  }, {\n    key: 'size',\n    value: function size(_size) {\n      return arguments.length ? (this._size = _size, this) : this._size;\n    }\n  }, {\n    key: 'transform',\n    value: function transform() {\n      var transformStr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n      if (this.compare) transformStr += 'scale(-1, 1) translate(' + [-this.nodeWidth, 0] + ')';\n      console.log(transformStr);\n      this.group.transition().duration(200).attr('transform', transformStr);\n      return this;\n    }\n  }, {\n    key: 'sentence',\n    value: function sentence(_sentence) {\n      return arguments.length ? (this._sentence = _sentence, this) : this._sentence;\n    }\n  }, {\n    key: 'coCluster',\n    value: function coCluster(_coCluster) {\n      return arguments.length ? (this._coCluster = _coCluster, this) : this._coCluster;\n    }\n  }, {\n    key: 'words',\n    value: function words(_words) {\n      return arguments.length ? (this._words = _words, this) : this._words;\n    }\n  }, {\n    key: 'draw',\n    value: function draw() {\n      var _this = this;\n\n      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.type;\n\n      this.type = type;\n\n      this.prepareDraw(type);\n\n      if (type === 'pie') {\n        this._dataList.forEach(function (data, i) {\n          var pos = _this.getWordPos(i);\n          var g = _this.group.append('g');\n          _this.drawWord(g, data, i).attr('transform', 'translate(' + pos + ')');\n        });\n      } else {\n        this._dataList.forEach(function (data, i) {\n          var pos = _this.getWordPos(i);\n          if (i > 0) {\n            var gl = _this.group.append('g');\n            _this.drawConnection(gl, data, i).attr('transform', 'translate(' + [pos[0], pos[1] - _this.nodeInterval] + ')');\n          }\n          var g = _this.group.append('g');\n          _this.drawWord(g, data, i).attr('transform', 'translate(' + pos + ')');\n        });\n      }\n\n\n      return this;\n    }\n  }, {\n    key: 'drawWordRect',\n    value: function drawWordRect(g, data, rectSize, func) {\n      data.forEach(function (d, i) {\n        g.append('text').text(d.word).style('text-anchor', 'middle').attr('transform', 'rotate(90)translate(' + [rectSize[1] * i + rectSize[1] / 2, -rectSize[0] / 4] + ')');\n\n        g.append('rect').attr('x', 0).attr('y', i * rectSize[1]).attr('width', rectSize[0]).attr('height', rectSize[1]).attr('fill', 'lightgray').attr('stroke-width', 2).attr('stroke', 'blue').attr('opacity', 0.2);\n      });\n      g.append('g').call(d3.brushY().extent([[0, 0], [rectSize[0], rectSize[1] * data.length]]).on('end', function () {\n        if (!d3.event.sourceEvent) return;\n        if (!d3.event.selection) return;\n        var extent = d3.event.selection;\n        extent[0] = Math.round(extent[0] / rectSize[1]) * rectSize[1];\n        extent[1] = Math.round(extent[1] / rectSize[1]) * rectSize[1];\n        d3.select(this).transition().call(d3.event.target.move, extent);\n        func([Math.round(extent[0] / rectSize[1]), Math.round(extent[1] / rectSize[1])]);\n      }));\n\n      return g;\n    }\n  }, {\n    key: 'prepareDraw',\n    value: function prepareDraw() {\n      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.type;\n\n      if (this._dataList.length !== this._sentence.length || this._dataList[0].data[0].current.length != this._coCluster.labels.length) this._dataList = this.preprocess(this._sentence, this._coCluster, this._words);else this.clean();\n\n      var maxValue = 0.1;\n      this.dataList.forEach(function (data) {\n        data.data.forEach(function (clst) {\n          var clstMaxP = clst.currents[0] - Math.min(clst.updateds[0], 0);\n          var clstMaxN = clst.currents[1] - Math.min(clst.updateds[1], 0);\n          var clstMax = Math.max(clstMaxP / clst.size, Math.abs(clstMaxN / clst.size));\n          maxValue = maxValue < clstMax ? clstMax : maxValue;\n        });\n      });\n      maxValue = Math.ceil(maxValue * 11) / 10;\n      this.params.avgValueRange = [-maxValue, maxValue];\n      if (type === 'bar') {\n        this.scaleHeight = d3.scaleLinear().range([-this.nodeHeight / 2, this.nodeHeight / 2]).domain(this.params.avgValueRange);\n        var stateSize = 0;\n        for (var j = 0; j < this._dataList[0].data.length; j++) {\n          stateSize += this._dataList[0].data[j].size;\n        }this.scaleWidth = d3.scaleLinear().range([0, this.nodeWidth]).domain([0, stateSize]);\n      } else if (type === 'bar2') this.scaleHeight = d3.scaleLinear().range([-this.nodeHeight / 2, this.nodeHeight / 2]).domain(this.params.avgValueRange);\n      this.drawWord = type === 'pie' ? this.drawOneWordPie : type === 'bar' ? this.drawOneWordBar : this.drawOneWordBar2;\n      this.drawConnection = type === 'bar' ? this.drawOneConnection : type === 'bar2' ? this.drawOneConnection2 : null;\n    }\n  }, {\n    key: 'clean',\n    value: function clean() {\n      this._dataList.forEach(function (data) {\n        if (data.el) data.el.transition().duration(300).style('opacity', 0).remove();\n      });\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this.clean();\n      this._dataList = [];\n    }\n  }, {\n    key: 'getWordPos',\n    value: function getWordPos(i) {\n      return [0, (this.nodeHeight + this.nodeInterval) * i];\n    }\n  }, {\n    key: 'drawOneWordBar',\n    value: function drawOneWordBar(el, data, i) {\n      var height = this.nodeHeight;\n      var width = this.nodeWidth;\n      var color = this.params.color;\n      console.log(data);\n      var scaleHeight = this.scaleHeight;\n      var scaleWidth = this.scaleWidth;\n\n      var bg = el.append('rect').attr('x', 0).attr('y', 0).attr('width', width).attr('height', height).attr('stroke', 'gray').attr('stroke-width', 0.5).attr('fill', 'none');\n\n      var gSelector = el.selectAll('g').data(data.data);\n      var g1 = gSelector.enter().append('g');\n      var cur = g1.append('rect').attr('x', function (d) {\n        return scaleWidth(d.accumulate);\n      }).attr('y', function (d) {\n        return height - scaleHeight(d.prev / d.size);\n      }).attr('width', function (d) {\n        return scaleWidth(d.size);\n      }).attr('height', function (d) {\n        return scaleHeight(d.prev / d.size);\n      }).attr('fill', function (d, j) {\n        return color(j);\n      });\n      g1.style('fill-opacity', 0.4).style('stroke', 'gray').style('stroke-width', 0.5);\n\n      var g2 = gSelector.enter().append('g');\n      var updated = g2.append('rect').attr('x', function (d) {\n        return scaleWidth(d.accumulate);\n      }).attr('y', function (d) {\n        return height - (d.updated * d.major < 0 ? scaleHeight(d.prev / d.size) : scaleHeight((d.prev + d.updated * d.major) / d.size));\n      }).attr('width', function (d) {\n        return scaleWidth(d.size);\n      }).attr('height', function (d) {\n        return scaleHeight(Math.abs(d.updated) / d.size);\n      }).attr('fill', function (d, j) {\n        return d.updated * d.major < 0 ? 'white' : color(j);\n      });\n      g2.style('fill-opacity', 0.8).style('stroke', 'gray').style('stroke-width', 0.5);\n\n      data.el = el;\n      return el;\n    }\n  }, {\n    key: 'drawOneWordBar2',\n    value: function drawOneWordBar2(el, data, t) {\n      var paintColor = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      var self = this;\n      var height = this.nodeHeight;\n      var width = this.nodeWidth;\n      var color = this.params.color;\n\n      var scaleHeight = this.scaleHeight;\n      var unitWidth = this.nodeWidth / data.data.length;\n      var posColor = this.params.posColor;\n      var negColor = this.params.negColor;\n\n      el.on('mouseover', function () {\n        self._mouseoverCallback(data, t, true);\n      }).on('mouseleave', function () {\n        self._mouseoverCallback(data, t, false);\n      }).on('click', function () {\n        self._mouseoverCallback(data, t, false, true);\n      });\n\n      var bg = el.append('rect').attr('x', 0).attr('y', 0).attr('width', width).attr('height', height).attr('stroke', 'black').attr('stroke-width', 1.0).attr('stroke-opacity', 0.3).attr('fill', 'white').attr('fill-opacity', 0);\n\n      var gSelector = el.selectAll('g').data(data.data);\n      var gCurrent = gSelector.enter().append('g').on('mouseenter', function (d, i) {\n        self._barMouseoverCallback(i, true);\n      }).on('mouseleave', function (d, i) {\n        self._barMouseoverCallback(i, false);\n      });\n      var cur = gCurrent.append('rect').attr('x', function (d, i) {\n        return unitWidth * i;\n      }).attr('y', function (d) {\n        return height / 2 - scaleHeight(d.currents[0] / d.size);\n      }).attr('width', function (d) {\n        return unitWidth;\n      }).attr('height', function (d) {\n        return scaleHeight((d.currents[0] - d.currents[1]) / d.size);\n      }).attr('fill', function (d, j) {\n        return color(j);\n      });\n      gCurrent.style('fill-opacity', 0.4).attr('stroke', 'black').attr('stroke-width', 1.0).attr('stroke-opacity', 0.5);\n\n      gCurrent.append('path').attr('d', function (d, i) {\n        return 'M ' + unitWidth * i + ' ' + (height / 2 - scaleHeight(d.currents[0] / d.size)) + ' H ' + unitWidth * (i + 1);\n      }).attr('stroke-width', 2);\n\n      gCurrent.append('path').attr('d', function (d, i) {\n        return 'M ' + unitWidth * i + ' ' + (height / 2 - scaleHeight(d.currents[1] / d.size)) + ' H ' + unitWidth * (i + 1);\n      }).attr('stroke-width', 2);\n\n      var gUpdated1 = gSelector.enter().append('g');\n      var updated1 = gUpdated1.append('rect').attr('x', function (d, i) {\n        return unitWidth * i;\n      }).attr('y', function (d) {\n        return height / 2 + scaleHeight(-d.currents[1] / d.size);\n      }).attr('width', function (d) {\n        return unitWidth;\n      }).attr('height', function (d) {\n        return scaleHeight(Math.abs(d.updateds[1]) / d.size);\n      }).attr('transform', function (d) {\n        return d.updateds[1] < 0 ? 'translate(' + [0, -scaleHeight(Math.abs(d.updateds[1]) / d.size)] + ')' : '';\n      }).style('fill-opacity', 0.4);\n      if (paintColor) {\n        updated1.attr('fill', function (d, j) {\n          return d.updateds[1] > 0 ? 'none' : color(j);\n        });\n      } else {\n        updated1.attr('fill', function (d, i) {\n          return d.updateds[1] > 0 ? posColor : negColor;\n        });\n        cur.attr('fill', function (d, j) {\n          return '#bbb';\n        });\n      }\n      gUpdated1.style('stroke-width', 0.5).style('stroke', 'none');\n\n      var gUpdated2 = gSelector.enter().append('g');\n      var updated2 = gUpdated2.append('rect').attr('x', function (d, i) {\n        return unitWidth * i;\n      }).attr('y', function (d) {\n        return height / 2 - scaleHeight(d.currents[0] / d.size);\n      }).attr('width', function (d) {\n        return unitWidth;\n      }).attr('height', function (d) {\n        return scaleHeight(Math.abs(d.updateds[0]) / d.size);\n      }).attr('transform', function (d) {\n        return d.updateds[0] < 0 ? 'translate(' + [0, -scaleHeight(Math.abs(d.updateds[0]) / d.size)] + ')' : '';\n      }).style('stroke-opacity', function (d, j) {\n        return d.updateds[1] < 0 ? 1.0 : 1.0;\n      });\n      if (paintColor) {\n        updated2.attr('fill', function (d, j) {\n          return d.updateds[0] < 0 ? 'none' : color(j);\n        });\n      } else {\n        updated2.attr('fill', function (d, i) {\n          return d.updateds[0] < 0 ? negColor : posColor;\n        });\n      }\n      gUpdated2.style('stroke-width', 0.5).style('stroke', 'none').style('fill-opacity', 0.4);\n\n      el.append('path').attr('d', 'M0 ' + height / 2 + ' H ' + width).style('stroke', 'black').style('stroke-width', 0.5);\n\n      var fontSize = this.params.wordSize;\n      var labelSize = this.params.labelSize;\n      var valRange = [this.params.avgValueRange[1], this.params.avgValueRange[0]];\n      var wordX = this.compare ? 4 + width : -2 - fontSize;\n      el.selectAll('text').data(valRange).enter().append('text').attr('x', this.compare ? width + 2 : -2).attr('y', function (d, i) {\n        return i * (height - 4) + 5;\n      }).attr('text-anchor', this.compare ? 'start' : 'end').attr('font-size', labelSize).text(function (d) {\n        return d;\n      });\n\n      el.append('text').attr('x', wordX).attr('y', height / 2).attr('text-anchor', 'middle').attr('transform', 'rotate(' + [90, wordX, height / 2] + ')').attr('font-size', fontSize).text(data.word);\n\n      cur.each(function (d) {\n        if (d.els) d.els[0] = this;else d.els = [this];\n      });\n      updated1.each(function (d) {\n        d.els[1] = this;\n      });\n      updated2.each(function (d) {\n        d.els[2] = this;\n      });\n      data.els = [cur, updated1, updated2];\n      data.el = el;\n      data.bg = bg;\n      return el;\n    }\n  }, {\n    key: 'drawOneConnection2',\n    value: function drawOneConnection2(el, data, t) {\n      var _this2 = this;\n\n      var paintColor = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      var height = this.nodeInterval;\n\n      var color = paintColor ? this.params.color : function (i) {\n        return data.data[i].currents[0] + data.data[i].currents[1] > 0 ? _this2.params.posColor : _this2.params.negColor;\n      };\n\n      var unitWidth = this.nodeWidth / data.data.length;\n      var rulerWidth = this.params.rulerScale * unitWidth;\n      var markerWidth = this.params.markerWidthScale * unitWidth;\n      var markerHeight = this.params.markerHeightScale * unitWidth;\n      var gs = el.selectAll('g').data(data.data).enter().append('g');\n      var rulers1 = gs.append('rect').attr('x', function (d, i) {\n        return unitWidth * (i + 0.5) - rulerWidth / 2;\n      }).attr('y', 0).attr('width', rulerWidth).attr('height', function (d) {\n        return (height - markerHeight) * d.keptRate;\n      }).style('stroke', 'none').style('fill', function (d, i) {\n        return color(i);\n      }).style('fill-opacity', 0.5);\n\n      var rulers2 = gs.append('rect').attr('x', function (d, i) {\n        return unitWidth * (i + 0.5) - rulerWidth / 2;\n      }).attr('y', function (d) {\n        return (height - markerHeight) * d.keptRate;\n      }).attr('width', rulerWidth).attr('height', function (d) {\n        return height - (height - markerHeight) * d.keptRate;\n      }).style('stroke', 'none').style('fill', 'gray').style('fill-opacity', 0.5);\n\n      var markers = gs.append('path').attr('d', function (d, i) {\n        return 'M' + (unitWidth * (i + 0.5) - markerWidth / 2) + ' ' + (height - markerHeight) * d.keptRate + ' ' + 'H' + ' ' + (unitWidth * (i + 0.5) + markerWidth / 2) + ' ' + 'L' + ' ' + unitWidth * (i + 0.5) + ' ' + ((height - markerHeight) * d.keptRate + markerHeight);\n      });\n\n      return el;\n    }\n  }, {\n    key: 'drawOneConnection',\n    value: function drawOneConnection(el, data, i) {\n      var height = this.nodeInterval;\n      var width = this.nodeWidth;\n      var color = this.params.color;\n      console.log(data);\n\n      var scaleWidth = this.scaleWidth;\n      var calPoints = function calPoints(clst) {\n        var arr = new Array(4);\n        var mar = (1 - clst.keptRate) * clst.size / 2;\n        arr[0] = [scaleWidth(clst.accumulate), 0];\n        arr[1] = [scaleWidth(clst.accumulate + clst.size), 0];\n        arr[2] = [scaleWidth(clst.accumulate + clst.size - mar), height];\n        arr[3] = [scaleWidth(clst.accumulate + mar), height];\n        return arr[0] + ' ' + arr[1] + ' ' + arr[2] + ' ' + arr[3];\n      };\n      el.selectAll('polygon').data(data.data).enter().append('polygon').attr('points', function (d) {\n        return calPoints(d);\n      }).attr('fill', function (d, j) {\n        return color(j);\n      }).attr('fill-opacity', 0.6);\n      return el;\n    }\n  }, {\n    key: 'drawOneWordPie',\n    value: function drawOneWordPie(el, data, i) {\n      var radius = this.radius;\n      var color = this.params.color;\n      console.log(data);\n      var arc1 = d3.arc().innerRadius(1).outerRadius(function (d) {\n        return radius * d.data.keptRate;\n      });\n\n      var arc2 = d3.arc().innerRadius(function (d) {\n        return radius * d.data.keptRate;\n      }).outerRadius(radius);\n\n      var arc3 = d3.arc().innerRadius(function (d) {\n        return radius * (d.data.updatedRate < 0 ? 1 + d.data.updatedRate : 1);\n      }).outerRadius(function (d) {\n        return radius * (d.data.updatedRate < 0 ? 1 : 1 + d.data.updatedRate);\n      });\n\n      var arcs = [arc1, arc3, arc2];\n      var pie = d3.pie().sort(null).value(function (d) {\n        return d.prev ? d.prev : d.current;\n      });\n\n      var gs = new Array(3);\n      var handles = new Array(3);\n\n      var _loop = function _loop(j) {\n        gs[j] = el.append('g');\n        if (i === 0 && j === 0) return 'continue';\n        handles[j] = gs[j].selectAll(\".arc\").append('g').classed('arc', true).data(pie(data.data)).enter().append(\"path\").attr(\"d\", arcs[j]).attr('stroke', 'gray').attr('stroke-width', 0.3).attr('fill', function (d, k) {\n          return j === 2 ? 'gray' : color(k);\n        });\n      };\n\n      for (var j = 0; j < 3; j++) {\n        var _ret = _loop(j);\n\n        if (_ret === 'continue') continue;\n      };\n      handles[1].attr('fill-opacity', function (d, k) {\n        return data.data[k].updatedRate < 0 ? 0.3 : 0.7;\n      });\n      gs[0].attr('fill-opacity', 0.7);\n\n      gs[2].attr('fill-opacity', 0.0);\n\n      data.els = gs;\n      data.handles = handles;\n      data.el = el;\n      return el;\n    }\n  }, {\n    key: 'preprocess',\n    value: function preprocess(sentence, coCluster, words) {\n      var len = sentence.length;\n      var clusterNum = coCluster.labels.length;\n      var stateNum = sentence[0].length;\n      var clustersSize = coCluster.colClusters.map(function (clst) {\n        return clst.length;\n      });\n      var accClustersSize = new Float32Array(clustersSize.length);\n      for (var i = 1; i < accClustersSize.length; i++) {\n        accClustersSize[i] += accClustersSize[i - 1] + clustersSize[i - 1];\n      }\n      var currentStates = sentence.map(function (word) {\n        return coCluster.colClusters.map(function (cluster) {\n          return cluster.map(function (idx) {\n            return word[idx];\n          });\n        });\n      });\n\n      var updatedData = sentence.map(function (word, t) {\n        if (t === 0) return word;\n        return word.map(function (v, j) {\n          return v - sentence[t - 1][j];\n        });\n      });\n\n      var infoPositive = new Array(len);\n      var infoNegative = new Array(len);\n      var infoCurrent = new Array(len);\n      for (var t = 0; t < len; t++) {\n        infoPositive[t] = new Float32Array(clusterNum);\n        infoNegative[t] = new Float32Array(clusterNum);\n        infoCurrent[t] = new Float32Array(clusterNum);\n        for (var _i = 0; _i < clusterNum; _i++) {\n          for (var j = 0; j < clustersSize[_i]; j++) {\n            if (currentStates[t][_i][j] > 0) {\n              infoPositive[t][_i] += currentStates[t][_i][j];\n            } else {\n              infoNegative[t][_i] += currentStates[t][_i][j];\n            }\n            infoCurrent[t][_i] += Math.abs(currentStates[t][_i][j]);\n          }\n        }\n      }\n\n      var infoPrevious = [new Float32Array(clusterNum)].concat((0, _toConsumableArray3.default)(infoCurrent.slice(0, len - 1)));\n      var h_tij = [currentStates[0].map(function (clst) {\n        return new Float32Array(clst.length);\n      })].concat((0, _toConsumableArray3.default)(currentStates));\n\n      var infoKept = new Array(len);\n      var keptPositive = new Array(len);\n      var keptNegative = new Array(len);\n      for (var _t = 0; _t < len; _t++) {\n        infoKept[_t] = new Float32Array(clusterNum);\n        keptPositive[_t] = new Float32Array(clusterNum);\n        keptNegative[_t] = new Float32Array(clusterNum);\n        for (var _i2 = 0; _i2 < clusterNum; _i2++) {\n          for (var _j = 0; _j < clustersSize[_i2]; _j++) {\n            var prev = h_tij[_t][_i2][_j];\n            var cur = h_tij[_t + 1][_i2][_j];\n            var ratio = cur / prev;\n            infoKept[_t][_i2] += Math.abs(prev) * (ratio < 0 ? 0 : 1 < ratio ? 1 : ratio);\n            keptPositive[_t][_i2] += prev > 0 ? cur > 0 ? cur > prev ? prev : cur : 0 : 0;\n            keptNegative[_t][_i2] += prev < 0 ? cur < 0 ? cur < prev ? prev : cur : 0 : 0;\n          }\n        }\n      }\n\n      var dataList = words.map(function (word, t) {\n        var data = (0, _from2.default)(infoCurrent[t], function (current, i) {\n          var prev = infoPrevious[t][i];\n\n          var keptP = keptPositive[t][i];\n          var keptN = keptNegative[t][i];\n          var kept = keptP - keptN;\n          var positive = infoPositive[t][i];\n          var negative = infoNegative[t][i];\n          var prevPositive = t > 0 ? infoPositive[t - 1][i] : 0;\n          var prevNegative = t > 0 ? infoNegative[t - 1][i] : 0;\n          var updatedPositive = positive - prevPositive;\n          var updatedNegative = negative - prevNegative;\n          var updated = updatedPositive + updatedNegative;\n          var size = clustersSize[i];\n          return {\n            currents: [positive, negative],\n            current: current,\n            prev: prev,\n            updatedRate: prev === 0 ? 0 : updated / prev,\n            keptRate: prev === 0 ? 0 : kept / prev,\n            updated: updated,\n            updateds: [updatedPositive, updatedNegative],\n            kepts: [keptP, keptN],\n            kept: kept,\n            size: clustersSize[i],\n            accumulate: accClustersSize[i],\n            major: (0, _sign2.default)(positive + negative)\n          };\n        });\n        return {\n          word: word,\n          data: data,\n          response: updatedData[t]\n        };\n      });\n      return dataList;\n    }\n  }, {\n    key: 'radius',\n    get: function get() {\n      if (!this._radius) {\n        var radius = this._size[0] / (this.params.widthScale * 2);\n        if (this._sentence && !this._radius) {\n          var radius2 = this._size[1] / (this.params.nodeIntervalScale * (this._sentence.length - 1) + this.params.radiusScale * 2 * this._sentence.length);\n\n          this._radius = radius < radius2 ? radius : radius2;\n        } else {\n          return radius;\n        }\n      }\n      return this._radius;\n    }\n  }, {\n    key: 'nodeHeight',\n    get: function get() {\n      return this.params.radiusScale * 2 * this.radius;\n    }\n  }, {\n    key: 'nodeWidth',\n    get: function get() {\n      return this.params.widthScale * 2 * this.radius;\n    }\n  }, {\n    key: 'nodeInterval',\n    get: function get() {\n      return this.params.nodeIntervalScale * this.radius;\n    }\n  }, {\n    key: 'dataList',\n    get: function get() {\n      return this._dataList;\n    }\n  }, {\n    key: 'strengthByCluster',\n    get: function get() {\n      if (!this._sentence || !this._coCluster) return undefined;\n      if (this._dataList.length !== this._sentence.length || this._dataList[0].data[0].current.length != this._coCluster.labels.length) this._dataList = this.preprocess(this._sentence, this._coCluster, this._words);\n      if (!this._strengthByCluster) {\n        this._strengthByCluster = this._dataList.map(function (word, i) {\n          return word.data.map(function (clst, j) {\n            return clst.size === 0 ? 0 : clst.updated / clst.size;\n          });\n        });\n      }\n      return this._strengthByCluster;\n    }\n  }]);\n  return SentenceLayout;\n}();\n\n;\n\nfunction sentence(selector) {\n  var compare = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  return new SentenceLayout(selector, compare);\n};\n\nexports.sentence = sentence;\n\n/***/ }),\n\n/***/ 167:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StateStatistics = exports.SentenceRecord = exports.CoClusterProcessor = undefined;\n\nvar _promise = __webpack_require__(34);\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _keys = __webpack_require__(33);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _set = __webpack_require__(72);\n\nvar _set2 = _interopRequireDefault(_set);\n\nvar _toConsumableArray2 = __webpack_require__(73);\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _from = __webpack_require__(50);\n\nvar _from2 = _interopRequireDefault(_from);\n\nvar _classCallCheck2 = __webpack_require__(25);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(26);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _dataService = __webpack_require__(32);\n\nvar _dataService2 = _interopRequireDefault(_dataService);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar CoClusterProcessor = exports.CoClusterProcessor = function () {\n  function CoClusterProcessor(modelName, stateName) {\n    var nCluster = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n    var params = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : { top_k: 300, mode: 'raw', layer: -1 };\n    var sortBy = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 'col';\n    (0, _classCallCheck3.default)(this, CoClusterProcessor);\n\n    this.rawData;\n    this._rowClusters;\n    this._colClusters;\n    this._colSizes;\n    this._rolSizes;\n    this._aggregation_info = null;\n    this.modelName = modelName;\n    this.stateName = stateName;\n    this.nCluster = nCluster;\n    this.params = params;\n    this.sortBy = sortBy;\n  }\n\n  (0, _createClass3.default)(CoClusterProcessor, [{\n    key: 'load',\n    value: function load() {\n      var _this = this;\n\n      return _dataService2.default.getCoCluster(this.modelName, this.stateName, this.nCluster, this.params, function (response) {\n        if (response.status === 200) {\n          _this.rawData = response.data;\n          console.log(_this);\n        } else {\n          throw response;\n        }\n      });\n    }\n  }, {\n    key: 'strength_filter',\n    value: function strength_filter(strength) {\n      var mode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.params.mode;\n\n      switch (mode) {\n        case 'positive':\n          return strength > 0 ? strength : 0;\n          break;\n        case 'negative':\n          return strength < 0 ? Math.abs(strength) : 0;\n          break;\n        case 'abs':\n          return Math.abs(strength);\n          break;\n        case 'raw':\n          return strength;\n          break;\n      }\n    }\n  }, {\n    key: 'Create2DArray',\n    value: function Create2DArray(rowNum, colNum) {\n      return (0, _from2.default)({ length: rowNum }, function (v, i) {\n        return new Float32Array(colNum);\n      });\n    }\n  }, {\n    key: 'correlation',\n    get: function get() {\n      return this.hasData ? this.rawData.data : undefined;\n    }\n  }, {\n    key: 'labels',\n    get: function get() {\n      var _this2 = this;\n\n      if (this.hasData && !this._labels) {\n        this._labels = [].concat((0, _toConsumableArray3.default)(new _set2.default([].concat((0, _toConsumableArray3.default)(this.colLabels), (0, _toConsumableArray3.default)(this.rowLabels)))));\n        if (this.sortBy === 'col') this._labels.sort(function (a, b) {\n          return _this2.colSizes[a] - _this2.colSizes[b];\n        });else if (this.sortBy === 'row') this._labels.sort(function (a, b) {\n          return _this2.rowSizes[a] - _this2.rowSizes[b];\n        });\n      }\n      return this._labels;\n    }\n  }, {\n    key: 'colSizes',\n    get: function get() {\n      if (this.hasData && !this._colSizes) {\n        var colSizes = new Int32Array(this.labels.length);\n        this.colLabels.forEach(function (label, i) {\n          colSizes[label] += 1;\n        });\n        this._colSizes = colSizes;\n      }\n      return this._colSizes;\n    }\n  }, {\n    key: 'rowSizes',\n    get: function get() {\n      if (this.hasData && !this._rowSizes) {\n        var rowSizes = new Int32Array(this.labels.length);\n        this.rowLabels.forEach(function (label, i) {\n          rowSizes[label] += 1;\n        });\n        this._rowSizes = rowSizes;\n      }\n      return this._rowSizes;\n    }\n  }, {\n    key: 'rowLabels',\n    get: function get() {\n      return this.hasData ? this.rawData.row : undefined;\n    }\n  }, {\n    key: 'colLabels',\n    get: function get() {\n      return this.hasData ? this.rawData.col : undefined;\n    }\n  }, {\n    key: 'ids',\n    get: function get() {\n      return this.hasData ? this.rawData.ids : undefined;\n    }\n  }, {\n    key: 'words',\n    get: function get() {\n      return this.hasData ? this.rawData.words : undefined;\n    }\n  }, {\n    key: 'hasData',\n    get: function get() {\n      return Boolean(this.rawData);\n    }\n  }, {\n    key: 'aggregation_info',\n    get: function get() {\n      var _this3 = this;\n\n      if (this.hasData && !this._aggregation_info) {\n        var row_cluster_2_col_cluster = this.Create2DArray(this.nCluster, this.nCluster);\n        var _row_single_2_col_cluster = this.Create2DArray(this.rawData.row.length, this.nCluster);\n        var row_cluster_2_col_single = this.Create2DArray(this.nCluster, this.rawData.col.length);\n        var _row_single_2_col_single = this.Create2DArray(this.rawData.row.length, this.rawData.col.length);\n        var cluster = [];\n\n        this.correlation.forEach(function (strength_list, r_index) {\n          strength_list.forEach(function (s, c_index) {\n            var strength = _this3.strength_filter(s);\n            row_cluster_2_col_cluster[_this3.rawData.row[r_index]][_this3.rawData.col[c_index]] += strength / (_this3.rowSizes[_this3.rowLabels[r_index]] * _this3.colSizes[_this3.colLabels[c_index]]);\n            row_cluster_2_col_single[_this3.rawData.row[r_index]][c_index] += strength / _this3.rowSizes[_this3.rowLabels[r_index]];\n            _row_single_2_col_cluster[r_index][_this3.rawData.col[c_index]] += strength / _this3.colSizes[_this3.colLabels[c_index]];\n            _row_single_2_col_single[r_index][c_index] += strength;\n          });\n        });\n\n        this._aggregation_info = {\n          row_cluster_2_col_cluster: row_cluster_2_col_cluster,\n          row_single_2_col_cluster: _row_single_2_col_cluster,\n          row_cluster_2_col_single: row_cluster_2_col_single,\n          row_single_2_col_single: _row_single_2_col_single\n        };\n      }\n      return this._aggregation_info;\n    }\n  }, {\n    key: 'cluster2cluster',\n    get: function get() {\n      var _this4 = this;\n\n      if (this.hasData && !this._cluster2cluster) {\n        var row_cluster_2_col_cluster = this.Create2DArray(this.nCluster, this.nCluster);\n        this.correlation.forEach(function (strength_list, r_index) {\n          strength_list.forEach(function (s, c_index) {\n            var strength = _this4.strength_filter(s);\n            row_cluster_2_col_cluster[_this4.rawData.row[r_index]][_this4.rawData.col[c_index]] += strength;\n          });\n        });\n        this._cluster2cluster = row_cluster_2_col_cluster;\n      }\n      return this._cluster2cluster;\n    }\n  }, {\n    key: 'single2cluster',\n    get: function get() {\n      var _this5 = this;\n\n      if (this.hasData && !this._single2cluster) {\n        var _row_single_2_col_cluster2 = this.Create2DArray(this.rawData.row.length, this.nCluster);\n        this.correlation.forEach(function (strength_list, r_index) {\n          strength_list.forEach(function (s, c_index) {\n            var strength = _this5.strength_filter(s);\n            _row_single_2_col_cluster2[r_index][_this5.rawData.col[c_index]] += strength;\n          });\n        });\n        this._single2cluster = _row_single_2_col_cluster2;\n      }\n      return this._cluster2cluster;\n    }\n  }, {\n    key: 'cluster2single',\n    get: function get() {\n      var _this6 = this;\n\n      if (this.hasData && !this._cluster2single) {\n        var row_cluster_2_col_single = this.Create2DArray(this.nCluster, this.rawData.col.length);\n        this.correlation.forEach(function (strength_list, r_index) {\n          strength_list.forEach(function (s, c_index) {\n            var strength = _this6.strength_filter(s);\n            row_single_2_col_single[r_index][c_index] += strength;\n          });\n        });\n        this._cluster2single = row_cluster_2_col_single;\n      }\n      return this._cluster2single;\n    }\n  }, {\n    key: 'single2single',\n    get: function get() {\n      var _this7 = this;\n\n      if (this.hasData && !this._single2single) {\n        var _row_single_2_col_single2 = this.Create2DArray(this.rawData.row.length, this.rawData.col.length);\n        this.correlation.forEach(function (strength_list, r_index) {\n          strength_list.forEach(function (s, c_index) {\n            var strength = _this7.strength_filter(s);\n            row_single_2_col_cluster[r_index][_this7.rawData.col[c_index]] += strength;\n          });\n        });\n        this._single2cluster = row_single_2_col_cluster;\n      }\n      return this._cluster2cluster;\n    }\n  }, {\n    key: 'rowClusters',\n    get: function get() {\n      var _this8 = this;\n\n      if (this.hasData && !this._rowClusters) {\n        var rowClusters = (0, _from2.default)({ length: this.labels.length }, function (v, i) {\n          return [];\n        });\n        this.rawData.row.forEach(function (r, i) {\n          rowClusters[r].push(i);\n        });\n        this._rowClusters = new Array(this.labels.length);\n        this.labels.forEach(function (l, i) {\n          return _this8._rowClusters[i] = rowClusters[l];\n        });\n      }\n      return this._rowClusters;\n    }\n  }, {\n    key: 'colClusters',\n    get: function get() {\n      var _this9 = this;\n\n      if (this.hasData && !this._colClusters) {\n        var colClusters = (0, _from2.default)({ length: this.labels.length }, function (v, i) {\n          return [];\n        });\n        this.rawData.col.forEach(function (c, i) {\n          if (colClusters[c] === undefined) {\n            colClusters[c] = [];\n          }\n          colClusters[c].push(i);\n        });\n        this._colClusters = new Array(this.labels.length);\n        this.labels.forEach(function (l, i) {\n          return _this9._colClusters[i] = colClusters[l];\n        });\n      }\n      return this._colClusters;\n    }\n  }], [{\n    key: 'identifier',\n    value: function identifier(processor) {\n      return '' + processor.modelName + processor.stateName + processor.nCluster + (processor.params.layer + 1);\n    }\n  }]);\n  return CoClusterProcessor;\n}();\n\nvar SentenceRecord = exports.SentenceRecord = function () {\n  function SentenceRecord(inputs, modelName) {\n    (0, _classCallCheck3.default)(this, SentenceRecord);\n\n    this.inputs = inputs;\n    this.tokens;\n    this.records;\n    this.modelName = modelName;\n  }\n\n  (0, _createClass3.default)(SentenceRecord, [{\n    key: 'evaluate',\n    value: function evaluate() {\n      var _this10 = this;\n\n      var modelName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.modelName;\n\n      return _dataService2.default.getTextEvaluation(modelName, this.inputs, function (response) {\n        if (response.status === 200) {\n          var data = response.data;\n          _this10.tokens = data.tokens[0];\n          _this10.records = data.records[0];\n        } else {\n          throw response;\n        }\n      });\n    }\n  }, {\n    key: 'getRecords',\n    value: function getRecords(stateName) {\n      var layer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n\n      if (this.records) {\n        layer = layer === -1 ? this.layerNum - 1 : layer;\n        console.log(layer);\n        return this.records.map(function (word) {\n          return word[stateName][layer];\n        });\n      }\n      return undefined;\n    }\n  }, {\n    key: 'states',\n    get: function get() {\n      if (this.records && !this._states) {\n        this._states = (0, _keys2.default)(this.records[0]);\n      }\n      return this._states;\n    }\n  }, {\n    key: 'layerNum',\n    get: function get() {\n      if (this.records && !this._layerNum) {\n        this._layerNum = this.records[0][this.states[0]].length;\n      }\n      return this._layerNum;\n    }\n  }]);\n  return SentenceRecord;\n}();\n\nvar StateStatistics = exports.StateStatistics = function () {\n  function StateStatistics(modelName, stateName) {\n    var layer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : -1;\n    var top_k = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 600;\n    (0, _classCallCheck3.default)(this, StateStatistics);\n\n    this.modelName = modelName;\n    this.stateName = stateName;\n    this.layer = layer;\n    this.top_k = top_k;\n    this.data;\n  }\n\n  (0, _createClass3.default)(StateStatistics, [{\n    key: 'load',\n    value: function load() {\n      var _this11 = this;\n\n      if (this.data) return _promise2.default.resolve(\"Already loaded\");\n      return _dataService2.default.getStateStatistics(this.modelName, this.stateName, this.layer, this.top_k, function (response) {\n        _this11.data = response.data;\n      });\n    }\n  }, {\n    key: 'statOfWord',\n    value: function statOfWord(word) {\n      if (this.data) {\n        var id = this.word2Id[word];\n        return this.wordsData[id];\n      }\n      return undefined;\n    }\n  }, {\n    key: 'stateNum',\n    get: function get() {\n      return this.data ? this.data.mean[0].length : undefined;\n    }\n  }, {\n    key: 'statesData',\n    get: function get() {\n      var _this12 = this;\n\n      if (this.data && !this._statesData) {\n        this._statesData = this.data.mean[0].map(function (_, j) {\n          var data = {\n            words: _this12.data.words,\n\n            mean: _this12.data.mean.map(function (m) {\n              return m[j];\n            }),\n            low1: _this12.data.low1.map(function (m) {\n              return m[j];\n            }),\n            low2: _this12.data.low2.map(function (m) {\n              return m[j];\n            }),\n            high1: _this12.data.high1.map(function (m) {\n              return m[j];\n            }),\n            high2: _this12.data.high2.map(function (m) {\n              return m[j];\n            }),\n            rank: _this12.data.sort_idx.map(function (indices) {\n              return indices.findIndex(function (idx) {\n                return idx === j;\n              });\n            })\n          };\n          return data;\n        });\n      }\n      return this._statesData;\n    }\n  }, {\n    key: 'word2Id',\n    get: function get() {\n      if (this.data && !this._word2Id) {\n        var word2Id = {};\n        this.data.words.forEach(function (word, i) {\n          word2Id[word] = i;\n        });\n        this._word2Id = word2Id;\n      }\n      return this._word2Id;\n    }\n  }, {\n    key: 'wordsData',\n    get: function get() {\n      var _this13 = this;\n\n      if (this.data && !this._wordsData) {\n        this._wordsData = this.data.mean.map(function (mean, i) {\n          var data = {\n            mean: mean,\n            range1: _this13.data.low1[i].map(function (low, j) {\n              return [low, _this13.data.high1[i][j]];\n            }),\n            range2: _this13.data.low2[i].map(function (low, j) {\n              return [low, _this13.data.high2[i][j]];\n            }),\n            word: _this13.data.words[i],\n            sort_idx: _this13.data.sort_idx[i]\n          };\n          return data;\n        });\n      }\n      return this._wordsData;\n    }\n  }]);\n  return StateStatistics;\n}();\n\nfunction memorize(fn) {\n  var cache = {};\n  return function () {\n    var key = arguments.length + Array.prototype.join.call(arguments, \",\");\n    if (key in cache) {\n      return cache[key];\n    } else {\n      return cache[key] = f.apply(this, arguments);\n    }\n  };\n}\n\nexports.default = {\n  CoClusterProcessor: CoClusterProcessor,\n  SentenceRecord: SentenceRecord,\n  StateStatistics: StateStatistics,\n  memorize: memorize\n};\n\n/***/ }),\n\n/***/ 280:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(698)\n\nvar Component = __webpack_require__(12)(\n  /* script */\n  __webpack_require__(312),\n  /* template */\n  __webpack_require__(723),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 282:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 283:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(700)\n\nvar Component = __webpack_require__(12)(\n  /* script */\n  __webpack_require__(309),\n  /* template */\n  __webpack_require__(725),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 307:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.kMeans = exports.distances = undefined;\n\nvar _stringify = __webpack_require__(321);\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _classCallCheck2 = __webpack_require__(25);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(26);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nexports.kmeans = kmeans;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar distances = exports.distances = {\n  euclidean: function euclidean(v1, v2) {\n    var total = 0;\n    for (var i = 0; i < v1.length; i++) {\n      total += Math.pow(v2[i] - v1[i], 2);\n    }\n    return Math.sqrt(total);\n  },\n  manhattan: function manhattan(v1, v2) {\n    var total = 0;\n    for (var i = 0; i < v1.length; i++) {\n      total += Math.abs(v2[i] - v1[i]);\n    }\n    return total;\n  },\n  max: function max(v1, v2) {\n    var max = 0;\n    for (var i = 0; i < v1.length; i++) {\n      max = Math.max(max, Math.abs(v2[i] - v1[i]));\n    }\n    return max;\n  }\n};\n\nfunction mean(points) {\n  var meanPoint = new Float32Array(points[0].length);\n  for (var i = 0; i < meanPoint.length; i++) {\n    var sum = 0;\n    for (var j = 0; j < points.length; j++) {\n      sum += points[j][i];\n    }\n    meanPoint[i] = sum / points.length;\n  }\n  return meanPoint;\n}\n\nvar kMeans = exports.kMeans = function () {\n  function kMeans(centroids) {\n    var distance = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"euclidean\";\n    (0, _classCallCheck3.default)(this, kMeans);\n\n    this.centroids = centroids || [];\n    this.distance = distance;\n    if (typeof this.distance == \"string\") {\n      this.distance = distances[this.distance];\n    }\n  }\n\n  (0, _createClass3.default)(kMeans, [{\n    key: \"randomCentroids\",\n    value: function randomCentroids(points, k) {\n      var centroids = points.slice(0);\n      centroids.sort(function () {\n        return Math.round(Math.random()) - 0.5;\n      });\n      return centroids.slice(0, k);\n    }\n  }, {\n    key: \"classify\",\n    value: function classify(point) {\n      var min = Infinity,\n          index = 0;\n\n      for (var i = 0; i < this.centroids.length; i++) {\n        var dist = this.distance(point, this.centroids[i]);\n        if (dist < min) {\n          min = dist;\n          index = i;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: \"cluster\",\n    value: function cluster(points, k, maxIter, snapshotFn) {\n      var _this = this;\n\n      k = k || Math.max(2, Math.ceil(Math.sqrt(points.length / 2)));\n      maxIter = maxIter || 100;\n      this.centroids = this.randomCentroids(points, k);\n\n      var assignment = new Int32Array(points.length);\n      var clusters = new Array(k);\n\n      var iterations = 0;\n      var movement = true;\n\n      while (movement && iterations < maxIter) {\n        for (var i = 0; i < points.length; i++) {\n          assignment[i] = this.classify(points[i]);\n        }\n\n        movement = false;\n\n        var _loop = function _loop(j) {\n          var assigned = points.filter(function (p, i) {\n            return assignment[i] == j;\n          });\n\n          if (!assigned.length) {\n            return \"continue\";\n          }\n\n          var centroid = _this.centroids[j];\n          var newCentroid = new mean(assigned);\n\n          for (var g = 0; g < centroid.length; g++) {\n            if (newCentroid[g] != centroid[g]) {\n              movement = true;\n            }\n          }\n\n          _this.centroids[j] = newCentroid;\n          clusters[j] = assigned;\n        };\n\n        for (var j = 0; j < k; j++) {\n          var _ret = _loop(j);\n\n          if (_ret === \"continue\") continue;\n        }\n        iterations++;\n        if (snapshotFn) {\n          snapshotFn(clusters, iterations);\n        }\n      }\n      if (iterations >= maxIter) {\n        console.log(\"Clustering algorithm early stopped.\");\n      }\n\n      return assignment;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return (0, _stringify2.default)(this.centroids);\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON() {\n      this.centroids = JSON.parse(json);\n      return this;\n    }\n  }]);\n  return kMeans;\n}();\n\nfunction kmeans(vectors, k) {\n  var maxIter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 100;\n  var distance = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"euclidean\";\n  var snapshotFn = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n\n  return new kMeans(distance).cluster(vectors, k, maxIter, snapshotFn);\n}\n\n/***/ }),\n\n/***/ 308:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _vue = __webpack_require__(10);\n\nvar _vue2 = _interopRequireDefault(_vue);\n\nvar _elementUi = __webpack_require__(281);\n\nvar _elementUi2 = _interopRequireDefault(_elementUi);\n\n__webpack_require__(282);\n\nvar _App = __webpack_require__(283);\n\nvar _App2 = _interopRequireDefault(_App);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_vue2.default.use(_elementUi2.default);\n\nnew _vue2.default({\n  el: '#app',\n\n  render: function render(h) {\n    return h(_App2.default);\n  }\n});\n\n/***/ }),\n\n/***/ 309:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _ModelView = __webpack_require__(716);\n\nvar _ModelView2 = _interopRequireDefault(_ModelView);\n\nvar _MainView = __webpack_require__(714);\n\nvar _MainView2 = _interopRequireDefault(_MainView);\n\nvar _TextView = __webpack_require__(720);\n\nvar _TextView2 = _interopRequireDefault(_TextView);\n\nvar _InfoView = __webpack_require__(713);\n\nvar _InfoView2 = _interopRequireDefault(_InfoView);\n\nvar _InfoBoard = __webpack_require__(280);\n\nvar _InfoBoard2 = _interopRequireDefault(_InfoBoard);\n\nvar _eventBus = __webpack_require__(11);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  name: 'app',\n  components: { ModelView: _ModelView2.default, MainView: _MainView2.default, TextView: _TextView2.default, InfoView: _InfoView2.default, InfoBoard: _InfoBoard2.default },\n  data: function data() {\n    return {\n      height: 800,\n      width: 1000,\n      shared: _eventBus.bus.state\n    };\n  },\n\n  computed: {\n    mainHeight: function mainHeight() {\n      return this.compare ? this.height * 0.6 : this.height * 0.9;\n    },\n    infoHeight: function infoHeight() {\n      return this.height * 0.2;\n    },\n    compare: function compare() {\n      return this.shared.compare;\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.height = window.innerHeight;\n    this.width = window.innerWidth;\n    window.addEventListener(\"resize\", function () {\n      _this.height = window.innerHeight;\n      _this.width = window.innerWidth;\n    });\n  }\n};\n\n/***/ }),\n\n/***/ 310:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _keys = __webpack_require__(33);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _classCallCheck2 = __webpack_require__(25);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(26);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _promise = __webpack_require__(34);\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _d = __webpack_require__(21);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _dataService = __webpack_require__(32);\n\nvar _dataService2 = _interopRequireDefault(_dataService);\n\nvar _eventBus = __webpack_require__(11);\n\nvar _cloud = __webpack_require__(97);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar cell2states = {\n  'GRU': ['state'],\n  'BasicLSTM': ['state_c', 'state_h'],\n  'BasicRNN': ['state']\n};\n\nexports.default = {\n  name: 'ArcView',\n  data: function data() {\n    return {\n      states: '',\n      fdGraph: null,\n      selectedState: '',\n      model: '',\n      wordNum: 200,\n      clusterNum: 5,\n      cluster_data: {},\n      state_data: null,\n      word_data: null,\n      cluster_mode: 'positive'\n    };\n  },\n\n  props: {\n    width: {\n      type: Number,\n      default: 800\n    },\n    height: {\n      type: Number,\n      default: 600\n    }\n  },\n  watch: {\n    width: function width(newWidth) {\n      this.fdGraph.update_scale();\n    },\n    height: function height(newHeight) {\n      this.fdGraph.update_scale();\n    },\n    selectedState: function selectedState(newState) {\n      var _this = this;\n\n      if (newState === 'state' || newState === 'state_c' || newState === 'state_h') {\n        if (this.word_data === null || this.state_data === null) {\n          var ps = this.loadStateWordData();\n          var p = this.loadClusterData();\n          ps.push(p);\n          _promise2.default.all(ps).then(function (values) {\n            _this.reset();\n          });\n        }\n      }\n    },\n    wordNum: function wordNum(newWordNum) {\n      console.log('wordNum has changed');\n    },\n\n    clusterNum: function clusterNum(newClusterNum) {\n      var _this2 = this;\n\n      if (newClusterNum > 1) {\n        this.loadClusterData().then(function (values) {\n          _this2.reset();\n        });\n      }\n    }\n  },\n  computed: {\n    svgId: function svgId() {\n      return this.paneId(this.model, this.selectedState);\n    }\n  },\n  methods: {\n    paneId: function paneId(model, state) {\n      return 'arc-' + model + '-' + state + '-svg';\n    },\n    loadStateWordData: function loadStateWordData() {\n      var _this3 = this;\n\n      var p1 = _dataService2.default.getProjectionData(this.model, this.selectedState, {}, function (response) {\n        _this3.state_data = response.data;\n        console.log('state data loaded');\n      });\n      var p2 = _dataService2.default.getStrengthData(this.model, this.selectedState, { top_k: this.wordNum }, function (response) {\n        _this3.word_data = response.data;\n        console.log('word data loaded');\n      });\n      return [p1, p2];\n    },\n    loadClusterData: function loadClusterData() {\n      var _this4 = this;\n\n      return _eventBus.bus.loadCoCluster(this.model, this.selectedState, this.clusterNum, { top_k: this.wordNum, mode: this.cluster_mode }).then(function () {\n        _this4.cluster_data = _eventBus.bus.getCoCluster(_this4.model, _this4.selectedState, _this4.clusterNum, { top_k: _this4.wordNum, mode: _this4.cluster_mode });\n        console.log('co_cluster_data ' + _this4.clusterNum + ' loaded');\n      });\n    },\n    reset: function reset() {\n      if (this.fdGraph) {\n        this.fdGraph.destroy();\n      }\n      var svg = document.getElementById(this.paneId(this.model, this.selectedState));\n      this.fdGraph = new ForceDirectedGraph(svg);\n      this.fdGraph.process_data(this.state_data, this.word_data, this.cluster_data, this.cluster_mode);\n      this.fdGraph.insert_element();\n      this.fdGraph.start_simulation();\n    }\n  },\n  mounted: function mounted() {\n    var _this5 = this;\n\n    _eventBus.bus.$on(_eventBus.SELECT_MODEL, function (modelName, compare) {\n      if (compare) return;\n      console.log('Selected model in ArcView: ' + modelName);\n      _this5.model = modelName;\n      _eventBus.bus.loadModelConfig(modelName).then(function () {\n        _this5.states = _eventBus.bus.availableStates(modelName);\n      });\n    });\n  }\n};\n\nvar ForceDirectedGraph = function () {\n  function ForceDirectedGraph(svg, strengthfn) {\n    (0, _classCallCheck3.default)(this, ForceDirectedGraph);\n\n    var self = this;\n    this.svg = d3.select('#' + svg.id);\n    this.width = svg.clientWidth;\n    this.height = svg.clientHeight;\n    this.arcNodes = null;\n    this.innerNodes = null;\n    this.links = null;\n    this.word_clouds = [];\n    this.simulation = null;\n    this.strengthfn = strengthfn || function (v) {\n      return v;\n    };\n    this.graph = null;\n    this.rScale = 0.1;\n    this.radius = 1.5;\n    this.defaultAlpha = 0.3;\n    this.scale = {\n      x: null,\n      y: null\n    };\n    this.color = d3.scaleOrdinal(d3.schemeCategory20);\n    this.strength_threshold = 0.5;\n    this.normal_opacity_line = 0.1;\n    this.high_opacity_line = 0.1;\n    this.low_opacity_line = 0.01;\n    this.normal_opacity_node = 0.5;\n    this.high_opacity_node = 1;\n    this.low_opacity_node = 0.01;\n    this.strength_range = [0.1, 5];\n    this.arc_radius = 0.9 * Math.min(self.width / 2, self.height / 2);\n    this.cluster_data = [];\n    this.g_links = null;\n  }\n\n  (0, _createClass3.default)(ForceDirectedGraph, [{\n    key: 'process_data',\n    value: function process_data(arc_data, inner_data, cluster_data, cluster_mode) {\n      var self = this;\n      var label2arc = [];\n      var label2inner = [];\n      var circle_radius = 0.9 * Math.min(self.width / 2, self.height / 2);\n      this.cluster_data = cluster_data;\n\n      label2arc = cluster_data.colClusters.map(function (cluster, i) {\n        return { data: cluster.map(function (col) {\n            return { index: col, label: i };\n          }) };\n      });\n      label2inner = cluster_data.rowClusters.map(function (cluster, i) {\n        return { data: cluster.map(function (row) {\n            return { index: row, label: i, word: cluster_data.words[row] };\n          }) };\n      });\n\n      var links = [];\n      console.log(cluster_data);\n      (0, _keys2.default)(label2inner).forEach(function (inner_k) {\n        label2inner[inner_k]['type'] = 'inner';\n        (0, _keys2.default)(label2arc).forEach(function (arc_k) {\n          label2arc[arc_k]['type'] = 'arc';\n\n          var cluster_strength = 0;\n          label2inner[inner_k]['data'].forEach(function (inner_item) {\n            label2arc[arc_k]['data'].forEach(function (arc_item) {\n              var strength_item = cluster_data.correlation[inner_item.index][arc_item.index];\n              switch (cluster_mode) {\n                case 'positive':\n                  cluster_strength += strength_item > 0 ? strength_item : 0;\n                  break;\n                case 'negative':\n                  cluster_strength += strength_item < 0 ? Math.abs(strength_item) : 0;\n                  break;\n                case 'abs':\n                  cluster_strength += Math.abs(strength_item);\n                  break;\n                case 'raw':\n                  cluster_strength += strength_item;\n                  break;\n              }\n            });\n          });\n          var link = {\n            source: label2arc[arc_k],\n            target: label2inner[inner_k],\n            strength: cluster_strength\n          };\n          links.push(link);\n        });\n      });\n\n      links = self.strength_normalize(links, self.strength_range);\n\n      console.log(\"finished preparing data\");\n      this.graph = {\n        links: links,\n        label2arc: label2arc,\n        label2inner: label2inner,\n        arc_data: arc_data,\n        inner_data: inner_data,\n        nodes: label2arc.concat(label2inner)\n      };\n    }\n  }, {\n    key: 'strength_normalize',\n    value: function strength_normalize(links, range) {\n      var strength_extent = d3.extent(links.map(function (l) {\n        return l.strength;\n      }));\n      console.log(strength_extent);\n\n      var scale = d3.scaleLinear().domain(strength_extent).range(range);\n      links.forEach(function (l) {\n        l.strength = scale(l.strength);\n      });\n      return links;\n    }\n  }, {\n    key: 'draw_states',\n    value: function draw_states() {\n      var self = this;\n      var width = this.width,\n          height = this.height;\n      var radius = 0.9 * Math.min(width / 2, height / 2);\n      this.svg.append('g').selectAll('circle').data(this.graph.states).enter().append('circle').attr('r', 3).attr('cx', function (d) {\n        return width / 2 + radius * Math.cos(d.angle);\n      }).attr('cy', function (d) {\n        return height / 2 + radius * Math.sin(d.angle);\n      }).style('fill', function (d) {\n        return self.color(d.label);\n      });\n    }\n  }, {\n    key: 'insert_element',\n    value: function insert_element() {\n      var _this6 = this;\n\n      var self = this;\n\n      var g_arc = self.svg.append('g').attr('transform', 'translate(' + self.width / 2 + ',' + self.height / 2 + ')');\n\n      var arc = d3.arc().innerRadius(self.arc_radius - 10).outerRadius(self.arc_radius);\n\n      var arc_data = d3.pie()(self.graph.label2arc.map(function (d) {\n        return d.data.length;\n      }));\n\n      self.graph.label2arc.forEach(function (d, i) {\n        g_arc.append('path').datum(arc_data[i]).style('fill', self.color(i)).attr('d', arc);\n        var arc_centroid = arc.centroid(arc_data[i]);\n        d.fx = arc_centroid[0] + self.width / 2;\n        d.fy = arc_centroid[1] + self.height / 2;\n      });\n\n      var words_list = [];\n      self.graph.label2inner.forEach(function (d) {\n        var words = d.data.map(function (w) {\n          return { text: w.word, size: (300 - w.index) / 15 };\n        });\n        var radius = Math.sqrt(words.length) * 10 + 1;\n        console.log(words);\n        d['el_wc'] = _this6.svg.append('g');\n        var myWordCloud = new _cloud.WordCloud(d['el_wc'], radius);\n        myWordCloud.update(words);\n        self.word_clouds.push(d['el_wc']);\n      });\n    }\n  }, {\n    key: 'start_simulation',\n    value: function start_simulation() {\n      var self = this;\n      var repelForce = d3.forceCollide(20).radius(function (d) {\n        return Math.sqrt(d.data.length) * 10 + 10;\n      });\n      var init = repelForce.initialize;\n      repelForce.initialize = function (nodes) {\n        init(nodes.filter(function (d) {\n          return d.type === 'inner';\n        }));\n      };\n      this.simulation = d3.forceSimulation().alpha(this.defaultAlpha).force('link', d3.forceLink().distance(function (d) {\n        return d.strength > 0 ? 50 / d.strength : 300;\n      }).strength(function (d) {\n        return 1;\n      })).force('repel', repelForce);\n      this.simulation.nodes(self.graph.nodes).on('tick', function () {\n        return self.ticked();\n      });\n\n      this.simulation.force('link').links(self.graph.links);\n    }\n  }, {\n    key: 'ticked',\n    value: function ticked() {\n      var self = this;\n\n\n      self.graph.label2inner.forEach(function (d) {\n        d['el_wc'].attr('transform', 'translate(' + d.x + ',' + d.y + ')');\n      });\n\n      var line = d3.line().curve(d3.curveBundle.beta(1)).x(function (d) {\n        return d.x;\n      }).y(function (d) {\n        return d.y;\n      });\n\n      var line_data = [];\n      var data_center = [];\n      self.graph.label2arc.forEach(function (d, i) {\n        self.graph.label2inner.forEach(function (w) {\n          if (data_center[i] === undefined) {\n            data_center[i] = { x: 0, y: 0 };\n          }\n          data_center[i].x = data_center[i].x + w.x / self.graph.label2inner.length;\n          data_center[i].y = data_center[i].y + w.y / self.graph.label2inner.length;\n        });\n      });\n\n      self.graph.label2arc.forEach(function (d, i) {\n        self.graph.label2inner.forEach(function (w) {\n          line_data.push([d, data_center[i], w]);\n        });\n      });\n\n      if (self.g_links) {\n        self.g_links.remove();\n      }\n      self.g_links = this.svg.append('g');\n      self.g_links.selectAll('path').data(line_data).enter().append('path').attr('class', 'links').attr('d', line).attr('stroke', self.color(0));\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      console.log('Destroying Graph');\n      this.simulation.nodes([]);\n      this.simulation.force(\"link\").links([]);\n\n      this.g_links.remove();\n\n      this.word_clouds.forEach(function (d) {\n        d.remove();\n      });\n    }\n  }]);\n  return ForceDirectedGraph;\n}();\n\n;\n\n/***/ }),\n\n/***/ 311:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _set = __webpack_require__(72);\n\nvar _set2 = _interopRequireDefault(_set);\n\nvar _toConsumableArray2 = __webpack_require__(73);\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _promise = __webpack_require__(34);\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _keys = __webpack_require__(33);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _classCallCheck2 = __webpack_require__(25);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(26);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _d = __webpack_require__(21);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _eventBus = __webpack_require__(11);\n\nvar _cloud = __webpack_require__(97);\n\nvar _sentence = __webpack_require__(166);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar colorHex = ['#33a02c', '#1f78b4', '#b15928', '#fb9a99', '#e31a1c', '#6a3d9a', '#ff7f00', '#cab2d6', '#ffff99', '#a6cee3', '#b2df8a', '#fdbf6f'];\nvar colorScheme = function colorScheme(i) {\n  return colorHex[i];\n};\nvar positiveColor = '#ff5b09';\nvar negativeColor = '#09adff';\n\nvar LayoutParamsConstructor = function () {\n  function LayoutParamsConstructor() {\n    var width = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 800;\n    var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 800;\n    (0, _classCallCheck3.default)(this, LayoutParamsConstructor);\n\n    this.unitWidthRatio = 1.0;\n    this.unitMarginRatio = 0.5;\n    this.clusterMarginRatio = 0.7;\n    this.wordCloudArcDegree = 110;\n    this.wordCloudHightlightRatio = 1.5;\n    this.wordCloudPaddingLength = 5;\n    this.wordCloudChord2ClusterDistance = 50;\n    this.wordCloudChordLength2ClientHeightRatio = 0.8;\n    this.wordCloudChord2stateClusterHeightRatio = 1.1;\n    this.wordCloudWidth2HeightRatio = 1 / 0.5;\n    this.littleTriangleWidth = 5;\n    this.littleTriangleHeight = 5;\n    this.strengthThresholdPercent = [0.2, 1];\n    this.wordSize2StrengthRatio = 3;\n\n    this.dxShrinkFactor = 0.04;\n    this.spacePerSentence = 2 / 20;\n    this.sentenceNodeWidth = 100;\n    this.sentenceInitTranslate = [50, 10];\n\n    this.middleLineY = 50;\n\n    this.brushTranslationX = -100;\n    this.sentenceWordThreshold = 0.5;\n    this.posColor = colorScheme;\n    this.middleLineOffset = 0;\n    this.width = width;\n    this.height = height;\n    this.sentenceBrushRectWidth = 10;\n    this.mode = 'width';\n  }\n\n  (0, _createClass3.default)(LayoutParamsConstructor, [{\n    key: 'updateWidth',\n    value: function updateWidth(width) {\n      if (typeof width === 'number') this.width = Math.min(Math.max(500, width), 1400);\n    }\n  }, {\n    key: 'updateHeight',\n    value: function updateHeight(height) {\n      if (typeof height === 'number') this.height = Math.min(Math.max(200, height), 1000);\n    }\n  }, {\n    key: 'computeUnitParams',\n    value: function computeUnitParams() {}\n  }, {\n    key: 'computeParams',\n    value: function computeParams(clusterNum, clusterInterval2HeightRatio, clusterSizes) {\n      var _this = this;\n\n      var callTime = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n\n      if (callTime > 10) return;\n      var maxClusterSize = clusterSizes.reduce(function (a, b) {\n        return Math.max(a, b);\n      }, 0);\n      var totalClusterSize = clusterSizes.reduce(function (a, b) {\n        return a + b;\n      }, 0);\n\n      this._unitHeight = 3 + this.width / totalClusterSize / 3;\n      this.wordCloudChordLength = this.height * this.wordCloudChordLength2ClientHeightRatio;\n      this.clusterHeight = this.wordCloudChordLength / (clusterNum + clusterNum * clusterInterval2HeightRatio - clusterInterval2HeightRatio);\n      this.packNum = ~~((this.clusterHeight / this.unitHeight + this.unitMarginRatio - 2 * this.clusterMarginRatio) / (1 + this.unitMarginRatio));\n      this.clusterHeight = this.unitHeight * this.cluster2UnitRatio;\n      this.clusterInterval = this.clusterHeight * clusterInterval2HeightRatio;\n\n      if (this.middleLineY < 0) {\n        this.computeParams(clusterNum, clusterInterval2HeightRatio - 0.2, clusterSizes, callTime + 1);\n      }\n      var maxClusterWidth = Math.ceil(maxClusterSize / this.packNum) * (this.unitWidth + this.unitMargin);\n      if (maxClusterWidth < 0.8 * this.maxClusterWidth) {\n        clusterInterval2HeightRatio += 0.2;\n        this.computeParams(clusterNum, clusterInterval2HeightRatio, clusterSizes, callTime + 1);\n      }\n      if (maxClusterWidth > this.maxClusterWidth) {\n        clusterInterval2HeightRatio -= 0.2;\n        this.computeParams(clusterNum, clusterInterval2HeightRatio, clusterSizes, callTime + 1);\n      }\n      if (callTime > 0) return;\n      if (this.mode === 'height') this.middleLineY = (this.height - this.clusterHeight * clusterNum - this.clusterInterval * (clusterNum - 1)) / 2;else {\n        this.widthPackNum = ~~(this.width / 5.5 / (this.unitWidth + this.unitMargin));\n        this.clusterWidth = this.widthPackNum * (this.unitWidth + this.unitMargin) - this.unitMargin + 2 * this.clusterMargin;\n        var heightSum = 0;\n        var heights = clusterSizes.forEach(function (size, i) {\n\n          var pack = Math.ceil(size / _this.widthPackNum);\n          heightSum += pack * (_this.unitHeight + _this.unitMargin) - _this.unitMargin + 2 * _this.clusterMargin;\n        });\n\n        this.clusterInterval = Math.floor((this.height - heightSum) / (clusterNum + 2));\n\n        this.middleLineY = (this.height - heightSum - clusterNum * this.clusterInterval) / 2;\n      }\n    }\n  }, {\n    key: 'wordCloudWidth',\n    get: function get() {\n      return this.width * 0.18;\n    }\n  }, {\n    key: 'unitHeight',\n    get: function get() {\n      return this._unitHeight ? this._unitHeight : Math.max(3, Math.min(~~((this.width - 500) / 500) + 4, 7));\n    }\n  }, {\n    key: 'unitWidth',\n    get: function get() {\n      return this.unitHeight * this.unitWidthRatio;\n    }\n  }, {\n    key: 'unitMargin',\n    get: function get() {\n      return this.unitHeight * this.unitMarginRatio;\n    }\n  }, {\n    key: 'clusterMargin',\n    get: function get() {\n      return this.unitHeight * this.clusterMarginRatio;\n    }\n  }, {\n    key: 'maxClusterWidth',\n    get: function get() {\n      return Math.min(this.width / 3.5, 400);\n    }\n  }, {\n    key: 'middleLineX',\n    get: function get() {\n      return this.width * 0.25 + this.middleLineOffset;\n    }\n  }, {\n    key: 'cluster2UnitRatio',\n    get: function get() {\n      return this.packNum + (this.packNum - 1) * this.unitMarginRatio + 2 * this.clusterMarginRatio;\n    }\n  }]);\n  return LayoutParamsConstructor;\n}();\n\nvar pos2tag = {\n  \"VERB\": 0,\n  \"NOUN\": 1,\n  \"PRON\": 2,\n  \"ADJ\": 3,\n  \"ADV\": 4,\n  \"ADP\": 5,\n  \"CONJ\": 6,\n  \"DET\": 7,\n  \"NUM\": 8,\n  \"PRT\": 9,\n  \"X\": 10,\n  \".\": 11\n};\n\nvar labelParams = {\n  colorScheme: colorScheme,\n  radius: 4,\n  fontSize: 11,\n  interval: 8\n};\n\nexports.default = {\n  name: 'ClusterView',\n  data: function data() {\n    return {\n      params: new LayoutParamsConstructor(this.width, this.height),\n\n      clusterData: null,\n\n      painter: null,\n\n      shared: _eventBus.bus.state,\n\n      changingFlag: false,\n      posLabel: null,\n      rootGroup: null\n    };\n  },\n\n  props: {\n    compare: {\n      type: Boolean,\n      defautl: false\n    },\n    width: {\n      type: Number,\n      default: 800\n    },\n    height: {\n      type: Number,\n      default: 800\n    }\n  },\n  computed: {\n    svgId: function svgId() {\n      return this.compare ? 'cluster-svg2' : 'cluster-svg';\n    },\n    selectedState: function selectedState() {\n      return this.compare ? this.shared.selectedState2 : this.shared.selectedState;\n    },\n    selectedModel: function selectedModel() {\n      return this.compare ? this.shared.selectedModel2 : this.shared.selectedModel;\n    },\n    selectedLayer: function selectedLayer() {\n      return this.compare ? this.shared.selectedLayer2 : this.shared.selectedLayer;\n    },\n    layout: function layout() {\n      return this.compare ? this.shared.layout2 : this.shared.layout;\n    },\n    clusterNum: function clusterNum() {\n      return this.layout.clusterNum;\n    },\n    strokeControlStrength: function strokeControlStrength() {\n      return this.layout.strokeControlStrength;\n    },\n    linkFilterThreshold: function linkFilterThreshold() {\n      return this.layout.linkFilterThreshold;\n    },\n    stateClip: function stateClip() {\n      return this.layout.stateClip;\n    },\n    selectedWords: function selectedWords() {\n      return this.compare ? this.shared.selectedWords2 : this.shared.selectedWords;\n    },\n    selectedUnits: function selectedUnits() {\n      return this.compare ? this.shared.selectedUnits2 : this.shared.selectedUnits;\n    },\n    renderPos: function renderPos() {\n      return this.compare ? this.shared.renderPos2 : this.shared.renderPos;\n    },\n    mode: function mode() {\n      return this.layout.mode;\n    }\n  },\n  watch: {\n    selectedState: function selectedState(state) {\n      console.log(this.svgId + ' > state changed to ' + this.selectedState);\n      this.maybeReload();\n    },\n    selectedLayer: function selectedLayer(layer) {\n      console.log(this.svgId + ' > layer changed to ' + this.selectedLayer);\n      this.maybeReload();\n    },\n    strokeControlStrength: function strokeControlStrength(_strokeControlStrength) {\n      this.changeStroke(this.strokeControlStrength, this.linkFilterThreshold);\n    },\n    linkFilterThreshold: function linkFilterThreshold(_linkFilterThreshold) {\n      this.changeStroke(this.strokeControlStrength, this.linkFilterThreshold);\n    },\n    clusterNum: function clusterNum(_clusterNum) {\n      console.log(this.svgId + ' > layout changed. clusterNum: ' + this.layout.clusterNum);\n      this.maybeReload();\n    },\n    stateClip: function stateClip(newStateClip) {\n      console.log('state clip changed');\n      this.painter.changeStateClip(newStateClip);\n    },\n    mode: function mode(newMode) {\n      this.params.mode = newMode;\n      this.maybeReload();\n    },\n    selectedModel: function selectedModel(newModel, oldModel) {\n      console.log(this.svgId + ' > model changed to ' + this.selectedModel);\n      this.maybeReload();\n    },\n    selectedWords: function selectedWords(words) {\n      var _this2 = this;\n\n      if (words.length === 0) {\n        this.painter.render_state([]);\n        return;\n      }\n\n      var model = this.selectedModel,\n          state = this.selectedState,\n          layer = this.selectedLayer;\n      var p = _eventBus.bus.loadStatistics(model, state, layer).then(function () {\n        var statistics = _eventBus.bus.getStatistics(model, state, layer);\n        var wordsStatistics = statistics.statOfWord(_this2.selectedWords[_this2.selectedWords.length - 1].text).mean;\n\n        _this2.painter.render_state(wordsStatistics);\n      });\n    },\n    renderPos: function renderPos(_renderPos) {\n      var _this3 = this;\n\n      var data = {};\n      if (_renderPos) {\n        _eventBus.bus.loadPosStatistics(this.selectedModel, undefined, function (response) {\n          if (response.status === 200) {\n            var posStatistics = response.data;\n            posStatistics.forEach(function (word, i) {\n              var posRatio = (0, _keys2.default)(word.ratio).map(function (key, i) {\n                return { index: i, pos: key, value: word.ratio[key] };\n              });\n              posRatio.sort(function (a, b) {\n                return b.value - a.value;\n              });\n              data[word.word] = pos2tag[posRatio[0].pos];\n            });\n\n            _this3.posLabel.draw(pos2tag).transform('translate(' + [_this3.width - 40, 10] + ')');\n          }\n          _this3.painter.renderWord(data);\n        });\n      } else {\n        this.painter.renderWord(data);\n        this.posLabel.clean();\n      }\n    },\n    width: function width(newWidth, oldWidth) {\n      this.params.updateWidth(newWidth);\n      this.maybeReload();\n    },\n    height: function height(newHeight) {\n      this.params.updateHeight(newHeight);\n      this.maybeReload();\n    }\n  },\n  methods: {\n    checkLegality: function checkLegality() {\n      var state = this.selectedState;\n\n      return (state === 'state' || state === 'state_c' || state === 'state_h') && typeof this.selectedLayer === 'number' && this.layout && this.painter && typeof this.width === 'number' && typeof this.height === 'number';\n    },\n    maybeReload: function maybeReload() {\n      var _this4 = this;\n\n      if (!this.changingFlag) {\n        this.changingFlag = true;\n        if (this.checkLegality()) {\n          console.log(this.svgId + ' > reloading...');\n          this.reload(this.selectedModel, this.selectedState, this.selectedLayer, this.clusterNum).then(function () {\n            _this4.changingFlag = false;\n          });\n        } else {\n          this.changingFlag = false;\n        }\n      }\n    },\n    init: function init() {\n      this.params.updateWidth(this.width);\n      this.rootGroup = d3.select('#' + this.svgId).append('g');\n      this.painter = new Painter(this.rootGroup, this.params, this.compare);\n      this.posLabel = new PosLabel(this.rootGroup.append('g'), labelParams, this.compare);\n    },\n    reload: function reload(model, state, layer, clusterNum) {\n      var _this5 = this;\n\n      var params = {\n        top_k: 300,\n        mode: 'raw',\n        layer: layer\n      };\n      if (this.renderPos) {\n        this.posLabel.clean();\n        this.posLabel.draw(pos2tag).transform('translate(' + [this.width - 40, 10] + ')');\n      }\n      return _eventBus.bus.loadCoCluster(model, state, clusterNum, params).then(function () {\n        _this5.clusterData = _eventBus.bus.getCoCluster(model, state, clusterNum, params);\n        console.log(_this5.clusterData.colClusters.length);\n        _this5.rootGroup.attr('transform', _this5.compare ? 'scale(-1,1)translate(' + [-_this5.width, 0] + ')' : '');\n        _this5.painter.destroy();\n        _this5.painter.draw(_this5.clusterData);\n      });\n    },\n    changeStroke: function changeStroke(controlStrength, linkFilterThreshold) {\n      this.painter.refreshStroke(controlStrength, linkFilterThreshold);\n    }\n  },\n  mounted: function mounted() {\n    var _this6 = this;\n\n    this.init();\n\n    _eventBus.bus.$on(_eventBus.EVALUATE_SENTENCE, function (value, compare) {\n      if (compare !== _this6.compare) return;\n      var record = _eventBus.bus.evalSentence(value, _this6.selectedModel);\n      var p2 = record.evaluate();\n      _promise2.default.all([p2]).then(function (values) {\n        var sentenceRecord = record.getRecords(_this6.selectedState, -1);\n\n        _this6.painter.addSentence(value, record, sentenceRecord);\n      });\n    });\n\n    _eventBus.bus.$on(_eventBus.CLOSE_SENTENCE, function (sentence, compare) {\n      if (compare !== _this6.compare) return;\n      _this6.painter.deleteSentence(sentence);\n    });\n\n    _eventBus.bus.$on(_eventBus.SELECT_COLOR, function (newColor) {\n      console.log('color has changed to ' + newColor);\n      d3.select('#' + _this6.svgId).selectAll('.link.positive').style('stroke', newColor[1]);\n      d3.select('#' + _this6.svgId).selectAll('.link.negative').style('stroke', newColor[0]);\n    });\n  }\n};\n\nvar PosLabel = function () {\n  function PosLabel(selector, params) {\n    var compare = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : False;\n    (0, _classCallCheck3.default)(this, PosLabel);\n\n    this.g = selector;\n    this.params = params;\n    this.compare = compare;\n  }\n\n  (0, _createClass3.default)(PosLabel, [{\n    key: 'draw',\n    value: function draw(tags) {\n      var params = this.params;\n      var color = params.colorScheme;\n      var fontSize = params.fontSize;\n      var radius = params.radius;\n      var interval = params.interval;\n      var labels = [];\n      (0, _keys2.default)(tags).forEach(function (key) {\n        labels[tags[key]] = key;\n      });\n      var gs = this.g.selectAll('g').data(labels).enter().append('g');\n      gs.append('circle').attr('cx', 0).attr('cy', function (d, i) {\n        return i * (interval + 2 * radius);\n      }).attr('r', radius).style('fill', function (d, i) {\n        return color(i);\n      });\n      gs.append('text').attr('x', radius * 2).attr('y', function (d, i) {\n        return i * (interval + 2 * radius) + fontSize / 2;\n      }).attr('text-anchor', 'start').style('font-size', fontSize).text(function (d) {\n        return d;\n      });\n      return this;\n    }\n  }, {\n    key: 'transform',\n    value: function transform(transStr) {\n      if (this.compare) transStr = transStr + 'scale(-1, 1)';\n      this.g.attr('transform', transStr);\n      return this;\n    }\n  }, {\n    key: 'clean',\n    value: function clean() {\n      this.g.selectAll('g').remove();\n    }\n  }]);\n  return PosLabel;\n}();\n\nvar Painter = function () {\n  function Painter(selector, params) {\n    var compare = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    (0, _classCallCheck3.default)(this, Painter);\n\n    this.svg = selector;\n    this.params = params;\n\n    this.topGroupClass = 'topGroup';\n    this.topg = this.svg.append('g').attr('class', this.topGroupClass);\n    this.hg = this.topg.append('g');\n    this.wg = this.topg.append('g');\n    this.sentenceWordThreshold = params.sentenceWordThreshold;\n    this.strengthThresholdPercent = params.strengthThresholdPercent;\n\n    this.dx = 0, this.dy = 0;\n    this.graph = null;\n    this.clusterSelected = [];\n\n    this.state_elements = [];\n    this.loc = null;\n    this.wordClouds = [];\n\n    this.unitNormalColor = '#ff5b09';\n    this.unitRangeColor = ['#09adff', '#ff5b09'];\n    this.linkWidthRange = [1, 5];\n    this.linkColor = ['#09adff', '#ff5b09'];\n    this.compare = compare;\n    this.stateTranslateHis = [];\n    this.sentenceTranslateHis = [this.params.sentenceInitTranslate[0]];\n    this.sentences = [];\n    this.stateClip = 2;\n\n    this.strokeWidth = function (t) {\n      return Math.abs(t) * 8;\n    };\n    this.sentenceStrokeWidth = function (t) {\n      return Math.abs(t) * 24;\n    };\n    this.colorLegendAxis = null;\n  }\n\n  (0, _createClass3.default)(Painter, [{\n    key: 'transform',\n    value: function transform(trans) {\n      this.svg.attr('transform', trans);\n    }\n  }, {\n    key: 'refreshStroke',\n    value: function refreshStroke(controlStrength, linkFilterThreshold) {\n      var _this7 = this;\n\n      this.strokeWidth = function (t) {\n        return Math.abs(t) * controlStrength;\n      };\n      this.sentenceStrokeWidth = function (t) {\n        return Math.abs(t) * controlStrength / 3;\n      };\n      this.strengthThresholdPercent = linkFilterThreshold;\n      if (this.graph) {\n        this.draw_link(this.hg, this.graph);\n\n        this.graph.sentence_info.forEach(function (si) {\n          var strength_extent = d3.extent(_this7.flatten(si.links).map(function (l) {\n            return l.strength;\n          }));\n          var max_strength = Math.max(Math.abs(strength_extent[0]), Math.abs(strength_extent[1]));\n          var strength_bound = _this7.strengthThresholdPercent.map(function (t) {\n            return t * max_strength;\n          });\n          si.links.forEach(function (ls) {\n            ls.forEach(function (l) {\n              l['el'].attr('display', Math.abs(l.strength) < strength_bound[0] || Math.abs(l.strength) > strength_bound[1] ? 'none' : '').attr('stroke-width', _this7.sentenceStrokeWidth(l.strength));\n            });\n          });\n        });\n      }\n    }\n  }, {\n    key: 'changeStateClip',\n    value: function changeStateClip(clip) {\n      if (!this.graph) {\n        return;\n      }\n      this.stateClip = clip;\n      var scale = d3.scaleLinear().domain([-this.stateClip, 0, this.stateClip]).range([1, 0, 1]);\n      if (d3.select(this.graph.state_info.state_info[0]['el']).property('colored')) {\n        this.graph.state_info.state_info.forEach(function (s, i) {\n          var tmp_s = d3.select(s['el']);\n          tmp_s.transition().attr('fill', tmp_s.property('strength') > 0 ? positiveColor : negativeColor).attr('fill-opacity', scale(Math.abs(tmp_s.property('strength'))));\n        });\n        this.axisScale.domain([-this.stateClip, this.stateClip]);\n        this.colorLegendAxis = d3.axisBottom().tickValues([parseInt(-this.stateClip), 0, parseInt(this.stateClip)]).tickFormat(d3.format('.' + d3.precisionFixed(1) + 'f')).scale(this.axisScale);\n\n        this.hg.select('#color-legend').select('g').call(this.colorLegendAxis);\n      }\n    }\n  }, {\n    key: 'deleteSentence',\n    value: function deleteSentence(value) {\n      var _this8 = this;\n\n      var sentence_to_add = this.sentences.filter(function (s) {\n        return s !== value;\n      });\n      this.sentences = [];\n      this.translateX(-d3.sum(this.stateTranslateHis));\n      this.adjustdx(this.stateClusterWordCloudDX);\n      this.stateTranslateHis = [];\n      this.sentenceTranslateHis = [this.params.sentenceInitTranslate[0]];\n\n      var tmpSentenceInfo = {};\n      this.graph.sentence_info.forEach(function (s) {\n        tmpSentenceInfo[s.value] = s;\n        s['group'].remove();\n      });\n      this.graph.sentence_info = [];\n      sentence_to_add.forEach(function (s) {\n        _this8.addSentence(s, tmpSentenceInfo[s].record, tmpSentenceInfo[s].sentenceRecord);\n      });\n    }\n  }, {\n    key: 'deleteAllSentences',\n    value: function deleteAllSentences() {\n      this.sentences = [];\n      this.translateX(-d3.sum(this.stateTranslateHis));\n      this.adjustdx(this.stateClusterWordCloudDX);\n      this.stateTranslateHis = [];\n      this.sentenceTranslateHis = [this.params.sentenceInitTranslate[0]];\n\n      var tmpSentenceInfo = {};\n      this.graph.sentence_info.forEach(function (s) {\n        tmpSentenceInfo[s.value] = s;\n        s['group'].remove();\n      });\n      this.graph.sentence_info = [];\n    }\n  }, {\n    key: 'addSentence',\n    value: function addSentence(value, record, sentenceRecord) {\n      var _this9 = this;\n\n      var self = this;\n      var needTranslate = (this.params.spacePerSentence + this.params.dxShrinkFactor) * this.client_width;\n      var translationForEachSentence = needTranslate;\n      var translationForState = needTranslate * 0.5;\n      var sentenceInitTranslate = this.params.sentenceInitTranslate;\n      this.stateTranslateHis.push(translationForState);\n      if (this.sentences.length) {\n        this.sentenceTranslateHis.push(translationForEachSentence);\n      }\n\n      var sg = this.svg.append('g').attr('transform', 'translate(' + sentenceInitTranslate[0] + ', ' + sentenceInitTranslate[1] + ')');\n      this.sentences.push(value);\n      var spg = sg.append('g');\n      var sentenceTranslate = [50, 10];\n      this.translateX(d3.sum(this.stateTranslateHis));\n      this.adjustdx(this.stateClusterWordCloudDX);\n\n      this.graph.sentence_info.forEach(function (s, k) {\n        s.group.transition().attr('transform', 'translate(' + [d3.sum(_this9.sentenceTranslateHis), sentenceInitTranslate[1]] + ')');\n      });\n\n      var rectGroup = sg.append('g').attr('transform', 'translate(' + [-this.params.sentenceNodeWidth / 2, this.client_height / 4] + ')');\n      this.drawBrushRect(rectGroup, sentenceRecord.length, updateSentence);\n\n      var sent = (0, _sentence.sentence)(spg, this.compare).size([this.params.sentenceNodeWidth, this.params.sentenceNodeWidth * sentenceRecord.length]).sentence(sentenceRecord).coCluster(this.graph.coCluster).words(record.tokens).mouseoverCallback(highlightSentenceLinkByNodeIndex).barMouseoverCallback(barHighlightState).draw();\n\n      var links = [];\n      var strength = sent.strengthByCluster;\n      sent.strengthByCluster.forEach(function (strengths, i) {\n        links[i] = [];\n        var wordPos = sent.getWordPos(i);\n        _this9.graph.coCluster.colClusters.forEach(function (clst, j) {\n          var strength = strengths[j];\n          var s = _this9.graph.state_info.state_cluster_info[j];\n          links[i][j] = {\n            source: { x: wordPos[0] + sent.nodeWidth, y: wordPos[1] + sent.nodeHeight / 2 },\n            source_init: { x: wordPos[0] + sent.nodeWidth, y: wordPos[1] + sent.nodeHeight / 2 },\n\n            target: { x: s.top_left[0] + _this9.middle_line_x - sentenceInitTranslate[0], y: s.top_left[1] + _this9.middle_line_y + s.height / 2 - sentenceInitTranslate[1] },\n            strength: strength\n          };\n        });\n      });\n\n\n      var strength_extent = d3.extent(this.flatten(links).map(function (l) {\n        return l.strength;\n      }));\n      var max_strength = Math.max(Math.abs(strength_extent[0]), Math.abs(strength_extent[1]));\n      var strength_bound = this.strengthThresholdPercent.map(function (t) {\n        return t * max_strength;\n      });\n\n      var lsg = sg.append('g');\n      links.forEach(function (ls) {\n        ls.forEach(function (l) {\n          l['el'] = lsg.append('path').classed('active', false).classed('link', true).classed(l.strength > 0 ? 'positive' : 'negative', true).attr('d', self.createLink(l)).attr('stroke-width', self.sentenceStrokeWidth(l.strength)).attr('opacity', 0.2).attr('fill', 'none').attr('display', Math.abs(l.strength) < strength_bound[0] || Math.abs(l.strength) > strength_bound[1] ? 'none' : '').attr('hold', 'false');\n        });\n      });\n      self.graph.sentence_info.push({ sentence: sent, links: links, value: value, group: sg, record: record, sentenceRecord: sentenceRecord });\n      if (this.sentences.length > 1) {\n        self.graph.sentence_info.forEach(function (si) {\n          si.links.forEach(function (ls) {\n            ls.forEach(function (l) {\n              l['el'].attr('display', 'none');\n            });\n          });\n        });\n      }\n\n      function updateSentence(extent_) {\n        var _record$tokens;\n\n        var words = (_record$tokens = record.tokens).slice.apply(_record$tokens, (0, _toConsumableArray3.default)(extent_));\n\n        var scaleFactor = self.client_height / words.length / self.params.sentenceNodeWidth / 1.05;\n\n        scaleFactor = Math.min(scaleFactor, 1.5);\n        var newHeight = scaleFactor * self.client_height;\n        var translateY = (sent.getWordPos(extent_[0])[1] + sent.getWordPos(extent_[1])[1]) / 2;\n\n        sent.transform('scale(' + scaleFactor + ')translate(' + [0, -translateY + self.client_height / 2 / scaleFactor] + ')');\n\n        links.forEach(function (ls) {\n          ls.forEach(function (l) {\n            var actualY = (l.source_init.y - translateY) * scaleFactor + self.client_height / 2;\n            console.log('client height is ' + self.client_height);\n            console.log('actualY is ' + actualY);\n\n            l.source.x = l.source_init.x * scaleFactor;\n            l.source.y = actualY;\n            l['el'].transition().attr('d', actualY > 0 && actualY < self.client_height ? self.createLink(l) : '');\n          });\n        });\n      }\n\n      function highlightSentenceLinkByNodeIndex(data, t, highlight) {\n        var changeCheckStatus = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n        links[t].forEach(function (l) {\n          if (changeCheckStatus) {\n            l['el'].attr('hold', l['el'].attr('hold') === 'false' ? 'true' : 'false');\n          }\n          if (l['el'].attr('hold') !== 'true') {\n            l['el'].classed('active', highlight).attr('display', highlight || self.sentences.length < 2 && l['el'].attr('display') !== 'none' ? '' : 'none');\n          } else {\n            l['el'].classed('active', true).attr('display', '');\n          }\n        });\n        if (changeCheckStatus) {\n          data.selected = !data.selected;\n          _eventBus.bus.$emit(_eventBus.SELECT_SENTENCE_NODE, data, self.compare);\n        }\n        data.bg.classed('active', data.selected ? true : highlight);\n      }\n\n      function barHighlightState(state_index, highlight) {\n        console.log('state ' + state_index + ' is hover on or out');\n        self.update_ref(d3.select(self.graph.state_info.state_cluster_info[state_index]['el']).select('rect').node(), highlight ? 'plus' : 'minus');\n      }\n    }\n  }, {\n    key: 'drawBrushRect',\n    value: function drawBrushRect(g, dataLength, func) {\n      var self = this;\n\n      var maxHeight = this.params.height / 2;\n      var unitHeight = Math.min(maxHeight / dataLength, 50);\n      console.log('unitHeight is ' + unitHeight);\n      var rectSize = [self.params.sentenceBrushRectWidth, unitHeight];\n      console.log('rect size is ' + rectSize);\n      var minBrushLength = 3;\n      g.selectAll('.wordRect').data(d3.range(dataLength)).enter().append('rect').attr('x', 0).attr('y', function (d) {\n        return d * rectSize[1];\n      }).attr('width', rectSize[0]).attr('height', rectSize[1]).attr('fill', 'black').attr('stroke-width', 1).attr('stroke', 'blue').attr('opacity', 0.2);\n      var brush = d3.brushY().extent([[0, 0], [rectSize[0], rectSize[1] * dataLength]]).on('end', function () {\n        if (!d3.event.sourceEvent) return;\n        if (!d3.event.selection) return;\n        var extent = d3.event.selection;\n        var lower = Math.round(extent[0] / rectSize[1]);\n        var upper = Math.round(extent[1] / rectSize[1]);\n        extent[0] = lower * rectSize[1];\n        extent[1] = upper * rectSize[1];\n        d3.select(this).transition().call(d3.event.target.move, extent);\n        console.log(d3.event.selection);\n        func([lower, upper]);\n      });\n      g.append('g').call(brush).call(brush.move, [0, rectSize[1] * dataLength]);\n    }\n  }, {\n    key: 'calculate_state_info',\n    value: function calculate_state_info(coCluster) {\n      var mode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'height';\n\n      var state_loc = [];\n      var state_cluster_loc = [];\n\n\n      var clusterHeight = this.params.clusterHeight;\n      var packNum = this.params.packNum;\n      this.params.computeUnitParams();\n      var unitHeight = this.params.unitHeight;\n      var unitWidth = this.params.unitWidth;\n      var unitMargin = this.params.unitMargin;\n      var clusterMargin = this.params.clusterMargin;\n      var clusterInterval = this.params.clusterInterval;\n\n      var stateClusters = coCluster.colClusters;\n\n      if (mode === 'height') {\n        stateClusters.forEach(function (clst, i) {\n          var width = Math.ceil(clst.length / packNum) * (unitWidth + unitMargin) - unitMargin + 2 * clusterMargin;\n          var height = clusterHeight;\n          var top_left = [-width / 2, i * (height + clusterInterval)];\n\n          state_cluster_loc[i] = { top_left: top_left, width: width, height: height };\n\n          clst.forEach(function (c, j) {\n            var s_width = unitWidth;\n            var s_height = unitHeight;\n            var s_top_left = [~~(j / packNum) * (unitMargin + unitWidth) + clusterMargin, j % packNum * (unitHeight + unitMargin) + clusterMargin];\n            state_loc[c] = { top_left: s_top_left, width: s_width, height: s_height };\n          });\n        });\n      } else if (mode === 'width') {\n        var width = this.params.clusterWidth;\n        var widthPackNum = this.params.widthPackNum;\n        var offset = 0;\n        stateClusters.forEach(function (clst, i) {\n          var height = Math.ceil(clst.length / widthPackNum) * (unitHeight + unitMargin) - unitMargin + 2 * clusterMargin;\n          var top_left = [-width / 2, offset];\n          offset += height + clusterInterval;\n\n          state_cluster_loc[i] = { top_left: top_left, width: width, height: height };\n\n          clst.forEach(function (c, j) {\n            var s_width = unitWidth;\n            var s_height = unitHeight;\n            var s_top_left = [j % widthPackNum * (unitMargin + unitWidth) + clusterMargin, ~~(j / widthPackNum) * (unitHeight + unitMargin) + clusterMargin];\n            state_loc[c] = { top_left: s_top_left, width: s_width, height: s_height };\n          });\n        });\n      }\n      return { state_cluster_info: state_cluster_loc, state_info: state_loc };\n    }\n  }, {\n    key: 'calculate_word_info',\n    value: function calculate_word_info(coCluster) {\n      var _this10 = this;\n\n      var selected_state_cluster_index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n\n      var self = this;\n      var wordCloudPaddingLength = this.params.wordCloudPaddingLength;\n      var wordSize2StrengthRatio = this.params.wordSize2StrengthRatio;\n\n      var baseWordCloudWidth = this.params.wordCloudWidth;\n      var wordClusters = coCluster.rowClusters;\n      var words = coCluster.words;\n      var nCluster = coCluster.labels.length;\n      var agg_info = coCluster.aggregation_info;\n\n      var chordLength = this.params.wordCloudChordLength;\n      var availableLength = chordLength - nCluster * wordCloudPaddingLength;\n\n      var wordCloudArcRadius = chordLength / 2 / Math.sin(this.params.wordCloudArcDegree / 2 * Math.PI / 180);\n      this.params.wordCloudArcRadius = wordCloudArcRadius;\n\n\n      var highlight_clouds = [];\n      if (selected_state_cluster_index >= 0) {\n        self.graph.link_info[selected_state_cluster_index].forEach(function (d, j) {\n          if (d3.select(d['el']).attr('display') !== 'none') {\n            highlight_clouds.push(j);\n          }\n        });\n      }\n\n      highlight_clouds = new _set2.default(highlight_clouds);\n      var word_info = [];\n      var wd_height = wordClusters.map(function (d, i) {\n        if (highlight_clouds.size === 0) {\n          return Math.sqrt(d.length);\n        } else if (!highlight_clouds.has(i)) {\n          return Math.sqrt(d.length);\n        } else {\n          return Math.sqrt(d.length) * _this10.params.wordCloudHightlightRatio;\n        }\n      });\n\n      var wd_height_sum = wd_height.reduce(function (acc, val) {\n        return acc + val;\n      }, 0);\n      var max_height = wd_height.reduce(function (a, b) {\n        return Math.max(a, b);\n      }, 0);\n\n      var offset = -chordLength / 2;\n      wordClusters.forEach(function (wdst, i) {\n        var actual_height = wd_height[i] / wd_height_sum * availableLength;\n        var actual_width = baseWordCloudWidth;\n        var top_left_y = offset;\n        var top_left_x = Math.sqrt(Math.pow(wordCloudArcRadius, 2) - Math.pow(top_left_y, 2));\n        offset += actual_height + wordCloudPaddingLength;\n\n        if (self.graph && self.graph.word_info) {\n          self.graph.word_info[i].top_left = [top_left_x, top_left_y];\n          self.graph.word_info[i].width = actual_width;\n          self.graph.word_info[i].height = actual_height;\n          word_info[i] = self.graph.word_info[i];\n        } else {\n          var words_data = wdst.map(function (d) {\n            return { text: words[d], size: agg_info.row_single_2_col_cluster[d][i] * wordSize2StrengthRatio };\n          });\n          word_info[i] = { top_left: [top_left_x, top_left_y], width: actual_width,\n            height: actual_height, words_data: words_data };\n        }\n      });\n\n      return word_info;\n    }\n  }, {\n    key: 'calculate_link_info',\n    value: function calculate_link_info(state_info, word_info, coCluster, dx, dy) {\n      var _this11 = this;\n\n      var self = this;\n      var links = [];\n      var row_cluster_2_col_cluster = coCluster.aggregation_info.row_cluster_2_col_cluster;\n      var colClusters = coCluster.colClusters;\n      var rowClusters = coCluster.rowClusters;\n      var labels = coCluster.labels;\n\n      state_info.state_cluster_info.forEach(function (s, i) {\n        var max_strength = 0;\n\n        word_info.forEach(function (w, j) {\n          if (links[i] === undefined) {\n            links[i] = [];\n          }\n\n          if (_this11.graph && _this11.graph.link_info) {\n            links[i][j] = { source: { x: s.top_left[0] + s.width,\n                y: s.top_left[1] + s.height / 2 },\n              target: { x: w.top_left[0] + dx, y: w.top_left[1] + w.height / 2 + dy },\n              strength: self.graph.link_info[i][j].strength,\n              el: self.graph.link_info[i][j].el\n            };\n          } else {\n            var tmp_strength = row_cluster_2_col_cluster[labels[j]][labels[i]];\n\n            links[i][j] = { source: { x: s.top_left[0] + s.width,\n                y: s.top_left[1] + s.height / 2 },\n              target: { x: w.top_left[0] + dx, y: w.top_left[1] + w.height / 2 + dy },\n              strength: tmp_strength\n            };\n          }\n        });\n      });\n\n      return links;\n    }\n  }, {\n    key: 'ArcLength2Angle',\n    value: function ArcLength2Angle(length, radius) {\n      return length / radius * 180 / Math.PI;\n    }\n  }, {\n    key: 'render_state',\n    value: function render_state(data) {\n      var _this12 = this;\n\n      if (data.length) {\n        if (!this.hg.select('#color-legend').node()) {\n          var tmp_state = this.graph.state_info.state_cluster_info[this.graph.state_info.state_cluster_info.length - 1];\n          var tmp_g = this.hg.append('g').attr('id', 'color-legend').attr('transform', 'translate(' + [0, tmp_state.top_left[1] + tmp_state.height + 0.6 * this.params.clusterInterval] + ')' + (this.compare ? 'scale(-1, 1)' : ''));\n          var width = tmp_state.width;\n\n          var height = 3.8 * 2;\n\n          tmp_g.append('rect').attr('transform', 'translate(' + [-width / 2, 0] + ')').transition().attr('x', 0).attr('y', 0).attr('width', width).attr('height', height).style('fill', 'url(#state-legend)');\n\n          this.axisScale = d3.scaleLinear().range([0, width]).domain([-this.stateClip, this.stateClip]);\n          this.colorLegendAxis = d3.axisBottom().tickValues([parseInt(-this.stateClip), 0, parseInt(this.stateClip)]).tickFormat(d3.format('.' + d3.precisionFixed(1) + 'f')).scale(this.axisScale);\n          tmp_g.append('g').classed('axis', true).attr('transform', 'translate(' + [-width / 2, 0] + ')').call(this.colorLegendAxis);\n        }\n\n        var scale = d3.scaleLinear().domain([-this.stateClip, 0, this.stateClip]).range([1, 0, 1]);\n\n        this.graph.state_info.state_info.forEach(function (s, i) {\n          d3.select(s['el']).property('colored', true).property('strength', data[i]).transition().duration(300).attr('fill', data[i] > 0 ? positiveColor : negativeColor).attr('fill-opacity', scale(Math.abs(data[i])));\n        });\n      } else {\n        this.hg.select('#color-legend').remove();\n        this.graph.state_info.state_info.forEach(function (s, i) {\n          d3.select(s['el']).property('colored', false).transition().duration(400).attr('fill', _this12.unitNormalColor).attr('fill-opacity', 0.3);\n        });\n      }\n    }\n  }, {\n    key: 'renderWord',\n    value: function renderWord() {\n      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this.graph.word_info.forEach(function (wordCluster, i) {\n        wordCluster.words_data.forEach(function (word, j) {\n          word.type = data[word.text];\n        });\n      });\n\n      this.draw_word(this.wg, this.graph);\n    }\n  }, {\n    key: 'redraw_word_link',\n    value: function redraw_word_link() {\n      var selected_state_cluster_index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : -1;\n\n      this.graph.word_info = this.calculate_word_info(this.graph.coCluster, selected_state_cluster_index);\n      this.graph.link_info = this.calculate_link_info(this.graph.state_info, this.graph.word_info, this.graph.coCluster, this.stateClusterWordCloudDX, this.dy);\n      this.draw_word(this.wg, this.graph);\n      this.draw_link(this.hg, this.graph);\n    }\n  }, {\n    key: 'update_ref',\n    value: function update_ref(el, mode) {\n      if (mode === \"plus\") {\n        d3.select(el).property('ref', parseInt(d3.select(el).property('ref')) + 1);\n        d3.select(el).classed('active', true);\n      } else if (mode === \"minus\") {\n        d3.select(el).property('ref', parseInt(d3.select(el).property('ref')) - 1);\n        if (parseInt(d3.select(el).property('ref')) === 0) {\n          d3.select(el).classed('active', false);\n        }\n      }\n    }\n  }, {\n    key: 'draw_state',\n    value: function draw_state(g, graph) {\n      var _this13 = this;\n\n      var self = this;\n      var coCluster = graph.coCluster;\n      var state_info = graph.state_info;\n      var clusterHeight = this.params.clusterHeight;\n      var packNum = this.params.packNum;\n      var unitHeight = this.params.unitHeight;\n      var unitWidth = this.params.unitWidth;\n      var unitMargin = this.params.unitMargin;\n      var clusterInterval = this.params.clusterInterval;\n      var littleTriangleWidth = this.params.littleTriangleWidth;\n      var littleTriangleHeight = this.params.littleTriangleHeight;\n\n      if (this.clusterSelected.length !== coCluster.colClusters.length) {\n        this.clusterSelected = coCluster.colClusters.map(function (d, i) {\n          return 0;\n        });\n      }\n      var clusterSelected = this.clusterSelected;\n      g.append('line').attr('id', 'middle_line').attr('x1', 0).attr('y1', -1000).attr('x2', 0).attr('y2', 1000).attr('display', 'none');\n\n      var hiddenClusters = g.selectAll('g rect').data(coCluster.colClusters, function (clst, i) {\n        return Array.isArray(clst) ? String(clst.length) + String(i) : _this13.id;\n      });\n\n      var selectCluster = function selectCluster(clst, i) {\n        if (!clusterSelected[i]) {\n          clusterSelected[i] = 1;\n          self.redraw_word_link(i);\n          self.update_ref(d3.select(this).select('rect').node(), \"plus\");\n          self.graph.link_info[i].forEach(function (l, j) {\n            self.update_ref(l['el'], \"plus\");\n            if (d3.select(l['el']).attr('display') !== 'none') {\n              self.update_ref(self.graph.word_info[j]['wordCloud'].bgHandle.node(), \"plus\");\n            }\n          });\n        } else {\n          clusterSelected[i] = 0;\n          self.redraw_word_link(-1);\n          self.update_ref(d3.select(this).select('rect').node(), \"minus\");\n          self.graph.link_info[i].forEach(function (l, j) {\n            self.update_ref(l['el'], \"minus\");\n            if (d3.select(l['el']).attr('display') !== 'none') {\n              self.update_ref(self.graph.word_info[j]['wordCloud'].bgHandle.node(), \"minus\");\n            }\n          });\n        }\n      };\n\n      var hGroups = hiddenClusters.enter().append('g');\n      hGroups.on('mouseenter', function (clst, i) {\n        self.update_ref(d3.select(this).select('rect').node(), \"plus\");\n        self.graph.link_info[i].forEach(function (l, j) {\n          self.update_ref(l['el'], \"plus\");\n          if (d3.select(l['el']).attr('display') !== 'none') {\n            self.update_ref(self.graph.word_info[j]['wordCloud'].bgHandle.node(), \"plus\");\n            var ref = self.graph.word_info[j]['wordCloud'].bgHandle.property('ref');\n            console.log('word ' + j + '\\'s ref is ' + ref);\n          }\n        });\n      }).on('mouseleave', function (clst, i) {\n        console.log('mouse leave');\n        self.update_ref(d3.select(this).select('rect').node(), \"minus\");\n        console.log(d3.select(this).select('rect').property('ref'));\n        self.graph.link_info[i].forEach(function (l, j) {\n          self.update_ref(l['el'], \"minus\");\n          if (d3.select(l['el']).attr('display') !== 'none') {\n            self.update_ref(self.graph.word_info[j]['wordCloud'].bgHandle.node(), \"minus\");\n            var ref = self.graph.word_info[j]['wordCloud'].bgHandle.property('ref');\n            console.log('word ' + j + '\\'s ref is ' + ref);\n          }\n        });\n      }).on('click', selectCluster);\n      hGroups.attr('transform', 'translate(0,0)').attr('id', function (clst, i) {\n        return String(clst.length) + String(i);\n      }).transition().duration(300).attr('transform', function (d, i) {\n        return 'translate(' + [state_info.state_cluster_info[i].top_left[0], state_info.state_cluster_info[i].top_left[1]] + ')';\n      });\n\n      hGroups.each(function (d, i) {\n        graph.state_info.state_cluster_info[i]['el'] = this;\n      });\n\n      var clusterRect = hGroups.append('rect').classed('hidden-cluster', true).classed('active', false).property('ref', 0).transition().duration(400).attr('width', function (clst, i) {\n        return state_info.state_cluster_info[i].width;\n      }).attr('height', function (clst, i) {\n        return state_info.state_cluster_info[i].height;\n      }).attr('x', 0).attr('y', 0);\n\n      var units = hGroups.append('g').selectAll('rect').data(function (d) {\n        return d;\n      });\n\n      var tmp_units = units.enter().append('rect').on('mouseover', function (d, i) {\n        if (state_info.state_info[d].selected) return;\n        d3.select(this).classed('unit-active', true);\n      }).on('mouseleave', function (d, i) {\n        if (state_info.state_info[d].selected) return;\n        d3.select(this).classed('unit-active', false);\n      }).on('click', function (d, i) {\n        if (!state_info.state_info[d].selected) {\n          state_info.state_info[d].selected = true;\n          d3.select(this).classed('unit-active', true);\n          _eventBus.bus.$emit(_eventBus.SELECT_UNIT, d, self.compare);\n        } else {\n          state_info.state_info[d].selected = false;\n          d3.select(this).classed('unit-active', false);\n          _eventBus.bus.$emit(_eventBus.DESELECT_UNIT, d, self.compare);\n        }\n      }).transition().duration(400).attr('width', function (i) {\n        return state_info.state_info[i].width;\n      }).attr('height', function (i) {\n        return state_info.state_info[i].height;\n      }).attr('x', function (i) {\n        return state_info.state_info[i].top_left[0];\n      }).attr('y', function (i) {\n        return state_info.state_info[i].top_left[1];\n      }).attr('fill', self.unitNormalColor).attr('fill-opacity', 0.3);\n\n      tmp_units.each(function (d) {\n        graph.state_info.state_info[d]['el'] = this;\n      });\n    }\n  }, {\n    key: 'sum',\n    value: function sum(arr) {\n      return arr.reduce(function (acc, val) {\n        return acc + val;\n      }, 0);\n    }\n  }, {\n    key: 'draw_word',\n    value: function draw_word(g, graph) {\n      var _this14 = this;\n\n      var self = this;\n      var word_info = graph.word_info;\n      word_info.forEach(function (wclst, i) {\n        if (wclst['wordCloud']) {\n          var ref = parseInt(wclst['wordCloud'].bgHandle.property('ref'));\n          var selected = wclst['wordCloud'].bgHandle.property('selected');\n          var active = wclst['wordCloud'].bgHandle.classed('active');\n          wclst['wordCloud'].draw([wclst.width / 2, wclst.height / 2]).transform('translate(' + [wclst.top_left[0] + wclst.width / 2, wclst.top_left[1] + wclst.height / 2] + ')');\n          wclst['wordCloud'].bgHandle.property('ref', ref).property('selected', selected).classed('wordcloud', true).classed('active', active);\n        } else {\n          var tmp_g = g.append('g').on('mouseenter', function () {\n            self.graph.link_info.forEach(function (ls, j) {\n              self.update_ref(ls[i]['el'], 'plus');\n              if (d3.select(ls[i]['el']).attr('display') !== 'none') {\n                self.update_ref(d3.select(self.graph.state_info.state_cluster_info[j]['el']).select('rect').node(), 'plus');\n              }\n            });\n            self.update_ref(wclst['wordCloud'].bgHandle.node(), 'plus');\n          }).on('mouseleave', function () {\n            self.graph.link_info.forEach(function (ls, j) {\n              self.update_ref(ls[i]['el'], 'minus');\n              if (d3.select(ls[i]['el']).attr('display') !== 'none') {\n                self.update_ref(d3.select(self.graph.state_info.state_cluster_info[j]['el']).select('rect').node(), 'minus');\n              }\n            });\n            self.update_ref(wclst['wordCloud'].bgHandle.node(), 'minus');\n          }).on('click', function () {\n            wclst['wordCloud'].bgHandle.property('selected', ~wclst['wordCloud'].bgHandle.property('selected'));\n            self.graph.link_info.forEach(function (ls, j) {\n              self.update_ref(ls[i]['el'], wclst['wordCloud'].bgHandle.property('selected') ? 'plus' : 'minus');\n              if (d3.select(ls[i]['el']).attr('display') !== 'none') {\n                self.update_ref(d3.select(self.graph.state_info.state_cluster_info[j]['el']).select('rect').node(), wclst['wordCloud'].bgHandle.property('selected') ? 'plus' : 'minus');\n              }\n            });\n            self.update_ref(wclst['wordCloud'].bgHandle.node(), wclst['wordCloud'].bgHandle.property('selected') ? 'plus' : 'minus');\n          });\n          var myWordCloud = new _cloud.WordCloud(tmp_g, wclst.width / 2, wclst.height / 2, 'rect', _this14.compare).transform('translate(' + [wclst.top_left[0] + wclst.width / 2, wclst.top_left[1] + wclst.height / 2] + ')').color(_this14.params.posColor);\n          myWordCloud.update(word_info[i].words_data);\n          myWordCloud.bgHandle.property('ref', 0).property('selected', false).classed('wordcloud', true);\n          wclst['wordCloud'] = myWordCloud;\n        }\n      });\n    }\n  }, {\n    key: 'erase_link',\n    value: function erase_link() {\n      this.graph.link_info.forEach(function (ls) {\n        ls.forEach(function (l) {\n          d3.select(l['el']).transition().duration(500).style('opacity', 0).remove();\n        });\n      });\n    }\n  }, {\n    key: 'erase_word',\n    value: function erase_word() {\n      this.graph.word_info.forEach(function (w) {\n        w['wordCloud'].destroy();\n      });\n    }\n  }, {\n    key: 'erase_state',\n    value: function erase_state() {\n      this.graph.state_info.state_cluster_info.forEach(function (s) {\n        d3.select(s['el']).transition().duration(500).style('fill-opacity', 1e-6).style('opacity', 1e-6).remove();\n      });\n    }\n  }, {\n    key: 'createLink',\n    value: function createLink(d) {\n      return \"M\" + d.source.x + \",\" + d.source.y + \"C\" + (d.source.x + d.target.x) / 2 + \",\" + d.source.y + \" \" + (d.source.x + d.target.x) / 2 + \",\" + d.target.y + \" \" + d.target.x + \",\" + d.target.y;\n    }\n  }, {\n    key: 'flatten',\n    value: function flatten(arr) {\n      var _this15 = this;\n\n      return arr.reduce(function (acc, val) {\n        return acc.concat(Array.isArray(val) ? _this15.flatten(val) : val);\n      }, []);\n    }\n  }, {\n    key: 'draw_link',\n    value: function draw_link(g, graph) {\n      var _this16 = this;\n\n      var link_info = graph.link_info;\n\n      var strength_extent = d3.extent(this.flatten(link_info).map(function (l) {\n        return l.strength;\n      }));\n      var max_strength = Math.max(Math.abs(strength_extent[0]), Math.abs(strength_extent[1]));\n      var strength_bound = this.strengthThresholdPercent.map(function (t) {\n        return t * max_strength;\n      });\n\n      link_info.forEach(function (ls, i) {\n        ls.forEach(function (l, j) {\n          if (l['el']) {\n            d3.select(l['el']).attr('display', Math.abs(l.strength) < strength_bound[0] || Math.abs(l.strength) > strength_bound[1] ? 'none' : '').transition().duration(300).attr('stroke-width', _this16.strokeWidth(l.strength)).attr('d', _this16.createLink(l));\n          } else {\n            var tmp_path = g.append('path').classed('link', true).classed('active', false).classed(l.strength > 0 ? 'positive' : 'negative', true).property('ref', 0).attr('d', _this16.createLink(l)).attr('stroke-width', _this16.strokeWidth(l.strength)).attr('opacity', 0.15).attr('display', Math.abs(l.strength) < strength_bound[0] || Math.abs(l.strength) > strength_bound[1] ? 'none' : '');\n\n            l['el'] = tmp_path.node();\n          }\n        });\n      });\n    }\n  }, {\n    key: 'draw',\n    value: function draw(coCluster) {\n      var self = this;\n\n      var maxClusterSize = coCluster.colSizes.reduce(function (a, b) {\n        return Math.max(a, b);\n      });\n      var nCluster = coCluster.labels.length;\n      var clusterInterval2HeightRatio = 1.0;\n\n      this.params.computeParams(coCluster.labels.length, clusterInterval2HeightRatio, coCluster.colSizes);\n\n      this.dx = this.stateClusterWordCloudDX;\n      this.dy = this.params.wordCloudChordLength / 2.0 - this.middle_line_y / 2;\n\n      console.log('dx is ' + this.dx + ', dy is ' + this.dy);\n\n      var coClusterAggregation = coCluster.aggregation_info;\n      var state_info = this.calculate_state_info(coCluster, this.params.mode);\n\n      self.graph = {\n        state_info: state_info,\n        coCluster: coCluster,\n        sentence_info: []\n      };\n      this.draw_state(this.hg, self.graph);\n\n      this.redraw_word_link();\n\n      this.translateX(0);\n    }\n  }, {\n    key: 'translateX',\n    value: function translateX(x) {\n      this.params.middleLineOffset += x;\n      this.hg.attr('transform', 'translate(' + [this.middle_line_x, this.middle_line_y] + ')');\n      this.wg.attr('transform', 'translate(' + [this.middle_line_x + this.dx, this.middle_line_y + this.dy] + ')');\n    }\n  }, {\n    key: 'adjustdx',\n    value: function adjustdx(newdx) {\n      this.dx = newdx;\n      this.wg.attr('transform', 'translate(' + [this.middle_line_x + this.dx, this.middle_line_y + this.dy] + ')');\n      this.redraw_word_link();\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      if (!this.graph) {\n        return;\n      }\n      this.deleteAllSentences();\n      this.erase_state();\n      this.erase_link();\n      this.erase_word();\n      this.topg.transition().duration(300).attr('transform', 'scale(0.01, 0.01)').style('opacity', 1e-6).remove();\n      this.topg = this.svg.append('g');\n      this.hg = this.topg.append('g');\n      this.wg = this.topg.append('g');\n    }\n  }, {\n    key: 'dxOffset',\n    get: function get() {\n      var adaptive = (this.client_width - this.client_height) / 4;\n\n      return 0;\n    }\n  }, {\n    key: 'stateClusterWordCloudDX',\n    get: function get() {\n      return this.client_width * (-this.params.dxShrinkFactor * this.sentences.length) + this.dxOffset;\n    }\n  }, {\n    key: 'client_width',\n    get: function get() {\n      return this.params.width;\n    }\n  }, {\n    key: 'client_height',\n    get: function get() {\n      return this.params.height;\n    }\n  }, {\n    key: 'middle_line_x',\n    get: function get() {\n      return this.params.middleLineX;\n    }\n  }, {\n    key: 'middle_line_y',\n    get: function get() {\n      return this.params.middleLineY;\n    }\n  }, {\n    key: 'nSentence',\n    get: function get() {\n      return this.sentences.length;\n    }\n  }]);\n  return Painter;\n}();\n\n/***/ }),\n\n/***/ 312:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _from = __webpack_require__(50);\n\nvar _from2 = _interopRequireDefault(_from);\n\nvar _d = __webpack_require__(21);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _chart = __webpack_require__(165);\n\nvar _eventBus = __webpack_require__(11);\n\nvar _dataService = __webpack_require__(32);\n\nvar _dataService2 = _interopRequireDefault(_dataService);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar layoutParams = {\n  lineLength: 30,\n  wordWidth: 50,\n  interval: 20,\n  color: d3.scaleOrdinal(d3.schemeCategory10)\n};\n\nexports.default = {\n  name: 'InfoBoard',\n  data: function data() {\n    return {\n      chart: null,\n      labelBoard: null,\n      shared: _eventBus.bus.state,\n      statistics: null,\n      layoutParams: layoutParams,\n      wordsStatistics: null,\n      unitsStatistics: null,\n      top_k: 4\n    };\n  },\n\n  props: {\n    height: {\n      type: Number,\n      default: 600\n    },\n    id: {\n      type: String,\n      default: 'info-board'\n    },\n    type: {\n      type: String,\n      default: 'state'\n    },\n    compare: {\n      type: Boolean,\n      default: false\n    }\n  },\n  computed: {\n    header: function header() {\n      var typeStr = this.type === 'state' ? 'Hidden State' : 'Word';\n      return 'Info: ' + (this.shared.compare ? '[' + this.selectedModel + '] ' + typeStr : typeStr);\n    },\n    svgId: function svgId() {\n      return this.id + '-svg';\n    },\n    selectedLayer: function selectedLayer() {\n      return this.compare ? this.shared.selectedLayer2 : this.shared.selectedLayer;\n    },\n    selectedModel: function selectedModel() {\n      return this.compare ? this.shared.selectedModel2 : this.shared.selectedModel;\n    },\n    selectedState: function selectedState() {\n      return this.compare ? this.shared.selectedState2 : this.shared.selectedState;\n    },\n    selectedUnits: function selectedUnits() {\n      return this.type === 'state' ? this.compare ? this.shared.selectedUnits2 : this.shared.selectedUnits : 0;\n    },\n    selectedWords: function selectedWords() {\n      return this.type === 'word' ? this.compare ? this.shared.selectedWords2 : this.shared.selectedWords : 0;\n    },\n    selectedNode: function selectedNode() {\n      return this.type === 'word' ? this.compare ? this.shared.selectedNode2 : this.shared.selectedNode : 0;\n    }\n  },\n  watch: {\n    width: function width() {\n      if (this.selectedLayer && this.selectedModel && this.selectedState) {\n        if (this.type === 'word' && this.wordsStatistics) this.repaintWord();else if (this.type === 'state' && this.unitsStatistics) this.repaintState();\n      }\n    },\n    selectedUnits: function selectedUnits() {\n      var _this = this;\n\n      if (this.selectedUnits) {\n        var model = this.selectedModel,\n            state = this.selectedState,\n            layer = this.selectedLayer;\n        var p = _eventBus.bus.loadStatistics(model, state, layer).then(function () {\n          _this.statistics = _eventBus.bus.getStatistics(model, state, layer);\n          _this.unitsStatistics = _this.selectedUnits.map(function (unit, i) {\n            var data = _this.statistics.statesData[unit];\n            var dataArray = data.mean.map(function (_, j) {\n              return {\n                mean: data.mean[j],\n                range1: [data.low1[j], data.high1[j]],\n                range2: [data.low2[j], data.high2[j]],\n                word: data.words[j]\n              };\n            });\n            dataArray.sort(function (a, b) {\n              return a.mean - b.mean;\n            });\n            dataArray.splice(_this.top_k, dataArray.length - 2 * _this.top_k);\n            return dataArray;\n          });\n          _this.repaintState();\n        });\n      }\n    },\n    selectedWords: function selectedWords() {\n      var _this2 = this;\n\n      if (this.selectedWords) {\n        var model = this.selectedModel,\n            state = this.selectedState,\n            layer = this.selectedLayer;\n        var p = _eventBus.bus.loadStatistics(model, state, layer).then(function () {\n          _this2.statistics = _eventBus.bus.getStatistics(model, state, layer);\n          _this2.wordsStatistics = _this2.selectedWords.map(function (word, i) {\n            var wordData = _this2.statistics.statOfWord(word.text);\n            wordData.color = _this2.selectedWords[i].color;\n            return wordData;\n          });\n\n          _this2.repaintWord();\n        });\n      }\n    },\n    selectedNode: function selectedNode() {\n      var _this3 = this;\n\n      if (this.selectedNode) {\n        var model = this.selectedModel,\n            state = this.selectedState,\n            layer = this.selectedLayer;\n        var p = _dataService2.default.getWordStatistics(model, state, layer, this.selectedNode.word, function (response) {\n          if (response.status === 200) {\n            var data = response.data;\n            data.word = data.words;\n            data.range1 = data.low1.map(function (low1, i) {\n              return [low1, data.high1[i]];\n            });\n            data.range2 = data.low2.map(function (low2, i) {\n              return [low2, data.high2[i]];\n            });\n            data.color = _this3.layoutParams.color(0);\n            var line = { mean: _this3.selectedNode.response, color: _this3.layoutParams.color(1), word: data.word + '(sentence)' };\n            _this3.wordsStatistics = [data, line];\n            console.log(_this3.selectedNode);\n            _this3.repaintWord();\n          }\n        });\n      }\n    },\n    compare: function compare() {\n      this.init();\n    },\n    type: function type() {\n      this.init();\n    }\n  },\n  methods: {\n    init: function init() {\n      if (this.chart) {\n        this.chart.clean();\n      }\n      if (this.labelBoard) {\n        this.labelBoard.selectAll('rect, text, path').remove();\n      }\n      this.chart = new _chart.Chart(d3.select('#' + this.svgId), this.width, this.height).background('lightgray', 0.0);\n      this.labelBoard = d3.select('#' + this.svgId + '2');\n    },\n    repaintWord: function repaintWord() {\n      var _this4 = this;\n\n      this.chart.clean().resize(this.width, this.height);\n      this.labelBoard.selectAll('rect, text, path').remove();\n      if (!this.wordsStatistics.length) {\n        console.log('Painting no words');\n        return;\n      }\n      var layout = this.layoutParams;\n      var color = layout.color;\n      var labelLength = layout.lineLength + layout.wordWidth + layout.interval;\n\n      this.chart.margin(20, 30, 20, 30).xAxis('dim').yAxis('response');\n      var sortIdx = this.wordsStatistics[0].sort_idx;\n      var interval = ~~(sortIdx.length / 200) + 1;\n      var ranges = range(0, sortIdx.length, interval);\n      sortIdx = ranges.map(function (i) {\n        return sortIdx[i];\n      });\n\n      this.chart.line([[0, 0], [this.wordsStatistics[0].mean.length, 0]]).attr('stroke', '#000');\n\n      this.wordsStatistics.forEach(function (wordData, i) {\n        _this4.chart.line(sortIdx.map(function (i) {\n          return wordData.mean[i];\n        }), function (d, i) {\n          return i * interval;\n        }, function (d) {\n          return d;\n        }).attr('stroke-width', 1).attr('stroke', wordData.color).attr('stroke-opacity', 0.6);\n        if (wordData.range1) {\n          _this4.chart.area(sortIdx.map(function (i) {\n            return wordData.range1[i];\n          }), function (d, i) {\n            return i * interval;\n          }, function (d) {\n            return d[0];\n          }, function (d) {\n            return d[1];\n          }).attr('fill', wordData.color).attr('fill-opacity', 0.15).attr('stroke', wordData.color).attr('stroke-opacity', 0.1);\n        }\n        if (wordData.range2) {\n          _this4.chart.area(sortIdx.map(function (i) {\n            return wordData.range2[i];\n          }), function (d, i) {\n            return i * interval;\n          }, function (d) {\n            return d[0];\n          }, function (d) {\n            return d[1];\n          }).attr('fill', wordData.color).attr('fill-opacity', 0.15).attr('stroke', wordData.color).attr('stroke-opacity', 0.05);\n        }\n\n        _this4.labelBoard.append('rect').attr('x', labelLength * i + 20).attr('y', 10).attr('width', layout.lineLength).attr('height', 1).attr('fill', wordData.color);\n        _this4.labelBoard.append('text').attr('x', labelLength * i + 30 + layout.lineLength).attr('y', 15).text(wordData.word).style('font-size', 12);\n        if (i === 0) {\n          _this4.labelBoard.append('path').attr('d', 'M' + (30 + layout.lineLength) + ' 20 ' + 'H ' + (wordData.word.length * 7 + 30 + layout.lineLength)).style('stroke', wordData.color);\n        }\n      });\n      this.chart.draw();\n    },\n    repaintState: function repaintState() {\n      var _this5 = this;\n\n      this.chart.clean().resize(this.width, this.height);\n      this.labelBoard.selectAll('path, text').remove();\n      if (!this.selectedUnits.length) {\n        console.log('Painting no states');\n        return;\n      }\n      var xLabelWidth = 20;\n      var subChartWidth = (this.width - xLabelWidth) / this.unitsStatistics.length;\n      var top_k = this.top_k;\n\n      this.unitsStatistics.forEach(function (unitData, i) {\n        var xLabel = i === _this5.unitsStatistics.length - 1 ? 'r' : ' ';\n        var marginRight = i === _this5.unitsStatistics.length - 1 ? xLabelWidth : 0;\n        var subWidth = i === _this5.unitsStatistics.length - 1 ? subChartWidth + xLabelWidth : subChartWidth;\n        var subchart = _this5.chart.subChart(subWidth, _this5.height).xAxis(xLabel).yAxis('words');\n        subchart.axis.y.tickFormat(function (j) {\n          if (-1 < j && j < top_k * 2) return unitData[j].word;\n        }).tickValues(range(0, top_k * 2, 1));\n        subchart.axis.x.ticks(6);\n        subchart.margin(20, marginRight, 20, 55).translate(subChartWidth * i, 0).rotate();\n        subchart.box(unitData, 6, function (d, j) {\n          return j;\n        }, function (d) {\n          return d.mean;\n        }, function (d) {\n          return d.range1;\n        }, function (d) {\n          return d.range2;\n        }).attr('fill', 'steelblue').attr('stroke', 'black').attr('stroke-width', 0).attr('fill-opacity', 0.5);\n\n        subchart.line([[top_k - 0.5, subchart.extents[1][0]], [top_k - 0.5, subchart.extents[1][1]]]).style('stroke', '#333').style('stroke-dasharray', '5 5').style('stroke-opacity', 0.6);\n        var labelPos = subChartWidth * i + subChartWidth / 2 - 6;\n        _this5.labelBoard.append('text').attr('x', labelPos).attr('y', 15).text('Dim: ' + _this5.selectedUnits[i]).style('font-size', 12);\n        if (i === 0) {\n          _this5.labelBoard.append('path').attr('d', 'M' + labelPos + ' 20 ' + 'H ' + (_this5.selectedUnits[0].toString().length * 6 + 30 + labelPos)).style('stroke', '#a36');\n        }\n      });\n      this.chart.draw();\n    }\n  },\n  mounted: function mounted() {\n    this.width = this.$el.clientWidth - 10;\n    this.init();\n  }\n};\n\n\nfunction getSortedStatesData(words) {}\n\nfunction range(start, end) {\n  var interval = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n  var num = ~~((end - start - 1) / interval) + 1;\n  return (0, _from2.default)({ length: num }, function (v, i) {\n    return start + i * interval;\n  });\n}\n\n/***/ }),\n\n/***/ 313:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _eventBus = __webpack_require__(11);\n\nvar _InfoBoard = __webpack_require__(280);\n\nvar _InfoBoard2 = _interopRequireDefault(_InfoBoard);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  name: 'InfoView',\n  components: { InfoBoard: _InfoBoard2.default },\n  data: function data() {\n    return {\n      shared: _eventBus.bus.state,\n      type1: 'state',\n      type2: 'word'\n    };\n  },\n\n  props: {\n    height: {\n      type: Number,\n      default: 300\n    }\n  },\n  computed: {\n    compare: function compare() {\n      return this.shared.compare;\n    }\n  },\n  methods: {},\n  mounted: function mounted() {\n    var _this = this;\n\n    _eventBus.bus.$on(_eventBus.SELECT_UNIT, function (unit, compare) {\n      if (!_this.compare) return;\n      if (compare) {\n        _this.type1 = 'state';\n      } else {\n        _this.type2 = 'state';\n      }\n    });\n    _eventBus.bus.$on(_eventBus.SELECT_WORD, function (word, compare) {\n      if (!_this.compare) return;\n      if (compare) {\n        _this.type1 = 'word';\n      } else {\n        _this.type2 = 'word';\n      }\n    });\n    _eventBus.bus.$on(_eventBus.SELECT_SENTECE_NODE, function (node, compare) {\n      if (!_this.compare) return;\n      if (compare) {\n        _this.type1 = 'word';\n      } else {\n        _this.type2 = 'word';\n      }\n    });\n  }\n};\n\n/***/ }),\n\n/***/ 314:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _ProjectView = __webpack_require__(718);\n\nvar _ProjectView2 = _interopRequireDefault(_ProjectView);\n\nvar _TestView = __webpack_require__(719);\n\nvar _TestView2 = _interopRequireDefault(_TestView);\n\nvar _ArcView = __webpack_require__(711);\n\nvar _ArcView2 = _interopRequireDefault(_ArcView);\n\nvar _ClusterView = __webpack_require__(712);\n\nvar _ClusterView2 = _interopRequireDefault(_ClusterView);\n\nvar _eventBus = __webpack_require__(11);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  name: \"MainView\",\n  data: function data() {\n    return {\n      activeTab: 'project',\n      shared: _eventBus.bus.state,\n      width: 800\n    };\n  },\n\n  props: {\n    height: {\n      type: Number,\n      default: 700\n    }\n  },\n  methods: {\n    handleClick: function handleClick(tab, event) {\n      return;\n    }\n  },\n  computed: {\n    compare: function compare() {\n      return this.shared.compare;\n    }\n  },\n  components: {\n    ProjectView: _ProjectView2.default,\n    TestView: _TestView2.default,\n    ArcView: _ArcView2.default,\n    ClusterView: _ClusterView2.default\n  },\n  mounted: function mounted() {\n    this.width = this.$el.clientWidth;\n  }\n};\n\n/***/ }),\n\n/***/ 315:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _assign = __webpack_require__(71);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _eventBus = __webpack_require__(11);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  name: 'ModelConfig',\n  data: function data() {\n    return {\n      shared: _eventBus.bus.state,\n      states: [],\n      selectedState: null,\n      selectedModel: null,\n      selectedLayer: null,\n      posSwitch: false,\n      config: null,\n      layout: {\n        clusterNum: 2,\n        strokeControlStrength: 100,\n\n        linkFilterThreshold: [0, 1],\n\n        stateClip: 1,\n        mode: 'width'\n      },\n      sentences: [],\n      inputVisible: false,\n      inputValue: '',\n      mode: false,\n      color: ['#09adff', '#ff5b09']\n    };\n  },\n\n  props: {\n    toggle: {\n      type: Function,\n      default: function _default() {\n        return;\n      }\n    },\n    compare: {\n      type: Boolean,\n      default: false\n    }\n  },\n  computed: {\n    availableModels: function availableModels() {\n      return this.shared.availableModels;\n    },\n    colorType: function colorType() {\n      return this.compare ? 'gray' : '';\n    },\n    layerNum: function layerNum() {\n      if (this.config) return this.config.LayerNum;\n      return 0;\n    },\n    maxWidth: function maxWidth() {\n      return 20;\n    }\n  },\n  watch: {\n    selectedModel: function selectedModel(_selectedModel) {\n      var _this = this;\n\n      if (!_selectedModel) return;\n      _eventBus.bus.loadModelConfig(_selectedModel).then(function () {\n        var states = _eventBus.bus.availableStates(_selectedModel);\n        if (states) {\n          _this.states = states;\n          _this.selectedState = _this.states[0];\n          var config = _eventBus.bus.state.modelConfigs[_selectedModel];\n          _this.config = {\n            Cell: config.model.cell_type,\n            LayerNum: config.model.cells.length,\n            LayerSize: config.model.cells[0].num_units\n          };\n          _this.posSwitch = false;\n          _this.selectedLayer = _this.config.LayerNum - 1;\n          _this.sentences = [];\n          _eventBus.bus.$emit(_eventBus.SELECT_MODEL, _this.selectedModel, _this.compare);\n          _eventBus.bus.$emit(_eventBus.CHANGE_LAYOUT, _this.layout, _this.compare);\n        }\n      }).catch(function (v) {\n        return console.log(v);\n      });\n    },\n    selectedState: function selectedState(newState) {\n      if (newState === 'state' || newState === 'state_c' || newState === 'state_h') {\n        _eventBus.bus.$emit(_eventBus.SELECT_STATE, this.selectedState, this.compare);\n      }\n    },\n    selectedLayer: function selectedLayer(newLayer) {\n      _eventBus.bus.$emit(_eventBus.SELECT_LAYER, newLayer, this.compare);\n    },\n    posSwitch: function posSwitch(pos) {\n      if (this.compare) this.shared.renderPos2 = pos;else this.shared.renderPos = pos;\n    }\n  },\n  methods: {\n    stateName: function stateName(state) {\n      switch (state) {\n        case 'state_c':\n          return 'cell state';\n        case 'state_h':\n          return 'hidden state';\n        case 'state':\n          return 'hidden state';\n        default:\n          return 'Unknown';\n      }\n    },\n    layoutChange: function layoutChange() {\n      console.log(\"Layout changed\");\n\n      this.layout.mode = this.mode ? 'width' : 'height';\n      var layout = (0, _assign2.default)({}, this.layout);\n      _eventBus.bus.$emit(_eventBus.CHANGE_LAYOUT, layout, this.compare);\n    },\n    closeSentence: function closeSentence(sentence) {\n      var idx = this.sentences.indexOf(sentence);\n      if (idx !== -1) {\n        _eventBus.bus.$emit(_eventBus.CLOSE_SENTENCE, sentence, this.compare);\n        this.sentences.splice(idx, 1);\n      }\n    },\n    showInput: function showInput() {\n      var _this2 = this;\n\n      this.inputVisible = true;\n      this.$nextTick(function (_) {\n        _this2.$refs.saveTagInput.$refs.input.focus();\n      });\n    },\n    handleInputConfirm: function handleInputConfirm() {\n      var inputValue = this.inputValue;\n      if (inputValue) {\n        _eventBus.bus.$emit(_eventBus.EVALUATE_SENTENCE, inputValue, this.compare);\n        this.sentences.push(inputValue);\n      }\n      this.inputVisible = false;\n      this.inputValue = '';\n    },\n    colorChange: function colorChange(color) {\n      _eventBus.bus.$emit(_eventBus.SELECT_COLOR, this.color);\n    }\n  },\n  mounted: function mounted() {}\n};\n\n/***/ }),\n\n/***/ 316:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof2 = __webpack_require__(35);\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _keys = __webpack_require__(33);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _eventBus = __webpack_require__(11);\n\nvar _ModelConfig = __webpack_require__(715);\n\nvar _ModelConfig2 = _interopRequireDefault(_ModelConfig);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  name: 'ModelView',\n  components: { ModelConfig: _ModelConfig2.default },\n  data: function data() {\n    return {\n      compare: false,\n      shared: _eventBus.bus.state\n    };\n  },\n  mounted: function mounted() {\n    this.getAvailableModels();\n  },\n\n  computed: {},\n  methods: {\n    getAvailableModels: function getAvailableModels() {\n      var _this = this;\n\n      console.log(\"getting available models...\");\n      _eventBus.bus.loadAvailableModels();\n      if (this.shared.availableModels) return;\n      setTimeout(function () {\n        _this.getAvailableModels();\n      }, 2000);\n    },\n    modelColor: function modelColor(i) {\n      return i === 1 ? 'primary' : 'success';\n    },\n    toggleCompare: function toggleCompare() {\n      this.compare = !this.compare;\n      if (!this.compare) {\n        this.selectedModel2 = null;\n        this.selectedState2 = null;\n        this.states2 = [];\n        _eventBus.bus.$emit(_eventBus.SELECT_MODEL, null, true);\n        _eventBus.bus.$emit(_eventBus.SELECT_STATE, null, true);\n      }\n    },\n    stateName: function stateName(state) {\n      switch (state) {\n        case 'state_c':\n          return 'c_state';\n        case 'state_h':\n          return 'h_state';\n        case 'state':\n          return 'h_state';\n        default:\n          return 'Unknown';\n      }\n    }\n  },\n  watch: {}\n};\n\n\nfunction json2tree(json) {\n  var data = { label: '', children: [] };\n  if (isObject(json)) {\n    (0, _keys2.default)(json).map(function (key) {\n      var child = json2tree(json[key]);\n      child.label = key + child.label;\n      if (Array.isArray(json)) {\n        child.label = child.children[0].label;\n      }\n      data.children.push(child);\n    });\n  } else {\n    data.label = \": \" + json;\n    delete data.children;\n  }\n  return data;\n}\n\nfunction isObject(thing) {\n  return (typeof thing === 'undefined' ? 'undefined' : (0, _typeof3.default)(thing)) === \"object\" && thing !== null;\n}\n\n/***/ }),\n\n/***/ 317:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _sign = __webpack_require__(168);\n\nvar _sign2 = _interopRequireDefault(_sign);\n\nvar _set = __webpack_require__(72);\n\nvar _set2 = _interopRequireDefault(_set);\n\nvar _from = __webpack_require__(50);\n\nvar _from2 = _interopRequireDefault(_from);\n\nvar _classCallCheck2 = __webpack_require__(25);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(26);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _d = __webpack_require__(21);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _eventBus = __webpack_require__(11);\n\nvar _cluster = __webpack_require__(307);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar defaultConfig = {\n  rScale: 0.3,\n  radius: 3.0,\n  opacity: 0.4,\n  opacityHigh: 1.0,\n  defaultAlpha: 0.35,\n  repel: -5,\n  strength_thred: 0.6,\n  color: d3.scaleOrdinal(d3.schemeCategory10),\n  color2: d3.scaleOrdinal(d3.schemeCategory20),\n  clusterNum: 0\n};\n\nexports.default = {\n  name: 'ProjectGraph',\n  defaultConfig: defaultConfig,\n  data: function data() {\n    return {\n      fdGraph: null\n    };\n  },\n\n  props: {\n    width: {\n      type: Number,\n      default: 800\n    },\n    height: {\n      type: Number,\n      default: 800\n    },\n    graphData: {\n      type: Object,\n      required: true\n    },\n    svgId: {\n      type: String,\n      required: true\n    },\n    config: {\n      type: Object,\n      default: null\n    },\n    ready: {\n      type: Boolean,\n      default: false\n    }\n  },\n  watch: {\n    width: function width(newWidth) {\n      this.fdGraoh.updateScale();\n    },\n    height: function height(newWidth) {\n      this.fdGraph.updateScale();\n    },\n    ready: function ready(newReady) {\n      if (newReady) {\n        this.reset();\n      }\n    }\n  },\n  methods: {\n    reset: function reset() {\n      if (this.fdGraph) {\n        this.fdGraph.destroy();\n      }\n      var svg = document.getElementById(this.svgId);\n      this.fdGraph = new ForceDirectedGraph(svg, this.config);\n      normalize(this.graphData.states);\n      var extents = calExtent(this.graphData.states);\n      this.fdGraph.updateScale(extents);\n      this.fdGraph.buildGraph(this.graphData.strength, this.graphData.states);\n      this.fdGraph.insertElements();\n      this.fdGraph.initSimulation();\n      this.fdGraph.startSimulation();\n    },\n    refreshGraph: function refreshGraph(ready) {\n      if (ready) {\n        this.fdGraph.refresh();\n        this.fdGraph.clusterStates(this.graphData.signature);\n      }\n    }\n  },\n  mounted: function mounted() {\n    _eventBus.bus.$on('REFRESH_PROJECT_GRAPH', this.refreshGraph);\n  }\n};\n\n\nfunction normalize(points) {\n  var extents = calExtent(points);\n  var factor_x = 100 / (extents[0][1] - extents[0][0]);\n  var factor_y = 100 / (extents[1][1] - extents[1][0]);\n  var factor = Math.max(factor_x, factor_y);\n  for (var i = 0; i < points.length; i++) {\n    points[i].coords[0] *= factor;\n    points[i].coords[1] *= factor;\n  }\n}\n\nvar ForceDirectedGraph = function () {\n  function ForceDirectedGraph(svg, params, strengthfn) {\n    (0, _classCallCheck3.default)(this, ForceDirectedGraph);\n\n    var self = this;\n    this.svg = d3.select('#' + svg.id);\n    this.svgEl = svg;\n    this.graph = null;\n    this.simulation = null;\n    this.stateNodes = null;\n    this.wordNodes = null;\n    this.links = null;\n    this.scale = { x: null, y: null, invert_x: null, invert_y: null };\n    this.extents = null;\n    this.strengthfn = strengthfn || function (v) {\n      return Math.pow(v / 2, 3);\n    };\n    this.params = params;\n  }\n\n  (0, _createClass3.default)(ForceDirectedGraph, [{\n    key: 'buildGraph',\n    value: function buildGraph(words, states) {\n      var self = this;\n\n      states.forEach(function (e) {\n        e.id = \"\" + e.layer + \"-\" + e.state_id;\n        e.fx = e.coords[0];\n        e.fy = e.coords[1];\n        e.links = [];\n      });\n\n      words.forEach(function (e) {\n        e.id = e.word;\n        e.links = [];\n      });\n\n\n      var layers = (0, _from2.default)(new _set2.default(states.map(function (d) {\n        return d.layer;\n      }))).sort();\n\n      var links = [];\n      var id2states = {};\n      states.forEach(function (d) {\n        id2states[d.id] = d;\n      });\n      words.forEach(function (node) {\n        var i = 0;\n        node.strength.forEach(function (strengths) {\n          var j = 0;\n          strengths.forEach(function (f) {\n            var intensity = f;\n            if (Math.abs(intensity) > self.params.strength_thred) {\n              var link = {\n                source: \"\" + layers[i] + \"-\" + j,\n                target: node.id,\n                strength: self.strengthfn(Math.abs(intensity)),\n                type: (0, _sign2.default)(f) };\n              link._source = id2states[link.source];\n              link._target = node;\n\n              links.push(link);\n\n              id2states[link.source].links.push(link);\n              node.links.push(link);\n            }\n            j++;\n          });\n          i++;\n        });\n      });\n      console.log(\"done building graph\");\n      this.graph = {\n        nodes: words.concat(states),\n        links: links,\n        id2states: id2states,\n        wordNodes: words,\n        stateNodes: states\n      };\n    }\n  }, {\n    key: 'initSimulation',\n    value: function initSimulation() {\n      var repelForce = d3.forceManyBody().strength(-30).distanceMax(4);\n      var init = repelForce.initialize;\n      repelForce.initialize = function (nodes) {\n        init(nodes.filter(function (d) {\n          d.hasOwnProperty(\"word\");\n        }));\n      };\n\n      var collideForce = d3.forceCollide().strength(0.5).radius(1);\n      this.simulation = d3.forceSimulation().alpha(this.params.defaultAlpha).force(\"link\", d3.forceLink().id(function (d) {\n        return d.id;\n      }).distance(function (l) {\n        return l.type < 0 ? 50 : 5;\n      }).strength(function (d) {\n        return d.strength;\n      })).force(\"collide\", collideForce).force(\"charge\", repelForce);\n    }\n  }, {\n    key: 'insertElements',\n    value: function insertElements() {\n      var self = this;\n      var g_states = this.svg.append('g').attr('class', 'states');\n      this.stateNodes = g_states.selectAll('circle').data(this.graph.stateNodes).enter().append(\"circle\").attr(\"r\", function (d) {\n        if (d.links.length > 0) return d.links.length * self.params.rScale + self.params.radius;\n        return 0;\n      }).style(\"fill\", function (d, i) {\n        return self.params.color(d.label);\n      }).classed(\"active\", false).on(\"mouseover\", function (d) {\n        return mouseover(d, self);\n      }).on(\"mouseout\", function (d) {\n        return mouseout(d, self);\n      }).on(\"click\", function (d) {\n        return clickState(d, self);\n      });\n\n      this.stateNodes.append(\"title\").text(function (d) {\n        return d.id;\n      });\n\n      this.links = this.svg.append(\"g\").attr(\"class\", \"links\").selectAll(\"line\").data(this.graph.links).enter().append(\"line\").classed(\"active\", false);\n\n      this.wordNodes = this.svg.append(\"g\").attr(\"class\", \"words\").selectAll(\"text\").data(this.graph.wordNodes).enter().append(\"text\").classed(\"active\", false).call(d3.drag().on(\"start\", function (d) {\n        if (!d3.event.active) self.simulation.alphaTarget(self.params.defaultAlpha).restart();\n        d.fx = d.x;\n        d.fy = d.y;\n\n        d.links.forEach(function (d) {\n          d.active = true;\n        });\n        refreshLinkStyle(self);\n      }).on(\"drag\", function (d) {\n        d.fx = self.scale.invert_x(d3.mouse(self.svgEl)[0]);\n        d.fy = self.scale.invert_y(d3.mouse(self.svgEl)[1]);\n      }).on(\"end\", function (d) {\n        if (!d3.event.active) self.simulation.alphaTarget(0);\n        d.fx = null;\n        d.fy = null;\n        d.links.forEach(function (d) {\n          d.active = false;\n        });\n        refreshLinkStyle(self);\n      })).text(function (d) {\n        return d.id;\n      });\n\n\n      refreshLinkStyle(self);\n      refreshWordStyle(self);\n      refreshStateStyle(self);\n    }\n  }, {\n    key: 'startSimulation',\n    value: function startSimulation() {\n      var self = this;\n      self.simulation.nodes(self.graph.nodes).on(\"tick\", function () {\n        return self.ticked(self.links, self.wordNodes, self.stateNodes);\n      });\n\n      self.simulation.force(\"link\").links(self.graph.links);\n    }\n  }, {\n    key: 'ticked',\n    value: function ticked(links, wordNodes, stateNodes) {\n      var _graph = this;\n      links.attr(\"x1\", function (d) {\n        return _graph.scale.x(d.source.x);\n      }).attr(\"y1\", function (d) {\n        return _graph.scale.y(d.source.y);\n      }).attr(\"x2\", function (d) {\n        return _graph.scale.x(d.target.x);\n      }).attr(\"y2\", function (d) {\n        return _graph.scale.y(d.target.y);\n      });\n\n      wordNodes.attr(\"x\", function (d) {\n        return _graph.scale.x(d.x);\n      }).attr(\"y\", function (d) {\n        return _graph.scale.y(d.y);\n      });\n\n      stateNodes.attr(\"cx\", function (d) {\n        return _graph.scale.x(d.x);\n      }).attr(\"cy\", function (d) {\n        return _graph.scale.y(d.y);\n      });\n    }\n  }, {\n    key: 'updateScale',\n    value: function updateScale(extents) {\n      if (extents) {\n        this.extents = extents;\n      }\n      var width = this.width,\n          height = this.height;\n      var xExtent = this.extents[0],\n          yExtent = this.extents[1];\n      var xCenter = (xExtent[0] + xExtent[1]) / 2,\n          yCenter = (yExtent[0] + yExtent[1]) / 2;\n      var scaleFactor = 0.9 * Math.min(width / (xExtent[1] - xExtent[0]), height / (yExtent[1] - yExtent[0]));\n      this.scale.x = function (_x) {\n        return (_x - xCenter) * scaleFactor + width / 2;\n      };\n      this.scale.y = function (_y) {\n        return (yCenter - _y) * scaleFactor + height / 2;\n      };\n      this.scale.invert_x = function (_x) {\n        return (_x - width / 2) / scaleFactor + xCenter;\n      };\n      this.scale.invert_y = function (_y) {\n        return yCenter - (_y - height / 2) / scaleFactor;\n      };\n    }\n  }, {\n    key: 'clusterStates',\n    value: function clusterStates(stateSignature) {\n      var _this = this;\n\n      var clusterNum = this.params.clusterNum;\n      if (clusterNum < 2) return;\n      var clusterAssignments = (0, _cluster.kmeans)(stateSignature, clusterNum, 1000);\n      this.graph.stateNodes.forEach(function (node, i) {\n        node.cluster = clusterAssignments[i];\n      });\n      this.stateNodes.style('fill', function (d, i) {\n        if (clusterNum < 11) return _this.params.color(d.cluster);\n        return _this.params.color2(d.cluster);\n      });\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      console.log('Destroying Graph ' + this.svgEl.id);\n      this.simulation.nodes([]);\n      this.simulation.force(\"link\").links([]);\n      this.links.remove();\n      this.stateNodes.remove();\n      this.wordNodes.remove();\n    }\n  }, {\n    key: 'refresh',\n    value: function refresh() {\n      refreshLinkStyle(this);\n      refreshStateStyle(this);\n      refreshWordStyle(this);\n    }\n  }, {\n    key: 'width',\n    get: function get() {\n      return this.svgEl.clientWidth;\n    }\n  }, {\n    key: 'height',\n    get: function get() {\n      return this.svgEl.clientHeight;\n    }\n  }]);\n  return ForceDirectedGraph;\n}();\n\n;\n\nfunction calExtent(points) {\n  var xExtent = d3.extent(points, function (d) {\n    return d.coords[0];\n  }),\n      yExtent = d3.extent(points, function (d) {\n    return d.coords[1];\n  });\n  return [xExtent, yExtent];\n}\n\nfunction mouseover(d, g) {\n  if (d.active) return;\n  d3.select(this).classed(\"active\", true);\n  d.links.forEach(function (l) {\n    l.active = true;\n    l._target.active = true;\n  });\n  refreshLinkStyle(g);\n  refreshWordStyle(g);\n}\n\nfunction mouseout(d, g) {\n  if (d.active) return;\n  d3.select(this).classed(\"active\", false);\n  d.links.forEach(function (l) {\n    l.active = false;\n    l._target.active = false;\n  });\n  refreshLinkStyle(g);\n  refreshWordStyle(g);\n}\n\nfunction clickState(d, g) {\n  var isActive = d.active;\n  if (isActive) {\n    d.active = false;\n    mouseout(d, g);\n  } else {\n    mouseover(d, g);\n    d.active = true;\n  }\n  refreshLinkStyle(g);\n  refreshWordStyle(g);\n  d3.select(this).classed(\"active\", d.active);\n}\n\nfunction refreshLinkStyle(g) {\n  g.links.classed(\"active\", function (d) {\n    return d.active;\n  }).style(\"opacity\", function (d) {\n    return d.strength * (d.active ? g.params.opacityHigh : g.params.opacity);\n  }).style(\"stroke\", function (d) {\n    if (d.active) return \"#6b7\";\n    if (d.type < 0) return \"#68b\";\n    return \"#c66\";\n  });\n}\n\nfunction refreshStateStyle(g) {\n  g.stateNodes.classed(\"active\", function (d) {\n    return d.active;\n  });\n}\n\nfunction refreshWordStyle(g) {\n  g.wordNodes.classed(\"active\", function (d) {\n    return d.active;\n  });\n}\n\n/***/ }),\n\n/***/ 318:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = __webpack_require__(34);\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _assign = __webpack_require__(71);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _d = __webpack_require__(21);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _dataService = __webpack_require__(32);\n\nvar _dataService2 = _interopRequireDefault(_dataService);\n\nvar _eventBus = __webpack_require__(11);\n\nvar _ProjectGraph = __webpack_require__(717);\n\nvar _ProjectGraph2 = _interopRequireDefault(_ProjectGraph);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  name: 'ProjectView',\n  props: {\n    width: {\n      type: Number,\n      default: 800\n    },\n    height: {\n      type: Number,\n      default: 600\n    }\n  },\n  data: function data() {\n    var drawConfig = (0, _assign2.default)({}, _ProjectGraph2.default.defaultConfig);\n    return {\n      model: '',\n\n      states: '',\n      ready: false,\n      graphData: { states: null, strength: null },\n      config: drawConfig,\n      cache: {},\n      shared: _eventBus.bus.state\n    };\n  },\n\n  components: { ProjectGraph: _ProjectGraph2.default },\n  computed: {\n    selectedState: function selectedState() {\n      return this.shared.selectedState;\n    }\n  },\n  watch: {\n    selectedState: function selectedState(newState, oldState) {\n      _eventBus.bus.state.selectedState = newState;\n      if (newState === oldState) {\n        return;\n      }\n      if (newState === 'state' || newState === 'state_c' || newState === 'state_h') {\n        this.reset();\n      }\n    }\n  },\n\n  methods: {\n    paneId: function paneId(model, state) {\n      return model + '-' + state + '-svg';\n    },\n    reset: function reset() {\n      var _this = this;\n\n      this.ready = false;\n      delete this.graphData.signature;\n      this.config = (0, _assign2.default)({}, _ProjectGraph2.default.defaultConfig);\n      if (this.selectedState === 'state') {\n        this.config.strength_thred = 0.9;\n      }\n      if (this.selectedState === 'state_h') {\n        this.config.strength_thred = 0.5;\n      }\n      if (this.model === 'IMDB') {\n        this.config.strength_thred = 0.0;\n        this.config.strengthFn = function (v) {\n          return Math.pow(v * 30, 2);\n        };\n        this.config.farDistance = 120;\n      }\n      var cacheTag = this.paneId(this.model, this.selectedState);\n      if (Object.prototype.hasOwnProperty.call(this.cache, cacheTag)) {\n        (0, _assign2.default)(this.graphData, this.cache[cacheTag]);\n        setTimeout(function () {\n          _this.ready = true;\n        }, 100);\n        return;\n      }\n\n      var p1 = _dataService2.default.getProjectionData(this.model, this.selectedState, {}, function (response) {\n        _this.graphData.states = response.data;\n        console.log('states data loaded');\n      });\n      var p2 = _dataService2.default.getStrengthData(this.model, this.selectedState, { top_k: 200 }, function (response) {\n        var strengthData = response.data;\n        _this.graphData.strength = [strengthData[163]].concat(strengthData.slice(20, 40));\n        console.log('strength data loaded');\n      });\n      var pAll = _promise2.default.all([p1, p2]).then(function (values) {\n        _this.cache[cacheTag] = { states: _this.graphData.states, strength: _this.graphData.strength };\n        setTimeout(function () {\n          _this.ready = true;\n        }, 100);\n\n        _dataService2.default.getStateSignature(_this.model, _this.selectedState, {}, function (response) {\n          _this.graphData.signature = response.data;\n          _this.cache[cacheTag].signature = _this.graphData.signature;\n          console.log('signature data loaded');\n        });\n      }, function (errResponse) {\n        console.log(\"Failed to build force graph!\");\n      });\n    },\n    configWatcher: function configWatcher() {\n      var _this2 = this;\n\n      if (this.ready === false) return;\n      if (this.config.clusterNum > 1 && !Object.prototype.hasOwnProperty.call(this.graphData, 'signature')) {\n        _dataService2.default.getStateSignature(this.model, this.selectedState, {}, function (response) {\n          _this2.graphData.signature = response.data;\n          console.log('signature data loaded');\n          _eventBus.bus.$emit(\"REFRESH_PROJECT_GRAPH\", _this2.ready);\n        });\n        return;\n      }\n      _eventBus.bus.$emit(\"REFRESH_PROJECT_GRAPH\", this.ready);\n    }\n  },\n\n  mounted: function mounted() {\n    var _this3 = this;\n\n    _eventBus.bus.$on(_eventBus.SELECT_MODEL, function (modelName, compare) {\n      if (compare) return;\n      console.log('selected model: ' + modelName);\n      _this3.model = modelName;\n      _eventBus.bus.loadModelConfig(modelName).then(function (_) {\n        var states = _eventBus.bus.availableStates(modelName);\n        if (states) {\n          _this3.states = states;\n\n          setTimeout(function () {\n            if (_this3.states[0] === _this3.selectedState) {\n              _this3.reset();\n            }\n            _this3.selectedState = null;\n          }, 100);\n        } else {\n          console.log(\"Unknown cell type!\");\n        }\n      });\n    });\n  }\n};\n\n/***/ }),\n\n/***/ 319:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _toConsumableArray2 = __webpack_require__(73);\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _promise = __webpack_require__(34);\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _d = __webpack_require__(21);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _dataService = __webpack_require__(32);\n\nvar _dataService2 = _interopRequireDefault(_dataService);\n\nvar _eventBus = __webpack_require__(11);\n\nvar _chart = __webpack_require__(165);\n\nvar _cloud = __webpack_require__(97);\n\nvar _sentence = __webpack_require__(166);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  name: 'TestView',\n  data: function data() {\n    return {\n      chart: null,\n      model: 'PTB-LSTM',\n      state: 'state_c'\n    };\n  },\n\n  props: {},\n  computed: {\n    svgId: function svgId() {\n      return 'svg-test';\n    }\n  },\n  methods: {\n    init: function init() {\n      var svg = d3.select('#' + this.svgId).attr('width', 500).attr('height', 500);\n      this.chart = new _chart.Chart(svg, 500, 500).background('lightgray', 0.0);\n    },\n    draw2: function draw2() {\n      var words = ['you', 'want', 'more', 'words', 'than', 'this', 'he', 'is', 'she', 'they', 'what', 'million', 'it', '$', '<unk>', 'good', 'i', 'by'].map(function (d, i) {\n        return { text: d, size: 5 + Math.random() * 25, type: 0 + Math.round(Math.random()) };\n      });\n\n      function showNewWords(vis, i) {\n        i = i || 0;\n\n        vis.update(words);\n        setTimeout(function () {\n          showNewWords(vis, i + 1);\n        }, 2000);\n      }\n\n      var myWordCloud = new _cloud.WordCloud(d3.select('#' + this.svgId), 120, 120).transform('translate(200,200)');\n\n      showNewWords(myWordCloud);\n    },\n    draw: function draw() {\n      var _this = this;\n\n      _dataService2.default.getWordStatistics(this.model, this.state, -1, 'he', function (response) {\n        var data = response.data;\n        var mean = data.sort_idx.map(function (d, i) {\n          return data.mean[d];\n        });\n        var range = data.sort_idx.map(function (d, i) {\n          return [data.low1[d], data.high1[d]];\n        });\n        var range2 = data.sort_idx.map(function (d, i) {\n          return [data.low2[d], data.high2[d]];\n        });\n\n        console.log(data);\n        var subchart = _this.chart.subChart(250, 200).margin(5, 5, 20, 30).xAxis().yAxis();\n        subchart.line(mean, function (d, i) {\n          return i;\n        }, function (d) {\n          return d;\n        });\n        subchart.area(range, function (d, i) {\n          return i;\n        }, function (d) {\n          return d[0];\n        }, function (d) {\n          return d[1];\n        }).attr('opacity', 0.4);\n        subchart.area(range2, function (d, i) {\n          return i;\n        }, function (d) {\n          return d[0];\n        }, function (d) {\n          return d[1];\n        }).attr('opacity', 0.2);\n      });\n      var processed = void 0;\n      var p1 = _dataService2.default.getStateStatistics(this.model, this.state, -1, 200, function (response) {\n        var data = response.data;\n\n        processed = data.mean[0].map(function (_, i) {\n          return {\n            freqs: data.freqs,\n            mean: data.mean.map(function (m) {\n              return m[i];\n            }),\n            low1: data.low1.map(function (m) {\n              return m[i];\n            }),\n            low2: data.low2.map(function (m) {\n              return m[i];\n            }),\n            high1: data.high1.map(function (m) {\n              return m[i];\n            }),\n            high2: data.high2.map(function (m) {\n              return m[i];\n            }),\n            rank: data.sort_idx.map(function (indice) {\n              return indice.findIndex(function (idx) {\n                return idx === i;\n              });\n            })\n          };\n        });\n      });\n      var vocab = void 0;\n      var p2 = _dataService2.default.getVocab(this.model, 200, function (response) {\n        vocab = response.data;\n      });\n      _promise2.default.all([p1, p2]).then(function () {\n        console.log(processed);\n        console.log(vocab);\n        var dim = 10;\n        var data = processed[dim];\n        data = data.freqs.map(function (f, i) {\n          return {\n            freqs: f,\n            mean: data.mean[i],\n            range1: [data.low1[i], data.high1[i]],\n            range2: [data.low2[i], data.high2[i]],\n            rank: data.rank[i],\n            word_id: i,\n            word: vocab[i]\n          };\n        });\n        var boxData = data.sort(function (a, b) {\n          return a.mean - b.mean;\n        });\n\n        var boxes = boxData.slice(0, 10).concat(boxData.slice(boxData.length - 10));\n        var subchart2 = _this.chart.subChart(250, 200).translate(250, 0).margin(5, 30, 40, 5).xAxis().yAxis('right');\n        subchart2.axis.x.tickFormat(function (d, i) {\n          return boxes[d].word;\n        }).ticks(20);\n\n        subchart2.box(boxes, 5, function (d, i) {\n          return i;\n        }, function (d) {\n          return d.mean;\n        }, function (d) {\n          return d.range1;\n        }, function (d) {\n          return d.range2;\n        }).attr('fill', 'steelblue').attr('stroke', 'gray').attr('fill-opacity', 0.5);\n        _this.chart.draw();\n\n        subchart2.axisHandles.x.selectAll('text').attr('y', 0).attr('x', -9).attr('dy', '.35em').attr('transform', 'rotate(-90)').style('text-anchor', 'end');\n      });\n    },\n    draw_arc: function draw_arc() {\n      var color = d3.scaleOrdinal(d3.schemeCategory10);\n      var width = 500,\n          height = 500;\n      var svg = d3.select('#' + this.svgId).attr('width', width).attr('height', height);\n\n      var data = [{ start: 0, end: 2 * Math.PI / 8 }, { start: 2 * Math.PI / 8, end: 2 * Math.PI / 2 }, { start: 2 * Math.PI / 2, end: 2 * Math.PI }];\n\n      var g = svg.append('g').attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')');\n      var arc = d3.arc().innerRadius(230).outerRadius(240);\n\n\n      data.forEach(function (d, i) {\n        g.append('path').datum({ startAngle: d.start, endAngle: d.end }).style('fill', color(i)).attr('d', arc);\n\n        console.log(arc.centroid({ startAngle: d.start, endAngle: d.end }));\n      });\n    },\n    draw4: function draw4() {\n      var color = d3.scaleOrdinal(d3.schemeCategory10);\n      var width = 500,\n          height = 500;\n      var rectHeight = 20;\n      var rectWidth = 50;\n      var rectInterval = 10;\n      var data = ['this', 'is', 'foy', 'test', '<eos>'];\n\n      var x = d3.scaleTime().domain([new Date(2013, 7, 1), new Date(2013, 7, 15) - 1]).rangeRound([0, width]);\n      var g = d3.select('#' + this.svgId).attr('width', width).attr('height', height).append('g').attr(\"transform\", \"translate(100,\" + height / 3 + \")\");\n\n      var texts = g.selectAll('text').data(data).enter().append('text').text(function (d) {\n        return d;\n      }).style('text-anchor', 'middle').attr('transform', function (d, i) {\n        return 'translate(' + [(rectWidth + rectInterval) * i + rectWidth / 2, rectHeight / 1.3] + ')';\n      });\n\n      var rect_g = g.append('g');\n      data.forEach(function (d, i) {\n        if (i > 0) {\n          rect_g.append('rect').attr('x', i * (rectWidth + rectInterval) - rectInterval).attr('y', '0').attr('width', rectInterval).attr('height', rectHeight).attr('fill', 'lightgray').attr('stroke-width', 2).attr('stroke', 'blue').attr('opacity', 0.2);\n        }\n        rect_g.append('rect').attr('x', i * (rectWidth + rectInterval)).attr('y', '0').attr('width', rectWidth).attr('height', rectHeight).attr('fill', 'lightgray').attr('stroke-width', 2).attr('stroke', 'blue').attr('opacity', 0.2);\n      });\n\n      g.append('g').call(d3.brushX().extent([[0, 0], [(rectWidth + rectInterval) * data.length - rectInterval, rectHeight]]).on('end', brushended));\n\n      function brushended() {\n        if (!d3.event.sourceEvent) return;\n        if (!d3.event.selection) return;\n        var extent = d3.event.selection;\n        extent[0] = Math.round(extent[0] / (rectWidth + rectInterval)) * (rectWidth + rectInterval);\n        extent[1] = Math.max(Math.round(extent[1] / (rectWidth + rectInterval)) * (rectWidth + rectInterval) - rectInterval, extent[0]);\n        console.log(d3.event.selection);\n        d3.select(this).transition().call(d3.event.target.move, extent);\n      }\n    },\n    drawRect: function drawRect(g, dataLength, func) {\n      var self = this;\n      var rectSize = [20, 50];\n      var minBrushLength = 3;\n      g.selectAll('.wordRect').data(d3.range(dataLength)).enter().append('rect').attr('x', 0).attr('y', function (d) {\n        return d * rectSize[1];\n      }).attr('width', rectSize[0]).attr('height', rectSize[1]).attr('fill', 'lightgray').attr('stroke-width', 2).attr('stroke', 'blue').attr('opacity', 0.2);\n      var brush = d3.brushY().extent([[0, 0], [rectSize[0], rectSize[1] * dataLength]]).on('end', function () {\n        if (!d3.event.sourceEvent) return;\n        if (!d3.event.selection) return;\n        var extent = d3.event.selection;\n        extent[0] = Math.round(extent[0] / rectSize[1]) * rectSize[1];\n        extent[1] = Math.round(extent[1] / rectSize[1]) * rectSize[1];\n        d3.select(this).transition().call(d3.event.target.move, extent);\n        console.log(d3.event.selection);\n        func([Math.round(extent[0] / rectSize[1]), Math.round(extent[1] / rectSize[1])]);\n      });\n      g.append('g').call(brush).call(brush.move, [0, rectSize[1] * dataLength]);\n    },\n    draw5: function draw5() {\n      var _this2 = this;\n\n      var p1 = _eventBus.bus.loadCoCluster('PTB-LSTM', 'state_c', 10, { top_k: 300, mode: 'raw' });\n      var record = _eventBus.bus.evalSentence('What can I do for you?', 'PTB-LSTM');\n      var p2 = record.evaluate();\n      var clientHeight = 500;\n      var sent = null;\n      var svg = d3.select('#' + this.svgId);\n      var sent_g = svg.append('g');\n\n      _promise2.default.all([p1, p2]).then(function (values) {\n        var coCluster = _eventBus.bus.getCoCluster('PTB-LSTM', 'state_c', 10, { top_k: 300, mode: 'raw' });\n        var sentenceRecord = record.getRecords('state_c', -1);\n        console.log(record);\n        var rect_g = svg.append('g').attr('transform', 'translate(0, 50)');\n        sent = (0, _sentence.sentence)(sent_g).transform('translate(100, 0)').size([50, clientHeight]).sentence(sentenceRecord).coCluster(coCluster).words(record.tokens).draw();\n\n        console.log(sent.strengthByCluster);\n        _this2.drawRect(rect_g, record.tokens.length, updateSentence);\n      });\n\n      function updateSentence(extent_) {\n        var _record$tokens;\n\n        console.log('extent_ is ' + extent_);\n        var words = (_record$tokens = record.tokens).slice.apply(_record$tokens, (0, _toConsumableArray3.default)(extent_));\n        console.log('words is ' + words);\n        var scaleFactor = record.tokens.length / words.length;\n        scaleFactor = Math.min(scaleFactor, 2);\n        var newHeight = scaleFactor * clientHeight;\n        var translateY = sent.getWordPos(extent_[0])[1];\n        sent.transform('scale(' + scaleFactor + ')translate(' + [100 / scaleFactor, -translateY] + ')');\n      }\n    },\n    draw3: function draw3() {\n      var _this3 = this;\n\n      var p1 = _eventBus.bus.loadCoCluster('PTB-LSTM', 'state_c', 10, { top_k: 300, mode: 'raw' });\n      var record = _eventBus.bus.evalSentence('What can I do for you?', 'PTB-LSTM');\n      var p2 = record.evaluate();\n      _promise2.default.all([p1, p2]).then(function (values) {\n        var coCluster = _eventBus.bus.getCoCluster('PTB-LSTM', 'state_c', 10, { top_k: 300, mode: 'raw' });\n        var sentenceRecord = record.getRecords('state_c', -1);\n        console.log(record);\n        var a = (0, _sentence.sentence)(d3.select('#' + _this3.svgId).append('g')).transform('translate(100, 10)').size([50, 450]).sentence(sentenceRecord).coCluster(coCluster).words(record.tokens).draw();\n        console.log(a.strengthByCluster);\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.init();\n\n    this.draw5();\n  }\n};\n\n/***/ }),\n\n/***/ 32:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _keys = __webpack_require__(33);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _promise = __webpack_require__(34);\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _vue = __webpack_require__(10);\n\nvar _vue2 = _interopRequireDefault(_vue);\n\nvar _vueResource = __webpack_require__(733);\n\nvar _vueResource2 = _interopRequireDefault(_vueResource);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_vue2.default.use(_vueResource2.default);\n\nvar devMainUrl =  false ? 'http://localhost:5000' : location.origin;\n\nvar $http = _vue2.default.http;\n\nvar cache = {};\n\nvar getUrlData = function getUrlData(url, callback) {\n  if (url in cache) {\n    return _promise2.default.resolve(callback(cache[url]));\n  } else {\n    return $http.get(url).then(function (response) {\n      if (response.status === 200) cache[url] = { status: 200, data: response.data };\n      callback(cache[url]);\n    }, function (errResponse) {\n      console.log(errResponse);\n      throw errResponse;\n    });\n  }\n};\n\nvar getProjectionData = function getProjectionData(model, state) {\n  var parameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var callback = arguments[3];\n\n  var url = devMainUrl + '/projection?model=' + model + '&state=' + state;\n  (0, _keys2.default)(parameters).forEach(function (p) {\n    url += '&' + p + '=' + parameters[p];\n  });\n  return getUrlData(url, callback);\n};\n\nvar getStrengthData = function getStrengthData(model, state) {\n  var parameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var callback = arguments[3];\n\n  var url = devMainUrl + '/strength?model=' + model + '&state=' + state;\n  (0, _keys2.default)(parameters).forEach(function (p) {\n    url += '&' + p + '=' + parameters[p];\n  });\n  return getUrlData(url, callback);\n};\n\nvar getStateSignature = function getStateSignature(model, state) {\n  var parameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var callback = arguments[3];\n\n  var url = devMainUrl + '/state_signature?model=' + model + '&state=' + state;\n  (0, _keys2.default)(parameters).forEach(function (p) {\n    url += '&' + p + '=' + parameters[p];\n  });\n  return getUrlData(url, callback);\n};\n\nvar getModels = function getModels(callback) {\n  var url = devMainUrl + '/models/available';\n  return getUrlData(url, callback);\n};\n\nvar getModelConfig = function getModelConfig(model, callback) {\n  var url = devMainUrl + '/models/config/' + model;\n  return getUrlData(url, callback);\n};\n\nvar getTextEvaluation = function getTextEvaluation(model, text, callback) {\n\n  var url = devMainUrl + '/models/evaluate';\n\n  return $http.post(url, { model: model, text: text }).then(function (response) {\n    callback(response);\n  }, function (errResponse) {\n    console.log(errResponse);\n    throw errResponse;\n  });\n};\n\nvar getCoCluster = function getCoCluster(model, state, n_cluster) {\n  var parameters = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var callback = arguments[4];\n\n  var url = devMainUrl + '/co_clusters?model=' + model + '&state=' + state + '&n_cluster=' + n_cluster;\n  (0, _keys2.default)(parameters).forEach(function (p) {\n    url += '&' + p + '=' + parameters[p];\n  });\n  return getUrlData(url, callback);\n};\n\nvar getVocab = function getVocab(model) {\n  var top_k = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;\n  var callback = arguments[2];\n\n  var url = devMainUrl + '/vocab?model=' + model + '&top_k=' + top_k;\n  return getUrlData(url, callback);\n};\n\nvar getStateStatistics = function getStateStatistics(model, state, layer, top_k, callback) {\n  console.log('If no statistics data available, try visit url ' + devMainUrl + '/models/record_default?model=' + model + '&set=test for generating state records!');\n  var url = devMainUrl + '/state_statistics?model=' + model + '&state=' + state + '&layer=' + layer + '&top_k=' + top_k;\n  return getUrlData(url, callback);\n};\n\nvar getWordStatistics = function getWordStatistics(model, state, layer, word, callback) {\n  var url = devMainUrl + '/word_statistics?model=' + model + '&state=' + state + '&layer=' + layer + '&word=' + word;\n  return getUrlData(url, callback);\n};\n\nvar getPosStatistics = function getPosStatistics(model, top_k, callback) {\n  var url = devMainUrl + '/pos_statistics?model=' + model + '&top_k=' + top_k;\n  return getUrlData(url, callback);\n};\n\nexports.default = {\n  getProjectionData: getProjectionData,\n  getStrengthData: getStrengthData,\n\n  getModels: getModels,\n  getModelConfig: getModelConfig,\n  getTextEvaluation: getTextEvaluation,\n  getCoCluster: getCoCluster,\n  getVocab: getVocab,\n  getStateSignature: getStateSignature,\n  getStateStatistics: getStateStatistics,\n  getWordStatistics: getWordStatistics,\n  getPosStatistics: getPosStatistics\n};\n\n/***/ }),\n\n/***/ 320:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _dataService = __webpack_require__(32);\n\nvar _dataService2 = _interopRequireDefault(_dataService);\n\nvar _eventBus = __webpack_require__(11);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar activeColorScheme = [\"88, 126, 182\", \"201, 90, 95\"];\nexports.default = {\n  name: 'TextView',\n  data: function data() {\n    return {\n      inputs: null,\n      shared: _eventBus.bus.state,\n      isInput: true,\n      states: [],\n      selectedState: null,\n      selectedLayer: -1,\n      selectedDim: null,\n      cache: {},\n      oldInputs: null,\n      tokens: null,\n      records: null,\n      layerNum: 0\n    };\n  },\n\n  computed: {\n    displayControl: function displayControl() {\n      return this.states.length !== 0;\n    },\n\n    layerSize: function layerSize() {\n      var selectedModel = this.shared.selectedModel;\n      return _eventBus.bus.layerSize(selectedModel, this.selectedLayer);\n    },\n    sentences: function sentences() {\n      var _this = this;\n\n      if (this.records) {\n        return this.tokens.map(function (sentence, i) {\n          return sentence.map(function (token, j) {\n            return { text: token, value: _this.records[i][j][_this.selectedState][_this.selectedLayer][_this.selectedDim] };\n          });\n        });\n      }\n      return [];\n    }\n  },\n  watch: {},\n  methods: {\n    color: function color(value) {\n      if (value < 0) return 'rgba(' + activeColorScheme[0] + ',' + -value + ')';\n      return 'rgba(' + activeColorScheme[1] + ',' + value + ')';\n    },\n    onSubmit: function onSubmit() {\n      var _this2 = this;\n\n      if (this.selectedState === null) return false;\n      var selectedModel = this.shared.selectedModel;\n      if (this.inputs === this.oldInputs) return true;\n\n      _dataService2.default.getTextEvaluation(selectedModel, this.inputs, function (response) {\n        var data = response.data;\n        _this2.tokens = data.tokens;\n        _this2.records = data.records;\n        _this2.oldInputs = _this2.inputs;\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    _eventBus.bus.$on(_eventBus.SELECT_MODEL, function (modelName) {\n      var states = _eventBus.bus.availableStates(modelName);\n      if (states) {\n        _this3.states = states;\n        _this3.layerNum = _eventBus.bus.layerNum(modelName);\n        _this3.selectedLayer = _this3.layerNum - 1;\n        _this3.selectedState = _this3.states[0];\n      } else {\n        _this3.states = [];\n      }\n    });\n  }\n};\n\nfunction colorGrad(color1, color2, ratio) {\n  return color1.map(function (c, i) {\n    return c * ratio + color2[i] * (1 - ratio);\n  });\n}\n\n/***/ }),\n\n/***/ 696:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 697:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 698:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 699:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 700:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 701:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 702:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 703:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 704:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 705:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 706:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 707:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 711:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(702)\n\nvar Component = __webpack_require__(12)(\n  /* script */\n  __webpack_require__(310),\n  /* template */\n  __webpack_require__(727),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 712:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(707)\n\nvar Component = __webpack_require__(12)(\n  /* script */\n  __webpack_require__(311),\n  /* template */\n  __webpack_require__(732),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 713:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(703)\n\nvar Component = __webpack_require__(12)(\n  /* script */\n  __webpack_require__(313),\n  /* template */\n  __webpack_require__(728),\n  /* scopeId */\n  \"data-v-6411595c\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 714:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(706)\n\nvar Component = __webpack_require__(12)(\n  /* script */\n  __webpack_require__(314),\n  /* template */\n  __webpack_require__(731),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 715:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(704)\n\nvar Component = __webpack_require__(12)(\n  /* script */\n  __webpack_require__(315),\n  /* template */\n  __webpack_require__(729),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 716:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(705)\n\nvar Component = __webpack_require__(12)(\n  /* script */\n  __webpack_require__(316),\n  /* template */\n  __webpack_require__(730),\n  /* scopeId */\n  \"data-v-820c27c2\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 717:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(699)\n\nvar Component = __webpack_require__(12)(\n  /* script */\n  __webpack_require__(317),\n  /* template */\n  __webpack_require__(724),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 718:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(697)\n\nvar Component = __webpack_require__(12)(\n  /* script */\n  __webpack_require__(318),\n  /* template */\n  __webpack_require__(722),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 719:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(701)\n\nvar Component = __webpack_require__(12)(\n  /* script */\n  __webpack_require__(319),\n  /* template */\n  __webpack_require__(726),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 720:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(696)\n\nvar Component = __webpack_require__(12)(\n  /* script */\n  __webpack_require__(320),\n  /* template */\n  __webpack_require__(721),\n  /* scopeId */\n  \"data-v-0de1765e\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 721:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"text-view\"\n  }, [_c('h4', {\n    staticClass: \"normal\"\n  }, [_vm._v(\"Text\")]), _vm._v(\" \"), _c('hr'), _vm._v(\" \"), (_vm.displayControl) ? _c('div', {\n    staticClass: \"state-select\"\n  }, [_c('el-radio-group', {\n    attrs: {\n      \"size\": \"small\"\n    },\n    model: {\n      value: (_vm.selectedState),\n      callback: function($$v) {\n        _vm.selectedState = $$v\n      },\n      expression: \"selectedState\"\n    }\n  }, _vm._l((_vm.states), function(state) {\n    return _c('el-radio-button', {\n      attrs: {\n        \"label\": state\n      }\n    })\n  })), _vm._v(\" \"), _c('div', {\n    staticClass: \"input\"\n  }, [_c('el-col', {\n    staticClass: \"label\",\n    attrs: {\n      \"span\": 4\n    }\n  }, [_c('span', [_vm._v(\"Layer:\")])]), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 8\n    }\n  }, [_c('el-input-number', {\n    staticStyle: {\n      \"width\": \"80%\"\n    },\n    attrs: {\n      \"size\": \"small\",\n      \"max\": _vm.layerNum - 1\n    },\n    model: {\n      value: (_vm.selectedLayer),\n      callback: function($$v) {\n        _vm.selectedLayer = $$v\n      },\n      expression: \"selectedLayer\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-col', {\n    staticClass: \"label\",\n    attrs: {\n      \"span\": 4\n    }\n  }, [_c('span', [_vm._v(\"Dim:\")])]), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 8\n    }\n  }, [_c('el-input-number', {\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"size\": \"small\",\n      \"max\": _vm.layerSize\n    },\n    model: {\n      value: (_vm.selectedDim),\n      callback: function($$v) {\n        _vm.selectedDim = $$v\n      },\n      expression: \"selectedDim\"\n    }\n  })], 1)], 1)], 1) : _vm._e(), _vm._v(\" \"), (_vm.isInput) ? _c('el-input', {\n    staticClass: \"text-input\",\n    attrs: {\n      \"type\": \"textarea\",\n      \"rows\": 2,\n      \"placeholder\": \"Please input\"\n    },\n    model: {\n      value: (_vm.inputs),\n      callback: function($$v) {\n        _vm.inputs = $$v\n      },\n      expression: \"inputs\"\n    }\n  }) : _vm._e(), _vm._v(\" \"), _c('el-button', {\n    on: {\n      \"click\": _vm.onSubmit\n    }\n  }, [_vm._v(\" Evaluate\\n  \")]), _vm._v(\" \"), (_vm.records) ? _c('hr') : _vm._e(), _vm._v(\" \"), (_vm.records) ? _c('div', {\n    staticClass: \"text-box\"\n  }, _vm._l((_vm.sentences), function(sentence) {\n    return _c('div', _vm._l((sentence), function(word) {\n      return _c('span', {\n        style: ({\n          backgroundColor: _vm.color(word.value)\n        })\n      }, [_vm._v(\" \" + _vm._s(word.text) + \" \")])\n    }))\n  })) : _vm._e()], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 722:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"project\"\n  }, [_c('project-graph', {\n    attrs: {\n      \"svg-id\": _vm.paneId(_vm.model, _vm.selectedState),\n      \"width\": _vm.width,\n      \"height\": _vm.height,\n      \"graph-data\": _vm.graphData,\n      \"ready\": _vm.ready,\n      \"config\": _vm.config\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"config\"\n  }, [_c('el-col', {\n    attrs: {\n      \"span\": 4\n    }\n  }, [_c('span', [_vm._v(\"Cluster No.\")])]), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 6\n    }\n  }, [_c('el-slider', {\n    attrs: {\n      \"min\": 1,\n      \"max\": 20\n    },\n    on: {\n      \"change\": _vm.configWatcher\n    },\n    model: {\n      value: (_vm.config.clusterNum),\n      callback: function($$v) {\n        _vm.$set(_vm.config, \"clusterNum\", $$v)\n      },\n      expression: \"config.clusterNum\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 4\n    }\n  }, [_c('span', [_vm._v(\"Opacity\")])]), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 6\n    }\n  }, [_c('el-slider', {\n    attrs: {\n      \"max\": 1,\n      \"step\": 0.05,\n      \"width\": 100\n    },\n    on: {\n      \"change\": _vm.configWatcher\n    },\n    model: {\n      value: (_vm.config.opacity),\n      callback: function($$v) {\n        _vm.$set(_vm.config, \"opacity\", $$v)\n      },\n      expression: \"config.opacity\"\n    }\n  })], 1)], 1)], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 723:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('h4', {\n    staticClass: \"normal\"\n  }, [_vm._v(_vm._s(_vm.header))]), _vm._v(\" \"), _c('hr'), _vm._v(\" \"), _c('svg', {\n    attrs: {\n      \"id\": _vm.svgId,\n      \"width\": _vm.width,\n      \"height\": _vm.height\n    }\n  }), _vm._v(\" \"), _c('svg', {\n    attrs: {\n      \"id\": _vm.svgId + \"2\",\n      \"width\": _vm.width,\n      \"height\": 30\n    }\n  })])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 724:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('svg', {\n    staticClass: \"project\",\n    attrs: {\n      \"id\": _vm.svgId,\n      \"width\": _vm.width,\n      \"height\": _vm.height\n    }\n  })\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 725:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('el-menu', {\n    staticClass: \"header-menu\",\n    attrs: {\n      \"theme\": \"dark\",\n      \"default-active\": '',\n      \"mode\": \"horizontal\"\n    },\n    on: {\n      \"select\": function () {\n        _vm.console.log('Hi!');\n      }\n    }\n  }, [_c('el-menu-item', {\n    staticClass: \"logo\",\n    attrs: {\n      \"index\": \"1\"\n    }\n  }, [_vm._v(\"RNNVis\")]), _vm._v(\" \"), _c('el-menu-item', {\n    attrs: {\n      \"index\": \"2\"\n    }\n  }, [_vm._v(\"Info\")])], 1), _vm._v(\" \"), _c('el-row', {\n    attrs: {\n      \"gutter\": 10\n    }\n  }, [_c('el-col', {\n    staticClass: \"col-bg\",\n    attrs: {\n      \"span\": 6,\n      \"gutter\": 15\n    }\n  }, [_c('model-view'), _vm._v(\" \"), _c('br'), _vm._v(\" \"), (!_vm.compare) ? _c('info-board', {\n    attrs: {\n      \"compare\": false,\n      \"type\": \"word\",\n      \"id\": \"info-word\",\n      \"height\": _vm.infoHeight * 1.0\n    }\n  }) : _vm._e(), _vm._v(\" \"), (!_vm.compare) ? _c('info-board', {\n    attrs: {\n      \"compare\": false,\n      \"type\": \"state\",\n      \"id\": \"info-state\",\n      \"height\": _vm.infoHeight * 0.8\n    }\n  }) : _vm._e()], 1), _vm._v(\" \"), _c('el-col', {\n    staticClass: \"col-bg\",\n    attrs: {\n      \"span\": 18,\n      \"gutter\": 15\n    }\n  }, [_c('el-row', [_c('main-view', {\n    attrs: {\n      \"height\": _vm.mainHeight\n    }\n  })], 1), _vm._v(\" \"), _c('el-row', {\n    attrs: {\n      \"gutter\": 10\n    }\n  }, [(_vm.compare) ? _c('info-view', {\n    attrs: {\n      \"height\": _vm.infoHeight\n    }\n  }) : _vm._e()], 1)], 1)], 1)], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 726:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('svg', {\n    attrs: {\n      \"id\": _vm.svgId\n    }\n  })])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 727:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"arc\"\n  }, [_c('div', {\n    staticClass: \"header\"\n  }, [_c('el-radio-group', {\n    attrs: {\n      \"size\": \"small\"\n    },\n    model: {\n      value: (_vm.selectedState),\n      callback: function($$v) {\n        _vm.selectedState = $$v\n      },\n      expression: \"selectedState\"\n    }\n  }, _vm._l((_vm.states), function(state) {\n    return _c('el-radio-button', {\n      attrs: {\n        \"label\": state\n      }\n    })\n  }))], 1), _vm._v(\" \"), _c('svg', {\n    attrs: {\n      \"id\": _vm.svgId,\n      \"width\": _vm.width,\n      \"height\": _vm.height\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"arc_config\"\n  }, [_c('el-col', {\n    attrs: {\n      \"span\": 4\n    }\n  }, [_c('span', [_vm._v(\"Cluster No.\")])]), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 6\n    }\n  }, [_c('el-slider', {\n    attrs: {\n      \"min\": 2,\n      \"max\": 20\n    },\n    model: {\n      value: (_vm.clusterNum),\n      callback: function($$v) {\n        _vm.clusterNum = $$v\n      },\n      expression: \"clusterNum\"\n    }\n  })], 1)], 1)])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 728:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('el-col', {\n    staticClass: \"col-bg\",\n    attrs: {\n      \"span\": 12,\n      \"gutter\": 15\n    }\n  }, [_c('info-board', {\n    attrs: {\n      \"type\": _vm.type1,\n      \"id\": 'info-board-1',\n      \"height\": _vm.height,\n      \"compare\": _vm.compare\n    }\n  })], 1), _vm._v(\" \"), _c('el-col', {\n    staticClass: \"col-bg\",\n    attrs: {\n      \"span\": 12,\n      \"gutter\": 15\n    }\n  }, [_c('info-board', {\n    attrs: {\n      \"type\": _vm.type2,\n      \"id\": 'info-board-2',\n      \"height\": _vm.height,\n      \"compare\": false\n    }\n  })], 1)], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 729:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"grid-content\"\n  }, [_c('el-form', {\n    attrs: {\n      \"label-position\": \"left\",\n      \"label-width\": \"30%\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": _vm.compare ? 'Model 2' : 'Model'\n    }\n  }, [_c('el-select', {\n    staticStyle: {\n      \"width\": \"80%\"\n    },\n    attrs: {\n      \"placeholder\": \"Select A Model\",\n      \"size\": \"small\"\n    },\n    model: {\n      value: (_vm.selectedModel),\n      callback: function($$v) {\n        _vm.selectedModel = $$v\n      },\n      expression: \"selectedModel\"\n    }\n  }, _vm._l((_vm.availableModels), function(model, idx) {\n    return _c('el-option', {\n      attrs: {\n        \"value\": model,\n        \"label\": model\n      }\n    })\n  })), _vm._v(\" \"), (_vm.compare) ? _c('el-button', {\n    attrs: {\n      \"icon\": \"delete\",\n      \"size\": \"small\"\n    },\n    on: {\n      \"click\": _vm.toggle\n    }\n  }) : _vm._e()], 1), _vm._v(\" \"), (_vm.config) ? _c('div', {\n    staticClass: \"el-form-item\"\n  }, _vm._l((Object.keys(_vm.config)), function(key) {\n    return _c('el-tag', {\n      attrs: {\n        \"type\": _vm.colorType\n      }\n    }, [_vm._v(_vm._s(key) + \": \" + _vm._s(_vm.config[key]))])\n  })) : _vm._e(), _vm._v(\" \"), (_vm.config) ? _c('hr', {\n    staticClass: \"local-hr\"\n  }) : _vm._e(), _vm._v(\" \"), (_vm.states.length) ? _c('el-form-item', {\n    attrs: {\n      \"label\": \"Hidden State\"\n    }\n  }, [_c('el-radio-group', {\n    attrs: {\n      \"size\": \"small\"\n    },\n    model: {\n      value: (_vm.selectedState),\n      callback: function($$v) {\n        _vm.selectedState = $$v\n      },\n      expression: \"selectedState\"\n    }\n  }, _vm._l((_vm.states), function(state) {\n    return _c('el-radio-button', {\n      attrs: {\n        \"label\": state\n      }\n    }, [_vm._v(_vm._s(_vm.stateName(state)))])\n  }))], 1) : _vm._e(), _vm._v(\" \"), (_vm.layerNum) ? _c('el-form-item', {\n    attrs: {\n      \"label\": \"Layer\"\n    }\n  }, [_c('el-input-number', {\n    staticStyle: {\n      \"width\": \"100px\",\n      \"margin-top\": \"5px\"\n    },\n    attrs: {\n      \"size\": \"small\",\n      \"max\": _vm.layerNum - 1\n    },\n    model: {\n      value: (_vm.selectedLayer),\n      callback: function($$v) {\n        _vm.selectedLayer = $$v\n      },\n      expression: \"selectedLayer\"\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.states.length) ? _c('el-form-item', {\n    attrs: {\n      \"label\": \"POS Tag\"\n    }\n  }, [_c('el-switch', {\n    attrs: {\n      \"on-text\": \"\",\n      \"off-text\": \"\"\n    },\n    model: {\n      value: (_vm.posSwitch),\n      callback: function($$v) {\n        _vm.posSwitch = $$v\n      },\n      expression: \"posSwitch\"\n    }\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"align\",\n    staticStyle: {\n      \"margin-left\": \"30px\"\n    }\n  }, [_vm._v(\"Align\")]), _vm._v(\" \"), _c('el-switch', {\n    attrs: {\n      \"on-text\": \"\",\n      \"off-text\": \"\"\n    },\n    on: {\n      \"change\": _vm.layoutChange\n    },\n    model: {\n      value: (_vm.mode),\n      callback: function($$v) {\n        _vm.mode = $$v\n      },\n      expression: \"mode\"\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.selectedModel) ? _c('el-form-item', {\n    attrs: {\n      \"label\": \"Sentences\"\n    }\n  }, [(_vm.inputVisible) ? _c('el-input', {\n    ref: \"saveTagInput\",\n    staticClass: \"input-new-tag\",\n    attrs: {\n      \"size\": \"small\"\n    },\n    on: {\n      \"blur\": _vm.handleInputConfirm\n    },\n    nativeOn: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")) { return null; }\n        return _vm.handleInputConfirm($event)\n      }\n    },\n    model: {\n      value: (_vm.inputValue),\n      callback: function($$v) {\n        _vm.inputValue = $$v\n      },\n      expression: \"inputValue\"\n    }\n  }) : _c('el-button', {\n    staticClass: \"button-new-tag\",\n    attrs: {\n      \"size\": \"small\"\n    },\n    on: {\n      \"click\": _vm.showInput\n    }\n  }, [_vm._v(\"+ New Sentence\")])], 1) : _vm._e(), _vm._v(\" \"), (_vm.sentences.length) ? _c('div', {\n    staticClass: \"sentence-container\"\n  }, _vm._l((_vm.sentences), function(sentence) {\n    return _c('el-tag', {\n      attrs: {\n        \"closable\": true,\n        \"type\": _vm.colorType\n      },\n      on: {\n        \"close\": function($event) {\n          _vm.closeSentence(sentence)\n        }\n      }\n    }, [_c('a', [_vm._v(_vm._s(sentence))])])\n  })) : _vm._e(), _vm._v(\" \"), (_vm.selectedState) ? _c('hr', {\n    staticClass: \"local-hr\"\n  }) : _vm._e(), _vm._v(\" \"), (_vm.selectedState) ? _c('el-form-item', {\n    attrs: {\n      \"label\": \"Cluster Num\"\n    }\n  }, [_c('el-slider', {\n    staticStyle: {\n      \"width\": \"80%\"\n    },\n    attrs: {\n      \"min\": 2,\n      \"max\": 20\n    },\n    on: {\n      \"change\": _vm.layoutChange\n    },\n    model: {\n      value: (_vm.layout.clusterNum),\n      callback: function($$v) {\n        _vm.$set(_vm.layout, \"clusterNum\", $$v)\n      },\n      expression: \"layout.clusterNum\"\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.selectedState) ? _c('el-form-item', {\n    staticStyle: {\n      \"margin-top\": \"-7px\",\n      \"padding-bottom\": \"-10px\"\n    },\n    attrs: {\n      \"label\": \"Stroke Width\"\n    }\n  }, [_c('el-slider', {\n    staticStyle: {\n      \"width\": \"80%\"\n    },\n    attrs: {\n      \"min\": 0,\n      \"max\": _vm.maxWidth,\n      \"step\": 0.1\n    },\n    on: {\n      \"change\": _vm.layoutChange\n    },\n    model: {\n      value: (_vm.layout.strokeControlStrength),\n      callback: function($$v) {\n        _vm.$set(_vm.layout, \"strokeControlStrength\", $$v)\n      },\n      expression: \"layout.strokeControlStrength\"\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.selectedState) ? _c('el-form-item', {\n    staticStyle: {\n      \"margin-top\": \"-7px\"\n    },\n    attrs: {\n      \"label\": \"Link Filter\"\n    }\n  }, [_c('el-slider', {\n    staticStyle: {\n      \"width\": \"80%\"\n    },\n    attrs: {\n      \"range\": \"\",\n      \"min\": 0,\n      \"max\": 1,\n      \"step\": 0.0001\n    },\n    on: {\n      \"change\": _vm.layoutChange\n    },\n    model: {\n      value: (_vm.layout.linkFilterThreshold),\n      callback: function($$v) {\n        _vm.$set(_vm.layout, \"linkFilterThreshold\", $$v)\n      },\n      expression: \"layout.linkFilterThreshold\"\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.selectedState) ? _c('el-form-item', {\n    staticStyle: {\n      \"margin-top\": \"-7px\"\n    },\n    attrs: {\n      \"label\": \"State Clip\"\n    }\n  }, [_c('el-slider', {\n    staticStyle: {\n      \"width\": \"80%\"\n    },\n    attrs: {\n      \"min\": 0,\n      \"max\": 10,\n      \"step\": 1\n    },\n    on: {\n      \"change\": _vm.layoutChange\n    },\n    model: {\n      value: (_vm.layout.stateClip),\n      callback: function($$v) {\n        _vm.$set(_vm.layout, \"stateClip\", $$v)\n      },\n      expression: \"layout.stateClip\"\n    }\n  })], 1) : _vm._e()], 1)], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 730:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('h4', {\n    staticClass: \"normal\"\n  }, [_vm._v(\"Models\")]), _vm._v(\" \"), _c('hr'), _vm._v(\" \"), _c('div', {\n    staticClass: \"content model-view\"\n  }, [_c('model-config', {\n    attrs: {\n      \"compare\": false\n    }\n  }), _vm._v(\" \"), (_vm.compare) ? _c('hr') : _vm._e(), _vm._v(\" \"), (_vm.compare) ? _c('model-config', {\n    attrs: {\n      \"compare\": true,\n      \"toggle\": _vm.toggleCompare\n    }\n  }) : _vm._e(), _vm._v(\" \"), _c('hr'), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"size\": \"small\"\n    },\n    on: {\n      \"click\": _vm.toggleCompare\n    }\n  }, [_vm._v(\"Compare Model\")])], 1)])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 731:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('h4', {\n    staticClass: \"normal\"\n  }, [_vm._v(\"Main\")]), _vm._v(\" \"), _c('hr'), _vm._v(\" \"), (_vm.compare) ? _c('cluster-view', {\n    attrs: {\n      \"width\": _vm.width / 2 - 15,\n      \"height\": _vm.height,\n      \"compare\": true\n    }\n  }) : _vm._e(), _vm._v(\" \"), _c('cluster-view', {\n    attrs: {\n      \"width\": _vm.compare ? _vm.width / 2 - 15 : _vm.width,\n      \"height\": _vm.height,\n      \"compare\": false\n    }\n  })], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 732:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('svg', {\n    attrs: {\n      \"id\": _vm.svgId,\n      \"width\": _vm.width,\n      \"height\": _vm.height\n    }\n  }, [_c('defs', [_c('linearGradient', {\n    attrs: {\n      \"id\": \"state-legend\"\n    }\n  }, [_c('stop', {\n    staticClass: \"stop1\",\n    attrs: {\n      \"offset\": \"0%\",\n      \"stop-color\": \"rgba(9, 173, 255, 1)\"\n    }\n  }), _vm._v(\" \"), _c('stop', {\n    staticClass: \"stop2\",\n    attrs: {\n      \"offset\": \"50%\",\n      \"stop-color\": \"rgba(128, 128, 128, 0.1)\"\n    }\n  }), _vm._v(\" \"), _c('stop', {\n    staticClass: \"stop3\",\n    attrs: {\n      \"offset\": \"100%\",\n      \"stop-color\": \"rgba(255, 91, 9, 1)\"\n    }\n  })], 1)], 1)])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 735:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 97:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WordCloud = undefined;\n\nvar _keys = __webpack_require__(33);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _classCallCheck2 = __webpack_require__(25);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(26);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _d = __webpack_require__(21);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _d3Cloud = __webpack_require__(416);\n\nvar _d3Cloud2 = _interopRequireDefault(_d3Cloud);\n\nvar _eventBus = __webpack_require__(11);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar bgLayout = {\n  'stroke': 'black',\n  'stroke-width': 1,\n  'fill': 'white',\n  'fill-opacity': 0.0,\n  'stroke-opacity': 0.2\n};\n\nvar wordLayout = {\n  'font': 'Arial',\n\n  'fontSize': [9, 17],\n\n  'fontWeight': [300, 400, 500],\n  'padding': 0,\n  'opacity': 0.7,\n  'baseColor': '#1f77b4'\n};\n\nvar WordCloud = function () {\n  function WordCloud(selector) {\n    var radiusX = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;\n    var radiusY = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : radiusX;\n    var bgshape = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'rect';\n    var compare = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n    (0, _classCallCheck3.default)(this, WordCloud);\n\n    this.selector = selector;\n    this.bggroup = this.selector.append('g');\n    this.bg = this.bggroup.append('g');\n    this.bgHandle;\n    this.bgshape = bgshape;\n    this.bgLayout = bgLayout;\n    this.wordLayout = wordLayout;\n    this.group = this.bggroup.append('g');\n    this.radius = [radiusX, radiusY];\n    this.data;\n    this.cloud = null;\n    this.font = 'Impact';\n    this.margin_ = 0;\n    this.colorScheme = d3.scaleOrdinal(d3.schemeCategory10);\n    this.word2data;\n    this.compare = compare;\n    this.boundingSize = [radiusX * 2, radiusY * 2];\n  }\n\n  (0, _createClass3.default)(WordCloud, [{\n    key: 'size',\n    value: function size(_size) {\n      this.radius[0] = _size[0] / 2;\n      this.radius[1] = _size[1] / 2;\n      return this;\n    }\n  }, {\n    key: 'wordLayoutParams',\n    value: function wordLayoutParams(layoutParams) {\n      return arguments.length ? (this.wordLayout = layoutParams, this) : this.wordLayout;\n    }\n  }, {\n    key: 'bgLayoutParams',\n    value: function bgLayoutParams(layoutParams) {\n      return arguments.length ? (this.bgLayout = layoutParams, this) : this.bgLayout;\n    }\n  }, {\n    key: 'transform',\n    value: function transform(transformStr) {\n      if (this.compare) transformStr += ' scale(-1, 1)';\n      this.bggroup.transition().duration(200).attr('transform', transformStr);\n      return this;\n    }\n  }, {\n    key: 'background',\n    value: function background(color) {\n      var alpha = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1.0;\n\n      this.bgLayout['fill'] = color;\n      this.bgLayout['fill-opacity'] = alpha;\n      return this;\n    }\n  }, {\n    key: 'drawBackground',\n    value: function drawBackground() {\n      var _this = this;\n\n      if (this.bgHandle) this.bgHandle.remove();\n      this.bgHandle = this.bg.append(this.bgshape);\n      if (this.bgshape === 'rect') {\n        this.bgHandle.attr('x', -this.radius[0]).attr('y', -this.radius[1]).attr('rx', 4).attr('ry', 4).attr('width', 2 * this.radius[0]).attr('height', 2 * this.radius[1]);\n      } else if (this.bgshape === 'ellipse') {\n        this.bgHandle.attr('cx', 0).attr('cy', 0).attr('rx', radius[0]).attr('ry', radius[1]);\n      }\n      (0, _keys2.default)(this.bgLayout).forEach(function (param) {\n        _this.bgHandle.attr(param, _this.bgLayout[param]);\n      });\n      return this;\n    }\n  }, {\n    key: 'margin',\n    value: function margin(_margin) {\n      this.margin_ = _margin;\n\n      return this;\n    }\n  }, {\n    key: 'fontFamily',\n    value: function fontFamily(font) {\n      this.wordLayout.font = font;\n      return this;\n    }\n  }, {\n    key: 'color',\n    value: function color(colorScheme) {\n      this.colorScheme = colorScheme;\n      return this;\n    }\n  }, {\n    key: 'draw',\n    value: function draw() {\n      var _this2 = this;\n\n      var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [this.width / 2, this.height / 2];\n      var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.data;\n\n      if (size[0] !== this.width / 2 || size[1] !== this.height / 2) {\n        this.radius = size;\n        this.drawBackground();\n      }\n      if (!this.bgHandle) this.drawBackground();\n      if (!this.data) this.data = data;\n\n      var radiusX = size[0];\n      var radiusY = size[1];\n      var wordLayout = this.wordLayout;\n\n      var filterData = data.filter(function (d) {\n        return -radiusX < d.x - d.width / 4 && -radiusY < d.y - d.size / 2 && d.x + d.width / 4 < radiusX && d.y - d.size / 2 < radiusY;\n      });\n      var self = this;\n      this.cloud = this.group.selectAll('text').data(filterData, function (d) {\n        return d.text;\n      });\n      var text = this.cloud.enter().append('text').style('font-family', wordLayout.font).attr('text-anchor', 'middle').style('fill', function (d, i) {\n        return typeof d.type === 'number' ? self.colorScheme(d.type) : wordLayout.baseColor;\n      });\n      text.text(function (d) {\n        return d.text;\n      });\n\n      this.cloud.style('fill', function (d, i) {\n        return typeof d.type === 'number' ? self.colorScheme(d.type) : wordLayout.baseColor;\n      });\n\n      text.attr('transform', function (d) {\n        return 'translate(' + [d.x, d.y] + ')';\n      }).attr('font-size', function (d) {\n        return d.size + 'px';\n      }).attr('font-weight', function (d) {\n        return d.weight;\n      }).style('fill-opacity', 0).transition().duration(300).style('fill-opacity', wordLayout.opacity);\n\n      text.on('mouseover', function () {\n        d3.select(this).style('fill-opacity', 1.0);\n      }).on('mouseout', function (d, i) {\n        if (d.select) return;\n        d3.select(this).style('fill-opacity', wordLayout.opacity);\n      }).on('click', function (d, i) {\n        if (!d.select) {\n          d.select = true;\n          d.opacity = wordLayout.opacity;\n          d.baseColor = typeof d.type === 'number' ? self.colorScheme(d.type) : wordLayout.baseColor;\n          d3.select(this).style('fill-opacity', 1.0).style('font-weight', d.weight + 500);\n          _eventBus.bus.$emit(_eventBus.SELECT_WORD, d, self.compare);\n        } else {\n          d.select = false;\n          _eventBus.bus.$emit(_eventBus.DESELECT_WORD, d, self.compare);\n          d3.select(this).style('fill-opacity', wordLayout.opacity).style('font-weight', d.weight);\n        }\n      });\n\n      text.each(function (d) {\n        d.el = this;\n      });\n\n      this.word2data = {};\n      this.data.forEach(function (d) {\n        return _this2.word2data[d.text] = d;\n      });\n\n      this.cloud.exit().transition().duration(200).style('fill-opacity', 1e-6).attr('font-size', 1).remove();\n\n      return this;\n    }\n  }, {\n    key: 'update',\n    value: function update(words) {\n      var self = this;\n\n      words.sort(function (a, b) {\n        return a.size - b.size;\n      });\n      var fontExtent = d3.extent(words, function (d) {\n        return d.size;\n      });\n      var scale = d3.scalePow().range(this.wordLayout.fontSize).domain(fontExtent);\n      var weightScale = d3.scaleQuantize().range(this.wordLayout.fontWeight).domain(fontExtent);\n      words.forEach(function (word) {\n        word.weight = Math.round(weightScale(word.size));\n        word.size = scale(word.size);\n      });\n\n      self.boundingSize = [self.boundingSize[0] * 1.3, self.boundingSize[1] * 1.05];\n      (0, _d3Cloud2.default)().size(this.boundingSize).words(words).padding(this.wordLayout.padding).rotate(0).font(this.wordLayout.font).text(function (d) {\n        return d.text;\n      }).fontSize(function (d) {\n        return d.size;\n      }).fontWeight(function (d) {\n        return d.weight;\n      }).on('end', function (words_) {\n        self.draw([self.width / 2, self.height / 2], words_);\n      }).random(function () {\n        return 0.5;\n      }).spiral('rectangular').start();\n    }\n  }, {\n    key: 'autoscale',\n    value: function autoscale(bounds) {\n      var scaleX = 0.9 * this.width / Math.abs(bounds[0].x - bounds[1].x);\n      var scaleY = 0.9 * this.height / Math.abs(bounds[0].y - bounds[1].y);\n      var scale = Math.min(scaleX, scaleY);\n      var centerX = (bounds[1].x + bounds[0].x - this.width) / 2 * scale;\n      var centerY = (bounds[1].y + bounds[0].y - this.height) / 2 * scale;\n      this.group.attr('transform', 'scale(' + scale + ') translate(' + -centerX + ', ' + -centerY + ')');\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this.selector.transition().duration(300).attr('opacity', 0).remove();\n    }\n  }, {\n    key: 'width',\n    get: function get() {\n      return (this.radius[0] - this.margin_) * 2;\n    }\n  }, {\n    key: 'height',\n    get: function get() {\n      return (this.radius[1] - this.margin_) * 2;\n    }\n  }, {\n    key: 'polygon',\n    get: function get() {\n      var polygon = [];\n      var len = 4;\n      for (var i = 0; i < len; i++) {\n        polygon.push([Math.round(this.radiusX * Math.cos(2 * Math.PI * i / len)), Math.round(this.radiusY * Math.sin(2 * Math.PI * i / len))]);\n      }\n      return polygon;\n    }\n  }]);\n  return WordCloud;\n}();\n\nexports.WordCloud = WordCloud;\nexports.default = {\n  WordCloud: WordCloud\n};\n\n/***/ })\n\n},[308]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.d98cff66465a3838eb9f.js","import Vue from 'vue';\nimport dataService from './services/dataService';\nimport * as d3 from 'd3';\nimport { CoClusterProcessor, SentenceRecord, StateStatistics } from './preprocess'\n\n// event definitions goes here\nconst SELECT_MODEL = 'SELECT_MODEL';\nconst SELECT_STATE = 'SELECT_STATE';\nconst CHANGE_LAYOUT = 'CHANGE_LAYOUT';\nconst EVALUATE_SENTENCE = 'EVALUATE_SENTENCE';\nconst SELECT_UNIT = 'SELECT_UNIT';\nconst SELECT_WORD = 'SELECT_WORD';\nconst DESELECT_UNIT = 'DESELECT_UNIT';\nconst DESELECT_WORD = 'DESELECT_WORD';\nconst SELECT_LAYER = 'SELECT_LAYER';\nconst CLOSE_SENTENCE = 'CLOSE_SENTENCE';\nconst SELECT_SENTENCE_NODE = 'SELECT_SENTENCE_NODE';\nconst SELECT_COLOR = 'SELECT_COLOR';\n\nconst state = {\n  selectedModel: null,\n  selectedState: null,\n  selectedLayer: null,\n  selectedModel2: null,\n  selectedState2: null,\n  selectedLayer2: null,\n  layout: {},\n  layout2: {},\n  modelConfigs: {},\n  coClusters: {},\n  availableModels: null,\n  sentenceRecords: {},\n  statistics: {},\n  modelsSet: null,\n  selectedUnits: [],\n  selectedWords: [],\n  selectedUnits2: [],\n  selectedWords2: [],\n  selectedNode: null,\n  selectedNode2: null,\n  compare: false,\n  color: d3.scaleOrdinal(d3.schemeCategory10),\n  renderPos: false,\n  renderPos2:false,\n  // nodeRecord: [],\n};\n\nconst bus = new Vue({\n  data: {\n    state: state,\n    cell2states: {\n      'GRU': ['state'],\n      'BasicLSTM': ['state_c', 'state_h'],\n      'BasicRNN': ['state'],\n    },\n  },\n  computed: {\n    // selectedUnits: function() {\n    //   return this.state.selectedUnits;\n    // },\n  },\n  methods: {\n\n    loadModelConfig(modelName) { // return a Promise\n      if (!modelName)\n        return Promise.reject(modelName);\n      if (!Object.prototype.hasOwnProperty.call(state.modelConfigs, modelName)) {\n        return dataService.getModelConfig(modelName, response => {\n          if (response.status === 200) {\n            state.modelConfigs[modelName] = response.data;\n            // state.selectedModel = modelName;\n          }\n        });\n      }\n      return Promise.resolve(modelName);\n    },\n\n    loadAvailableModels() {\n      // console.log(this.availableModels);\n      if (this.state.availableModels === null) {\n        console.log(\"Start loading model data\");\n        return dataService.getModels(response => {\n          if (response.status === 200) {\n            const data = response.data;\n            this.state.availableModels = data.models;\n            this.state.modelsSet = new Set(this.state.availableModels);\n            // console.log(this.state.modelsSet);\n          }\n        });\n      }\n      return Promise.resolve('Already Loaded');\n    },\n\n    loadCoCluster(modelName = this.state.selectedModel, stateName = this.state.selectedState, nCluster = 10, params = { top_k: 300, mode: 'raw', layer: -1 }) {\n      const coCluster = new CoClusterProcessor(modelName, stateName, nCluster, params);\n      const coClusterName = CoClusterProcessor.identifier(coCluster);\n      if (this.state.coClusters.hasOwnProperty(coClusterName))\n        return Promise.resolve('Cocluster data already loaded');\n      return this.loadAvailableModels()\n        .then(() => {\n          if (this.state.modelsSet.has(modelName)) {\n            return coCluster.load();\n          }\n          throw `No model named ${modelName}`;\n        })\n        .then(() => {\n          this.state.coClusters[coClusterName] = coCluster;\n          return 'Succeed';\n        });\n    },\n    getCoCluster(modelName = this.state.selectedModel, stateName = this.state.selectedState, nCluster = 10, params = { top_k: 300, mode: 'raw', layer: -1 }) {\n      const coCluster = new CoClusterProcessor(modelName, stateName, nCluster, params);\n      const coClusterName = CoClusterProcessor.identifier(coCluster);\n      if (this.state.coClusters.hasOwnProperty(coClusterName))\n        return this.state.coClusters[coClusterName];\n      console.log('First call loadCoCluster(...) to load remote Data!');\n      return undefined;\n    },\n    // getModelConfig(modelName = state.selectedModel) {\n    //   if (this.state.availableModels)\n    //     return this.state.availableModels[modelName];\n    //   return undefined;\n    // },\n    modelCellType(modelName = state.selectedModel) {\n      if (state.modelsSet.has(modelName)) {\n        const config = this.state.modelConfigs[modelName];\n        return config.model.cell_type;\n      }\n      return undefined;\n    },\n    availableStates(modelName = this.state.selectedModel) { // helper function that returns available states of the current selected Model`\n      // modelName = modelName || this.state.selectedModel;\n      if (state.modelsSet.has(modelName)) {\n        const config = this.state.modelConfigs[modelName];\n        return this.cell2states[config.model.cell_type];\n      }\n      return undefined;\n    },\n    layerNum(modelName = this.selectedModel) {\n      // modelName = modelName || this.state.selectedModel;\n      if (state.modelsSet.has(modelName)) {\n        const config = this.state.modelConfigs[modelName];\n        return config.model.cells.length;\n      }\n      return undefined;\n    },\n    layerSize(modelName = this.state.selectedModel, layer = -1) {\n      // modelName = modelName || this.state.selectedModel;\n      if (state.modelsSet.has(modelName)) {\n        if (layer === -1) {\n          layer = this.layerNum(modelName) - 1;\n        }\n        const config = this.state.modelConfigs[modelName];\n        return config.model.cells[layer].num_units;\n      }\n      return undefined;\n    },\n    evalSentence(sentence, modelName = state.selectedModel) {\n      if (!state.sentenceRecords.hasOwnProperty(modelName)) {\n        state.sentenceRecords[modelName] = [];\n      }\n      const record = new SentenceRecord(sentence, modelName);\n      state.sentenceRecords[modelName].push(record);\n      return record;\n    },\n    loadStatistics(modelName = state.selectedModel, stateName = state.selectedState, layer = -1, top_k = 300) {\n      if (!state.modelsSet.has(modelName))\n        return Promise.reject(`No available model ${modelName}`);\n      if (!(stateName === 'state' || stateName === 'state_c' || stateName === 'state_h'))\n        return Promise.reject(`No available state ${stateName}`);\n      if (!state.statistics.hasOwnProperty(modelName)) {\n        state.statistics[modelName] = {};\n      }\n      if(!state.statistics[modelName].hasOwnProperty(stateName)) {\n        state.statistics[modelName][stateName] = [];\n      }\n      if (layer === -1) {\n        layer = this.layerNum(modelName) - 1;\n      }\n      if (state.statistics[modelName][stateName][layer]){\n        return state.statistics[modelName][stateName][layer].load();\n      }\n      const stat = new StateStatistics(modelName, stateName, layer, top_k);\n      state.statistics[modelName][stateName][layer] = stat;\n      return stat.load();\n    },\n    getStatistics(modelName = state.selectedModel, stateName = state.selectedState, layer = -1, top_k = 300) {\n      if (state.statistics.hasOwnProperty(modelName)) {\n        if(state.statistics[modelName].hasOwnProperty(stateName)){\n          if(state.statistics[modelName][stateName][layer])\n            return state.statistics[modelName][stateName][layer];\n        }\n      }\n      console.log(`bus > unable to get statistics for ${modelName}, ${stateName}, ${layer}`);\n      return undefined;\n    },\n    // load\n    loadPosStatistics(modelName = state.selectedModel, top_k = 300, callback) {\n      if (this.state.modelsSet.has(modelName)) {\n        return dataService.getPosStatistics(modelName, top_k, callback);\n      }\n      return Promise.reject(`No model with name ${modelName} available!`);\n    }\n  },\n  created() {\n    // register event listener\n    this.$on(SELECT_MODEL, (modelName, compare) => {\n      if (compare) {\n        this.state.selectedModel2 = modelName;\n        this.state.compare = modelName ? true : false;\n      }\n      else\n        this.state.selectedModel = modelName;\n      console.log(`bus > current models : ${state.selectedModel}, ${state.selectedModel2}`);\n    });\n\n    this.$on(SELECT_STATE, (stateName, compare) => {\n      if (compare)\n        this.state.selectedState2 = stateName;\n      else\n        this.state.selectedState = stateName;\n      console.log(`bus > current states : ${state.selectedState}, ${state.selectedState2}`);\n    });\n\n    this.$on(SELECT_LAYER, (layer, compare) => {\n      if (compare)\n        this.state.selectedLayer2 = layer;\n      else\n        this.state.selectedLayer = layer;\n    });\n\n// bus.$on(CLUSTER_NUM, (clusterNum) => {\n//   bus.state.clusterNum = clusterNum;\n// });\n\n    this.$on(CHANGE_LAYOUT, (newLayout, compare) => {\n      if(compare)\n        this.state.layout2 = Object.assign({}, newLayout);\n      else\n        this.state.layout = Object.assign({}, newLayout);\n      console.log(`bus > ${compare ? 'compare': ''} clusterNum: ${newLayout.clusterNum}`);\n    });\n\n    this.$on(EVALUATE_SENTENCE, (sentence, compare) => {\n      console.log(`bus > evaluating model ${compare ? state.selectedModel2 : state.selectedModel} on sentence \"${sentence}\"`);\n    });\n\n    this.$on(SELECT_UNIT, (unitDim, compare) => {\n      if (compare) {\n        const units = this.state.selectedUnits2.slice();\n        units.push(unitDim);\n        if (units.length > 2)\n          units.splice(0, 1);\n        this.state.selectedUnits2 = units;\n        this.state.selectedWords2 = [];\n        this.state.selectedNode2 = null;\n      } else {\n        const units = this.state.selectedUnits.slice();\n        units.push(unitDim);\n        if (units.length > 2)\n          units.splice(0, 1);\n        this.state.selectedUnits = units;\n        if (this.state.compare){\n          this.state.selectedWords = [];\n          this.state.selectedNode = null;\n        }\n      }\n      console.log(`bus > selected unit ${unitDim}`);\n\n    });\n\n    this.$on(SELECT_WORD, (word, compare) => {\n      const maxSelected = 3;\n      let words;\n      if (compare){\n        words = this.state.selectedWords2.slice();\n        this.state.selectedUnits2 = [];\n        this.state.selectedNode2 = null;\n      } else {\n        words = this.state.selectedWords.slice();\n        if (this.state.compare) {\n          this.state.selectedUnits = [];\n          this.state.selectedNode = null;\n        }\n      }\n      words.push(word);\n      if (words.length > maxSelected) {\n        deactivateText(words[0]);\n        words.splice(0, 1);\n      }\n      afterChangeWords(words);\n      if (compare) this.state.selectedWords2 = words;\n      else this.state.selectedWords = words;\n      console.log(`bus > selected word: ${word.text}`);\n    });\n\n    this.$on(DESELECT_UNIT, (unit, compare) => {\n      if (compare) {\n        const idx = this.state.selectedUnits2.indexOf(unit);\n        this.state.selectedUnits2.splice(idx, 1);\n      } else {\n        const idx = this.state.selectedUnits.indexOf(unit);\n        this.state.selectedUnits.splice(idx, 1);\n      }\n      console.log(`bus > deselected unit: ${unit}`);\n    });\n\n    this.$on(DESELECT_WORD, (word, compare) => {\n      let words;\n      if (compare) words = this.state.selectedWords2.slice();\n      else words = this.state.selectedWords.slice();\n      const idx = words.findIndex((d) => d.text === word.text);\n      console.log(`bus > deleted idx: ${idx}`);\n      deactivateText(words[idx]);\n      words.splice(idx, 1);\n      afterChangeWords(words);\n      if (compare) this.state.selectedWords2 = words;\n      else this.state.selectedWords = words;\n      console.log(`bus > deselected word: ${word.text}`);\n    });\n\n    this.$on(CLOSE_SENTENCE, (sentence, compare) => {\n      console.log(`bus > close sentence: ${sentence}`);\n    });\n    this.$on(SELECT_SENTENCE_NODE, (node, compare) => {\n      if(compare)\n        this.state.selectedNode2 = node;\n      else this.state.selectedNode = node;\n      console.log(`bus > sentence node selected: ${node.word}`);\n    });\n\n  }\n});\n\nfunction afterChangeWords(words) {\n  words.forEach((word, i) => {\n    word.color = state.color(i);\n    activateText(word);\n    focusText(word);\n  });\n  // if (words.length)\n  //   focusText(words[0]);\n}\n\nfunction deactivateText(data) {\n  d3.select(data.el)\n    .style('fill-opacity', data.opacity)\n    .style('font-weight', data.weight)\n    .style('stroke', 'none')\n    .style('fill', data.baseColor);\n  if(data.bound) {\n    data.bound.remove();\n    data.bound = null;\n  }\n}\n\nfunction activateText(data) {\n  d3.select(data.el).style('fill-opacity', 1)\n    .style('font-weight', data.weight + 300)\n    .style('stroke', 'none')\n    .style('fill', data.color);\n  if(data.bound) {\n    data.bound.remove();\n    data.bound = null;\n  }\n}\n\nfunction focusText(data) {\n  const box = data.el.getBBox();\n  // console.log(box);\n  // d3.select(data.el)\n  //   .style('stroke', '#000').style('stroke-width', 0.5); //.style('stroke-opacity', 0.5);\n  data.bound = d3.select(data.el.parentNode).insert('path')\n    .attr('d', 'M ' + (data.x - box.width/2 -1.5) + ' ' + (data.y + 2)\n      + ' H ' + (data.x + box.width/2 + 1.5))\n    // .attr('x', data.x - box.width/2 -1.5).attr('y', data.y - box.height*0.78)\n    // .attr('width', box.width + 3).attr('height', box.height*0.9)\n    .style('stroke', data.color);\n    // .style('stroke-opacity', 0.6);\n    // .style('fill', 'none');\n\n}\n\nexport default bus;\n\nexport {\n  bus,\n  SELECT_MODEL,\n  SELECT_STATE,\n  CHANGE_LAYOUT,\n  EVALUATE_SENTENCE,\n  CoClusterProcessor,\n  SentenceRecord,\n  SELECT_UNIT,\n  SELECT_WORD,\n  SELECT_LAYER,\n  DESELECT_UNIT,\n  DESELECT_WORD,\n  CLOSE_SENTENCE,\n  SELECT_SENTENCE_NODE,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/event-bus.js","import * as d3 from 'd3';\n// import dimple from '../lib/dimple';\n\nclass Artist {\n  constructor(chart) {\n    this.chart = chart;\n    // this.data = [];\n    // this.areas = [];\n    this.handles = []\n    this.drawHooks = [];\n  }\n  get group() {\n    return this.chart.group;\n  }\n  get scale() {\n    return this.chart.scale;\n  }\n  draw() {\n    this.drawHooks.forEach((drawHook) => drawHook());\n  }\n  clean() {\n    this.handles.forEach((handle) => {\n      handle\n        .transition()\n        .duration(200)\n        .style('opacity', 0)\n        .remove();\n    });\n    this.handles = [];\n    this.drawHooks = [];\n  }\n}\n\nconst defaultColorScheme = d3.scaleOrdinal(d3.schemeCategory10);\n\nfunction drawBox(el, xs, mean, range1, range2) {\n  const box = el.append('g');\n  // const x = width / 2;\n  // console.log(range1);\n  const mid = (xs[0] + xs[1]) / 2;\n  box.append('rect')\n    .attr('x', xs[0])\n    .attr('y', Math.min(range1[0], range1[1]))\n    .attr('width', xs[1] - xs[0])\n    .attr('height', Math.abs(range1[1] - range1[0]));\n  box.append('line')\n    .attr('x1', xs[0])\n    .attr('y1', mean)\n    .attr('x2', xs[1])\n    .attr('y2', mean);\n  for (let i = 0; i < 2; i += 1) {\n    box.append('line')\n      .attr('x1', mid)\n      .attr('y1', range1[i])\n      .attr('x2', mid)\n      .attr('y2', range2[i]);\n    box.append('line')\n      .attr('x1', xs[0])\n      .attr('y1', range2[i])\n      .attr('x2', xs[1])\n      .attr('y2', range2[i]);\n  }\n  return box;\n}\n\n// Chart class, for usage example, see TestView.vue\n\nexport class Chart {\n  // svg: a selector from d3.select, could be a <g>\n  constructor(svg, width = 100, height = 100) {\n    this.bggroup = svg.append('g');\n    this.bg = this.bggroup.append('rect')\n      .attr('opacity', 0);\n    this.group = this.bggroup.append('g');\n    this.width = width;\n    this.height = height;\n    this.marginAll = [0, 0, 0, 0];\n    this.scale = { x: null, y: null };\n    this.extents = [[Infinity, -Infinity], [Infinity, -Infinity]];\n    this.axis = { x: null, y: null };\n    this.axisHandles = { x: null, y: null };\n    this.charts = [];\n    this.artists = {}\n    this.drawHooks = { xAxis: null, yAxis: null};\n    this.offset = [];\n    this.rotateFlag = false;\n  }\n  resize(width, height) {\n    this.width = width;\n    this.height = height;\n    return this;\n  }\n  // set the relative translation regarding its mother element\n  translate(x, y) {\n    this.offset = [x, y];\n    this.bggroup.attr('transform', `translate(${this.offset[0]},${this.offset[1]})`);\n    // this.transform();\n    return this;\n  }\n  // perform the transform rendering, will be called by `draw()`\n  transform() {\n    if (this.rotateFlag === true) {\n      const x = this.width - this.marginLeft - this.marginRight;\n      const y = this.height - this.marginTop - this.marginBottom;\n      const rx = y / x;\n      const ry = x / y;\n      Object.keys(this.artists).forEach((artist) => {\n        this.artists[artist].handles.forEach((handle) => {\n          const scale = ''; //`scale(${rx}, ${ry}) `;\n          const rotate = 'rotate(-90, 0, 0)';\n          const translate = `translate(${-(this.width - this.marginLeft - this.marginRight)}, 0)`;\n          handle.attr('transform', rotate + translate + scale);\n        });\n      });\n    }\n  }\n  // rotate the chart, and perform axis rotation as well\n  rotate() {\n    this.rotateFlag = !this.rotateFlag;\n    if (this.rotateFlag) {\n      this.drawTmp = this.draw;\n      const tmpSize = [this.width, this.height];\n      const tmpMargin = this.marginAll;\n      this.draw = () => {\n        // placeholder for axis to prevent draw Axis\n        this.axisHandles.x = this.axisHandles.y = 1;\n        // reverse size\n        this.width = tmpSize[1];\n        this.height = tmpSize[0];\n        this.marginAll = [tmpMargin[1], tmpMargin[2], tmpMargin[3], tmpMargin[0]];\n\n        this.updateScale();\n        this.drawTmp();\n        // remove placeholder\n        this.axisHandles.x = this.axisHandles.y = null;\n        // reverse size back\n        this.width = tmpSize[0];\n        this.height = tmpSize[1];\n\n        this.marginAll = tmpMargin;\n        this.extents.reverse();\n        this.updateScale();\n        this.drawAxis();\n        this.extents.reverse();\n\n      };\n    } else {\n      this.draw = this.drawTmp;\n    }\n    return this;\n  }\n  // set the background color and opacity\n  background(color, alpha) {\n    this.bg\n      .attr('width', this.width)\n      .attr('height', this.height)\n      .attr('fill', color)\n      .attr('opacity', alpha);\n    return this;\n  }\n  // set the margin of the chart\n  margin(top, right = top, bottom = top, left = right) {\n    this.marginAll = [top, right, bottom, left];\n    this.group.attr('transform', `translate(${this.marginLeft}, ${this.marginTop})`);\n    return this;\n  }\n  // a few getter helpers\n  get marginTop() {\n    return this.marginAll[0];\n  }\n  get marginRight() {\n    return this.marginAll[1];\n  }\n  get marginBottom() {\n    return this.marginAll[2];\n  }\n  get marginLeft() {\n    return this.marginAll[3];\n  }\n  // create a sub chart in this chart\n  subChart(width = 100, height = 100) {\n    const chart = new Chart(this.group, width, height)\n      .translate(this.marginLeft, this.marginTop);\n    this.charts.push(chart);\n    return chart;\n  }\n  // update a extent for one dimension, i=0 -> x, i=1 -> y\n  updateExtentI(extent, i) {\n    const range = extent[1] - extent[0];\n    // const timer = 10;\n    // console.log(extent);\n    // const maxRange = Math.max(range, this.extents[i][1] - this.extents[i][0]);\n    const timer = range === 0 ? 10000 : (10 < range ? 1 : Math.round(10 / range));\n    this.extents[i][0] = Math.min(Math.floor(timer*(extent[0] - range * 0.02))/timer, this.extents[i][0]);\n    this.extents[i][1] = Math.max(Math.ceil(timer*(extent[1] + range * 0.02))/timer, this.extents[i][1]);\n    // console.log(`${i} > ${this.extents[i]}`)\n    return this;\n  }\n  // update both extent\n  updateExtent(xExtent, yExtent) {\n    return this.updateExtentI(xExtent, 0).updateExtentI(yExtent, 1);\n  }\n  // update the scale function with given data\n  updateScale(data, xfn = (d) => d[0], yfn = (d) => d[1]) {\n    return this.updateScaleX(data, xfn).updateScaleY(data, yfn);\n  }\n  // update scale.x\n  updateScaleX(data, xfn) {\n    if (data) this.updateExtentI(d3.extent(data, xfn), 0);\n    this.scale.x = d3.scaleLinear()\n      .domain(this.extents[0])\n      .rangeRound([0, this.width - this.marginRight - this.marginLeft]);\n    return this;\n  }\n  // update scale.y\n  updateScaleY(data, yfn) {\n    if (data) this.updateExtentI(d3.extent(data, yfn), 1);\n    this.scale.y = d3.scaleLinear()\n      .domain(this.extents[1])\n      .rangeRound([this.height - this.marginBottom - this.marginTop, 0]);\n    return this;\n  }\n  // a function that draw axis automatically\n  drawAxis() {\n    if (!this.axisHandles.x && this.drawHooks.xAxis) {\n      this.drawHooks.xAxis();\n    }\n    if (!this.axisHandles.y && this.drawHooks.yAxis) {\n      this.drawHooks.yAxis();\n    }\n  }\n  // set the x Axis draw function\n  xAxis(label = 'x', pos = 'bottom') {\n    let translateStr;\n    if (pos === 'bottom') {\n      translateStr = () => [0, this.scale.y(this.extents[1][0])];\n      this.axis.x = d3.axisBottom();\n    } else if (pos === 'top') {\n      translateStr = () => [0, this.scale.y(this.extents[1][1])];\n      this.axis.x = d3.axisTop();\n    } else {\n      // eslint-disable-next-line\n      console.log(`Unknown axis position: ${pos}`);\n      return this;\n    }\n    this.drawHooks.xAxis = () => {\n      this.axis.x.scale(this.scale.x);\n      this.axisHandles.x = this.group.append('g');\n      this.axisHandles.x\n        .attr('transform', 'translate(' + translateStr() + ')')\n        .call(this.axis.x);\n      if (label){\n        const labelSize = 13;\n        this.axisHandles.x.append('text')\n          .attr('transform', 'translate(' + [this.scale.x(this.extents[0][1]), 0] + ')')\n          .attr('dx', labelSize/2).attr('dy', labelSize/2)\n          .attr('text-anchor', 'start')\n          .attr('font-size', labelSize).style('fill', '#000')\n          .text(label);\n      }\n    };\n    return this;\n  }\n  yAxis(label='y', pos = 'left') {\n    let translateStr;\n    if (pos === 'left') {\n      translateStr = () => [this.scale.x(this.extents[0][0]), 0];\n      this.axis.y = d3.axisLeft();\n    } else if (pos === 'right') {\n      translateStr = () => [this.scale.x(this.extents[0][1]), 0];\n      this.axis.y = d3.axisRight();\n    } else {\n      // eslint-disable-next-line\n      console.log(`Unknown axis position: ${pos}`);\n      return this;\n    }\n    this.drawHooks.yAxis = () => {\n      this.axis.y.scale(this.scale.y);\n      this.axisHandles.y = this.group.append('g')\n        .attr('transform', 'translate(' + translateStr() + ')')\n        .call(this.axis.y);\n      if (label){\n        const labelSize = 13;\n        this.axisHandles.y.append('text')\n          .attr('transform', 'translate(' + [0, this.scale.y(this.extents[1][1])] + ')')\n          .attr('dx', 0).attr('dy', -labelSize/2)\n          .attr('text-anchor', 'middle')\n          .attr('font-size', labelSize).style('fill', '#000')\n          .text(label);\n      }\n    };\n    return this;\n  }\n  /*\n  * major api of drawing a line,\n  * this method will return a handle of <path> selector for users to further set styles\n  */\n  line(data, xfn = (d) => d[0], yfn = (d) => d[1]) {\n    // console.log(data);\n    this.updateScale(data, xfn, yfn);\n    let lineArtist;\n    if (this.artists.lines) {\n      lineArtist = this.artists.lines;\n    } else {\n      const self = this;\n      lineArtist = new LineArtist(self);\n      this.artists.lines = lineArtist;\n    }\n    const handle = lineArtist.plot(data, xfn, yfn);\n    return handle;\n  }\n  /*\n  * major api of filling an area surrounded by 2 lines,\n  * this method will return a handle of <path> selector for users to further set styles\n  */\n  area(data, xfn, y0fn, y1fn, color) {\n    this.updateScaleX(data, xfn)\n      .updateScaleY(data, y0fn)\n      .updateScaleY(data, y1fn);\n    let artist;\n    if (this.artists.areas) {\n      artist = this.artists.areas;\n    } else {\n      const self = this;\n      artist = new AreaArtist(self);\n      this.artists.areas = artist;\n    }\n    const handle = artist.plot(data, xfn, y0fn, y1fn, color);\n    return handle;\n  }\n  /*\n  * major api of drawing box plot,\n  * this method will return a handle of <g> selector for users to further set styles\n  */\n  box(data, width, xfn, y0fn, r1fn, r2fn, params={}) {\n    this.updateScaleX(data, xfn)\n      .updateScaleY(data, (d, i) => r2fn(d, i)[0])\n      .updateScaleY(data, (d, i) => r2fn(d, i)[1]);\n    let artist;\n    if (this.artists.boxes) {\n      artist = this.artists.boxes;\n    } else {\n      const self = this;\n      artist = new BoxArtist(self);\n      this.artists.boxes = artist;\n    }\n    const handle = artist.plot(data, width, xfn, y0fn, r1fn, r2fn, params={});\n    return handle;\n  }\n  // after all settings, call this methods for rendering\n  draw() {\n    this.transform();\n    // this.drawHooks.shapes.forEach((hook) => hook());\n    Object.keys(this.artists).forEach((name) => this.artists[name].draw());\n    this.charts.forEach((c) => c.draw());\n    this.drawAxis();\n  }\n  clean() {\n    this.charts.forEach((c) => c.clean());\n    Object.keys(this.artists).forEach((name) => this.artists[name].clean());\n    Object.keys(this.axisHandles).forEach((name) => {\n      if (this.axisHandles[name]) {\n        this.axisHandles[name].remove();\n        this.axisHandles[name] = null;\n      }\n    })\n    this.marginAll = [0, 0, 0, 0];\n    this.rotateFlag = false;\n    this.scale = { x: null, y: null };\n    this.extents = [[Infinity, -Infinity], [Infinity, -Infinity]];\n    // this.axis = { x: null, y: null };\n    this.drawHooks = { xAxis: null, yAxis: null};\n    this.charts = [];\n    return this;\n  }\n}\n\nexport class LineArtist extends Artist {\n  constructor(chart) {\n    super(chart);\n    this.data = [];\n    this.lines = [];\n  }\n  plot(data, xfn = (d) => d[0], yfn = (d) => d[1], color = defaultColorScheme(this.handles.length)) {\n    const handle = this.group.append('path');\n    const line = d3.line()\n      .x((d, i) => this.scale.x(xfn(d, i)))\n      .y((d, i) => this.scale.y(yfn(d, i)));\n    const drawHook = () => {\n      handle.datum(data)\n        .attr('d', line)\n        .attr('fill', 'none')\n        // .attr('stroke', color)\n        .attr('stroke-linejoin', 'round')\n        .attr('stroke-linecap', 'round');\n      // handle.attr('stroke', color);\n    };\n    this.data.push(data);\n    this.handles.push(handle);\n    this.lines.push(line);\n    this.drawHooks.push(drawHook);\n    return handle;\n  }\n}\n\nexport class AreaArtist extends Artist {\n  constructor(chart) {\n    super(chart);\n    this.data = [];\n    this.areas = [];\n  }\n  plot(data, xfn, y0fn, y1fn, color = defaultColorScheme(this.handles.length)) {\n    const handle = this.group.append('path');\n    const area = d3.area()\n        .x((d, i) => this.scale.x(xfn(d, i)))\n        .y0((d, i) => this.scale.y(y0fn(d, i)))\n        .y1((d, i) => this.scale.y(y1fn(d, i)));\n    const drawHook = () => {\n      handle.datum(data);\n      handle\n        // .attr('fill', color)\n        .attr('d', area);\n    };\n    this.data.push(data);\n    this.handles.push(handle);\n    this.areas.push(area);\n    this.drawHooks.push(drawHook);\n    return handle;\n  }\n}\n\nexport class BoxArtist extends Artist{\n  constructor(chart) {\n    super(chart);\n    this.data = [];\n    // this. = [];\n  }\n  plot(data, width, xfn, y0fn, r1fn, r2fn, params){\n    const handle = this.group.append('g');\n    const drawHook = () => {\n      data.forEach((d, i) => {\n        const xShift = this.scale.x(xfn(d, i));\n        BoxArtist.drawBox(\n          handle,\n          [xShift - (width / 2), xShift + (width / 2)],\n          this.scale.y(y0fn(d, i)),\n          r1fn(d, i).map((v) => this.scale.y(v)),\n          r2fn(d, i).map((v) => this.scale.y(v)),\n        );\n      });\n    };\n    this.handles.push(handle);\n    this.drawHooks.push(drawHook);\n    this.data.push(data);\n    return handle;\n  }\n  static drawBox(el, xs, mean, range1, range2) {\n    const box = el.append('g');\n    // const x = width / 2;\n    // console.log(range1);\n    const mid = (xs[0] + xs[1]) / 2;\n    box.append('rect')\n      .attr('x', xs[0])\n      .attr('y', Math.min(range1[0], range1[1]))\n      .attr('width', xs[1] - xs[0])\n      .attr('height', Math.abs(range1[1] - range1[0]));\n    box.append('line')\n      .attr('x1', xs[0])\n      .attr('y1', mean)\n      .attr('x2', xs[1])\n      .attr('y2', mean)\n      .attr('stroke-width', 0.5);\n    for (let i = 0; i < 2; i += 1) {\n      box.append('line')\n        .attr('x1', mid)\n        .attr('y1', range1[i])\n        .attr('x2', mid)\n        .attr('y2', range2[i])\n        .attr('stroke-width', 0.5);\n      box.append('line')\n        .attr('x1', xs[0])\n        .attr('y1', range2[i])\n        .attr('x2', xs[1])\n        .attr('y2', range2[i])\n        .attr('stroke-width', 0.5);\n    }\n    return box;\n  }\n}\n\nexport default {\n  // LineArtist,\n  Chart,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/chart.js","import * as d3 from 'd3';\nimport { SentenceRecord, CoClusterProcessor } from '../preprocess'\n\nconst layoutParams = {\n  nodeIntervalScale: 1.5,\n  color: d3.scaleOrdinal(d3.schemeCategory20),\n  radiusScale: 1.5,\n  widthScale: 1.5,\n  avgValueRange: [-0.5, 0.5],\n  rulerScale: 0.2,\n  markerWidthScale: 0.6,\n  markerHeightScale: 0.3,\n  wordSize: 12,\n  labelSize: 10,\n  negColor: '#09adff',\n  posColor: '#ff5b09',\n};\n\n// example usage:\n// see TestView.vue: draw3();\n\nclass SentenceLayout{\n  constructor(selector, compare = false, params = layoutParams){\n    this.group = selector;\n    this._size = [50, 600];\n    this._rectSize = [20, 50];\n    this._sentence;\n    this._coCluster;\n    this.params = params;\n    // this.handles = [];\n    this._dataList = [];\n    this.type = 'bar2';\n    this.compare = compare;\n    this._mouseoverCallback = function(_) {console.log(_)};\n    this._barMouseoverCallback = function(_) {console.log(_)};\n    this.transform();\n    // each data in data list has 3 handles after drawing:\n    // el: the group holding all elements of a word\n    // els: 3 groups, each holds a pie chart\n    // handles: 3 selector, each holds all paths in a pie chart\n  }\n  mouseoverCallback(func) {\n    return arguments.length ? (this._mouseoverCallback = func, this) : this._mouseoverCallback;\n  }\n  barMouseoverCallback(func) {\n    return arguments.length ? (this._barMouseoverCallback = func, this) : this._barMouseoverCallback;\n  }\n  size(size){\n    return arguments.length ? (this._size = size, this) : this._size;\n  }\n  transform(transformStr = '') {\n    if (this.compare)\n      transformStr += 'scale(-1, 1) translate(' + [-this.nodeWidth, 0] + ')'; // + transformStr;\n    console.log(transformStr);\n    this.group\n      .transition()\n      .duration(200)\n      .attr('transform', transformStr);\n    return this;\n  }\n  get radius() {\n    if (!this._radius){\n      const radius = this._size[0] / (this.params.widthScale*2);\n      if (this._sentence && !this._radius){\n        const radius2 = this._size[1] /\n          (this.params.nodeIntervalScale * (this._sentence.length - 1) + this.params.radiusScale * 2 * this._sentence.length);\n        // const radius2 = (this._size[1] - (this.sentence.length - 1) * this.params.nodeIntervalScale * radius) /\n        //   (this.sentence.length * this.params.radiusScale * 2);\n        // console.log(this.sentence.length)\n        // console.log(radius2);\n        this._radius = radius < radius2 ? radius : radius2;\n      } else {\n        return radius;\n      }\n    }\n    return this._radius;\n  }\n  get nodeHeight() {\n    return this.params.radiusScale * 2 * this.radius;\n  }\n  get nodeWidth() {\n    return this.params.widthScale * 2 * this.radius;\n  }\n  get nodeInterval() {\n    return this.params.nodeIntervalScale * this.radius;\n  }\n  get dataList() {\n    return this._dataList;\n  }\n  // set the sentence data used\n  sentence(sentence) {\n    return arguments.length ? (this._sentence = sentence, this) : this._sentence;\n  }\n  // set the coCluster data used\n  coCluster(coCluster) {\n    return arguments.length ? (this._coCluster = coCluster, this) : this._coCluster;\n  }\n  // set the words that used\n  words(words) {\n    return arguments.length ? (this._words = words, this) : this._words;\n  }\n  // start to layout words\n  draw(type=this.type, ) {\n    this.type = type;\n    // prepare\n    this.prepareDraw(type);\n\n    // draw\n    if (type === 'pie') {\n      this._dataList.forEach((data, i) => {\n        const pos = this.getWordPos(i);\n        const g = this.group.append('g');\n        this.drawWord(g, data, i)\n          .attr('transform', 'translate(' + pos + ')');\n      });\n    } else {\n      this._dataList.forEach((data, i) => {\n        const pos = this.getWordPos(i);\n        if(i > 0){\n          const gl = this.group.append('g');\n          this.drawConnection(gl, data, i)\n            .attr('transform', 'translate(' + [pos[0], pos[1] - this.nodeInterval] + ')')\n        }\n        const g = this.group.append('g');\n        this.drawWord(g, data, i)\n          .attr('transform', 'translate(' + pos + ')');\n      });\n    }\n    // const rectGroup = this.group.append('g');\n    // this.drawWordRect(rectGroup, this._dataList, this._rectSize, this.extentChangeCallback())\n    //   .attr('transform', 'translate(-50, 50)');\n\n    return this;\n  }\n\n  drawWordRect(g, data, rectSize, func) {\n    data.forEach((d, i) => {\n      g.append('text')\n        .text(d.word)\n        .style('text-anchor', 'middle')\n        .attr('transform', 'rotate(90)translate(' + [rectSize[1] * i + rectSize[1] / 2, -rectSize[0]/4] + ')');\n\n      g.append('rect')\n      .attr('x', 0)\n      .attr('y', i * rectSize[1])\n      .attr('width', rectSize[0])\n      .attr('height', rectSize[1])\n      .attr('fill', 'lightgray')\n      .attr('stroke-width', 2)\n      .attr('stroke', 'blue')\n      .attr('opacity', 0.2);\n    });\n    g.append('g').call(\n      d3.brushY()\n        .extent([[0, 0], [rectSize[0], rectSize[1] * data.length]])\n        .on('end', function() {\n          if (!d3.event.sourceEvent) return;\n          if (!d3.event.selection) return;\n          let extent = d3.event.selection;\n          extent[0] = Math.round(extent[0] / rectSize[1]) * rectSize[1];\n          extent[1] = Math.round(extent[1] / rectSize[1]) * rectSize[1];\n          d3.select(this).transition().call(d3.event.target.move, extent);\n          func([Math.round(extent[0] / rectSize[1]), Math.round(extent[1] / rectSize[1])])\n          // console.log(d3.event.selection);\n        })\n    );\n\n    return g;\n  }\n\n  prepareDraw(type = this.type) {\n    if (this._dataList.length !== this._sentence.length || this._dataList[0].data[0].current.length != this._coCluster.labels.length)\n      this._dataList = this.preprocess(this._sentence, this._coCluster, this._words);\n    else\n      this.clean();\n    // adaptive height\n    let maxValue = 0.1;\n    this.dataList.forEach((data) => {\n      data.data.forEach((clst) => {\n        const clstMaxP =  clst.currents[0] - Math.min(clst.updateds[0], 0);\n        const clstMaxN =  clst.currents[1] - Math.min(clst.updateds[1], 0);\n        const clstMax = Math.max(clstMaxP/clst.size, Math.abs(clstMaxN/clst.size));\n        maxValue = maxValue < clstMax ? clstMax : maxValue;\n      })\n    });\n    maxValue = Math.ceil(maxValue * 11) / 10;\n    this.params.avgValueRange = [-maxValue, maxValue];\n    if (type === 'bar'){\n      this.scaleHeight = d3.scaleLinear()\n        .range([-this.nodeHeight/2, this.nodeHeight/2])\n        .domain(this.params.avgValueRange);\n      let stateSize = 0;\n      for( let j = 0; j < this._dataList[0].data.length; j++) stateSize += this._dataList[0].data[j].size;\n      this.scaleWidth = d3.scaleLinear()\n      .range([0, this.nodeWidth])\n      .domain([0, stateSize]);\n    }\n    else if (type === 'bar2')\n      this.scaleHeight = d3.scaleLinear()\n        .range([-this.nodeHeight/2, this.nodeHeight/2])\n        .domain(this.params.avgValueRange);\n    this.drawWord = type === 'pie' ? this.drawOneWordPie : (type === 'bar' ? this.drawOneWordBar : this.drawOneWordBar2);\n    this.drawConnection = type === 'bar' ? this.drawOneConnection : (type === 'bar2' ? this.drawOneConnection2 : null);\n\n  }\n  // remove all the elements, all the preprocessed data are kept\n  clean() {\n    this._dataList.forEach(data => {\n      if (data.el)\n        data.el\n          .transition()\n          .duration(300)\n          .style('opacity', 0)\n          .remove();\n      // data.el = null;\n      // data.els = null;\n      // data.handles = null;\n    });\n  }\n  destroy() {\n    this.clean();\n    this._dataList = [];\n  }\n  // get the position [x, y] of a word regarding this.group\n  getWordPos(i){\n    // if (this.type === 'bar')\n    //   return [this._size[0] / 2, this.radius * (this.params.radiusScale * (1 + 2 * i)) + i * this.nodeInterval];\n    // else\n      return [0, (this.nodeHeight + this.nodeInterval) * i]\n  }\n  // draw one word using bar chart\n  // data: {word: 'he', data: Array}\n  drawOneWordBar(el, data, i) {\n    const height = this.nodeHeight;\n    const width = this.nodeWidth;\n    const color = this.params.color;\n    console.log(data);\n    const scaleHeight = this.scaleHeight;\n    const scaleWidth = this.scaleWidth;\n\n    const bg = el.append('rect')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', width)\n      .attr('height', height)\n      .attr('stroke', 'gray')\n      .attr('stroke-width', 0.5)\n      .attr('fill', 'none');\n\n    const gSelector = el.selectAll('g')\n      .data(data.data);\n    const g1 = gSelector.enter()\n      .append('g');\n    const cur = g1.append('rect')\n      .attr('x', (d) => scaleWidth(d.accumulate))\n      .attr('y', (d) => height - scaleHeight(d.prev / d.size))\n      .attr('width', (d) => scaleWidth(d.size))\n      .attr('height', (d) => scaleHeight(d.prev / d.size))\n      .attr('fill', (d, j) => color(j))\n    g1.style('fill-opacity', 0.4)\n      .style('stroke', 'gray')\n      // .style('stroke-opacity', 0.5)\n      .style('stroke-width', 0.5)\n\n    const g2 = gSelector.enter()\n      .append('g');\n    const updated = g2.append('rect')\n      .attr('x', (d) => scaleWidth(d.accumulate))\n      .attr('y', (d) => height - (d.updated * d.major < 0 ? scaleHeight(d.prev / d.size) : (scaleHeight((d.prev + d.updated * d.major) / d.size))))\n      .attr('width', (d) => scaleWidth(d.size))\n      .attr('height', (d) => scaleHeight(Math.abs(d.updated) / d.size))\n      .attr('fill', (d, j) => d.updated * d.major < 0 ? 'white' : color(j));\n    g2.style('fill-opacity', 0.8)\n      .style('stroke', 'gray')\n      .style('stroke-width', 0.5)\n\n    data.el = el; // bind group\n    return el;\n  }\n\n  drawOneWordBar2(el, data, t, paintColor = false) {\n    const self = this;\n    const height = this.nodeHeight;\n    const width = this.nodeWidth;\n    const color = this.params.color;\n    // console.log(data);\n    const scaleHeight = this.scaleHeight;\n    const unitWidth = this.nodeWidth / data.data.length;\n    const posColor = this.params.posColor;\n    const negColor = this.params.negColor;\n\n    el.on('mouseover', function() {\n        // el.attr('class')\n        self._mouseoverCallback(data, t, true)\n      })\n      .on('mouseleave', function() {\n        self._mouseoverCallback(data, t, false);\n      })\n      .on('click', function() {\n        self._mouseoverCallback(data, t, false, true);\n      });\n    // bounding box\n    const bg = el.append('rect')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', width)\n      .attr('height', height)\n      .attr('stroke', 'black')\n      .attr('stroke-width', 1.0)\n      .attr('stroke-opacity', 0.3)\n      .attr('fill', 'white')\n      .attr('fill-opacity', 0);\n\n    const gSelector = el.selectAll('g')\n      .data(data.data);\n    const gCurrent = gSelector.enter()\n      .append('g')\n      .on('mouseenter' , function(d, i) {self._barMouseoverCallback(i, true); })\n      .on('mouseleave' , function(d, i) {self._barMouseoverCallback(i, false); });\n    const cur = gCurrent.append('rect')\n      .attr('x', (d, i) => unitWidth*i)\n      .attr('y', (d) => height/2 - scaleHeight(d.currents[0] / d.size))\n      .attr('width', (d) => unitWidth)\n      .attr('height', (d) => scaleHeight((d.currents[0]-d.currents[1]) / d.size))\n      .attr('fill', (d, j) => color(j))\n    gCurrent.style('fill-opacity', 0.4)\n      // .style('stroke-opacity', 0.5)\n      .attr('stroke', 'black')\n      .attr('stroke-width', 1.0)\n      .attr('stroke-opacity', 0.5);\n\n    gCurrent.append('path')\n      .attr('d', (d, i) => 'M ' + (unitWidth*i) + ' ' + (height/2 - scaleHeight(d.currents[0] / d.size))\n        + ' H ' + (unitWidth * (i+1) ))\n      .attr('stroke-width', 2);\n\n    gCurrent.append('path')\n      .attr('d', (d, i) => 'M ' + (unitWidth*i) + ' ' + (height/2 - scaleHeight(d.currents[1] / d.size))\n        + ' H ' + (unitWidth * (i+1) ))\n      .attr('stroke-width', 2);\n\n    const gUpdated1 = gSelector.enter()\n      .append('g');\n    const updated1 = gUpdated1.append('rect')\n      .attr('x', (d, i) => unitWidth * i)\n      .attr('y', (d) => height/2 + scaleHeight(-d.currents[1] / d.size))\n      .attr('width', (d) => unitWidth)\n      .attr('height', (d) => scaleHeight(Math.abs(d.updateds[1]) / d.size))\n      .attr('transform', (d) => d.updateds[1] < 0 ? ('translate(' + [0, -scaleHeight(Math.abs(d.updateds[1]) / d.size) ] + ')') : '')\n      .style('fill-opacity', 0.4);\n    if (paintColor) {\n      updated1.attr('fill', (d, j) => {\n        return d.updateds[1] > 0 ? 'none' : color(j);\n      });\n    } else {\n      updated1.attr('fill', (d, i) => {\n        return d.updateds[1] > 0 ? posColor : negColor;\n      });\n      cur.attr('fill', (d, j) => '#bbb');\n    }\n    gUpdated1 //.style('fill-opacity', 0.8)\n      .style('stroke-width', 0.5)\n      .style('stroke', 'none');\n\n\n    const gUpdated2 = gSelector.enter()\n      .append('g');\n    const updated2 = gUpdated2.append('rect')\n      .attr('x', (d, i) => unitWidth * i)\n      .attr('y', (d) => height/2 - scaleHeight(d.currents[0] / d.size))\n      .attr('width', (d) => unitWidth)\n      .attr('height', (d) => scaleHeight(Math.abs(d.updateds[0]) / d.size))\n      .attr('transform', (d) => d.updateds[0] < 0 ? ('translate(' + [0, -scaleHeight(Math.abs(d.updateds[0]) / d.size) ] + ')') : '')\n      // .attr('fill', (d, j) => d.updateds[0] < 0 ? 'none' : color(j))\n      .style('stroke-opacity', (d, j) => d.updateds[1] < 0 ? 1.0 : 1.0);\n    if (paintColor) {\n      updated2.attr('fill', (d, j) => {\n        return d.updateds[0] < 0 ? 'none' : color(j);\n      });\n    } else {\n      updated2.attr('fill', (d, i) => {\n        return d.updateds[0] < 0 ? negColor : posColor;\n      });\n    }\n    gUpdated2 //.style('fill-opacity', 0.8)\n      .style('stroke-width', 0.5)\n      .style('stroke', 'none')\n      .style('fill-opacity', 0.4);\n\n\n    el.append('path').attr('d', 'M0 ' + height/2 + ' H ' + width)\n      .style('stroke', 'black').style('stroke-width', 0.5);\n\n    // append labels\n    const fontSize = this.params.wordSize;\n    const labelSize = this.params.labelSize;\n    const valRange = [this.params.avgValueRange[1], this.params.avgValueRange[0]];\n    const wordX = this.compare ? (4 + width) : (-2-fontSize);\n    el.selectAll('text')\n      .data(valRange).enter()\n      .append('text')\n      .attr('x', this.compare ? (width + 2) : -2)\n      .attr('y', (d, i) => i * (height - 4) + 5)\n      .attr('text-anchor', this.compare ? 'start' : 'end')\n      .attr('font-size', labelSize)\n      .text((d) => d);\n\n    el.append('text')\n      .attr('x', wordX)\n      .attr('y', (height/2))\n      .attr('text-anchor', 'middle')\n      .attr('transform', 'rotate(' + [90, wordX, (height/2)] + ')')\n      .attr('font-size', fontSize)\n      .text(data.word);\n\n    cur.each(function(d) {\n      if(d.els) d.els[0] = this;\n      else d.els = [this];\n    });\n    updated1.each(function(d) { d.els[1] = this; });\n    updated2.each(function(d) { d.els[2] = this; });\n    data.els = [cur, updated1, updated2];\n    data.el = el; // bind group\n    data.bg = bg;\n    return el;\n  }\n\n  drawOneConnection2(el, data, t, paintColor=false) {\n    const height = this.nodeInterval;\n    // const width = this.nodeWidth;\n    const color = paintColor ? this.params.color : (i) => {\n      return data.data[i].currents[0] + data.data[i].currents[1] > 0 ? this.params.posColor : this.params.negColor;\n    };\n    // console.log(data);\n    // const scaleHeight = this.scaleHeight;\n    const unitWidth = this.nodeWidth / data.data.length;\n    const rulerWidth = this.params.rulerScale * unitWidth;\n    const markerWidth = this.params.markerWidthScale * unitWidth;\n    const markerHeight = this.params.markerHeightScale * unitWidth;\n    const gs = el.selectAll('g')\n      .data(data.data).enter()\n      .append('g');\n    const rulers1 = gs.append('rect')\n      .attr('x', (d, i) => unitWidth * (i+0.5) - rulerWidth/2).attr('y', 0)\n      .attr('width', rulerWidth).attr('height', (d) => (height-markerHeight) * d.keptRate)\n      .style('stroke', 'none').style('fill', (d, i) => color(i)).style('fill-opacity', 0.5);\n\n    const rulers2 = gs.append('rect')\n      .attr('x', (d, i) => unitWidth * (i+0.5) - rulerWidth/2).attr('y', (d) => (height-markerHeight) * d.keptRate)\n      .attr('width', rulerWidth).attr('height', (d) => height - (height-markerHeight) * d.keptRate)\n      .style('stroke', 'none').style('fill', 'gray').style('fill-opacity', 0.5);\n\n    // const markers = gs.append('rect')\n    //   .attr('x', (d, i) => unitWidth * (i+0.5) - markerWidth/2).attr('y', (d) => height * (d.keptRate))\n    //   .attr('width', markerWidth).attr('height', markerHeight);\n\n    const markers = gs.append('path')\n      .attr('d', (d, i) => {\n        return 'M' + (unitWidth * (i+0.5) - markerWidth/2) + ' ' + ((height-markerHeight) * d.keptRate)\n          + ' ' + 'H' + ' ' + (unitWidth * (i+0.5) + markerWidth/2)\n          + ' ' + 'L' + ' ' + (unitWidth * (i+0.5)) + ' ' + ((height-markerHeight) * d.keptRate + markerHeight);\n      });\n\n    return el;\n  }\n\n  drawOneConnection(el, data, i) {\n    const height = this.nodeInterval;\n    const width = this.nodeWidth;\n    const color = this.params.color;\n    console.log(data);\n    // const scaleHeight = this.scaleHeight;\n    const scaleWidth = this.scaleWidth;\n    const calPoints = (clst) => {\n      const arr = new Array(4);\n      const mar = (1 - clst.keptRate) * clst.size / 2;\n      arr[0] = [scaleWidth(clst.accumulate), 0];\n      arr[1] = [scaleWidth(clst.accumulate + clst.size), 0];\n      arr[2] = [scaleWidth(clst.accumulate + clst.size - mar), height];\n      arr[3] = [scaleWidth(clst.accumulate + mar), height];\n      return arr[0] + ' ' + arr[1] + ' ' + arr[2] + ' ' + arr[3];\n    }\n    el.selectAll('polygon')\n      .data(data.data).enter()\n      .append('polygon')\n      .attr('points', (d) => calPoints(d))\n      .attr('fill', (d, j) => color(j))\n      .attr('fill-opacity', 0.6);\n    return el;\n  }\n  // draw one word\n  drawOneWordPie(el, data, i) {\n    const radius = this.radius;\n    const color = this.params.color;\n    console.log(data);\n    let arc1 = d3.arc()\n      .innerRadius(1)\n      .outerRadius((d) => {\n        // console.log(d);\n        return radius * d.data.keptRate;\n      });\n\n    let arc2 = d3.arc()\n      .innerRadius((d) => radius * d.data.keptRate)\n      .outerRadius(radius);\n\n    let arc3 = d3.arc()\n      .innerRadius((d) => { return radius * (d.data.updatedRate < 0 ? (1 + d.data.updatedRate) : 1); })\n      .outerRadius((d) => { return radius * (d.data.updatedRate < 0 ? 1 : (1 + d.data.updatedRate)); });\n\n    let arcs = [arc1, arc3, arc2];\n    let pie = d3.pie()\n      .sort(null)\n      .value((d) => (d.prev ? d.prev : d.current));\n\n    const gs = new Array(3);\n    const handles = new Array(3);\n    for (let j = 0; j < 3; j++){\n      gs[j] = el.append('g');\n      if (i === 0 && j === 0)\n        continue;\n      handles[j] = gs[j].selectAll(\".arc\")\n        .append('g')\n        .classed('arc', true)\n        .data(pie(data.data)).enter()\n        .append(\"path\")\n        .attr(\"d\", arcs[j])\n        .attr('stroke', 'gray')\n        .attr('stroke-width', 0.3)\n        .attr('fill', (d, k) => (j === 2 ? 'gray' : color(k)));\n    };\n    handles[1].attr('fill-opacity', (d, k) => (data.data[k].updatedRate < 0 ? 0.3 : 0.7))\n    gs[0].attr('fill-opacity', 0.7);\n    // gs[1].attr('fill-opacity', 0.6);\n    gs[2].attr('fill-opacity', 0.0);\n\n    data.els = gs; // 3 groups, each group corresponds to each ring of pie chart\n    data.handles = handles; // 3 handles, each handle is a selector of paths of the pie chart\n    data.el = el; // bind group\n    return el;\n  }\n  preprocess(sentence, coCluster, words) {\n    const len = sentence.length;\n    const clusterNum = coCluster.labels.length;\n    const stateNum = sentence[0].length;\n    const clustersSize = coCluster.colClusters.map((clst) => {\n      return clst.length;\n    });\n    const accClustersSize = new Float32Array(clustersSize.length);\n    for (let i = 1; i < accClustersSize.length; i++)\n      accClustersSize[i] += accClustersSize[i-1] + clustersSize[i-1];\n    // const info\n    // let infoCurrent\n    const currentStates = sentence.map((word) => {\n      return coCluster.colClusters.map((cluster) => {\n        return cluster.map((idx) => {\n          return word[idx];\n        });\n      });\n    });\n\n    const updatedData = sentence.map((word, t)=>{\n      if (t === 0) return word;\n      return word.map((v, j) => {\n        return v - sentence[t-1][j];\n      });\n    })\n\n    const infoPositive = new Array(len);\n    const infoNegative = new Array(len);\n    const infoCurrent = new Array(len);\n    for (let t = 0; t < len; t++) {\n      infoPositive[t] = new Float32Array(clusterNum);\n      infoNegative[t] = new Float32Array(clusterNum);\n      infoCurrent[t] = new Float32Array(clusterNum);\n      for (let i = 0; i < clusterNum; i++) {\n        for (let j = 0; j < clustersSize[i]; j++) {\n          if (currentStates[t][i][j] > 0) {\n            infoPositive[t][i] += currentStates[t][i][j];\n          } else {\n            infoNegative[t][i] += currentStates[t][i][j];\n          }\n          infoCurrent[t][i] += Math.abs(currentStates[t][i][j]);\n        }\n      }\n    }\n\n    const infoPrevious = [new Float32Array(clusterNum), ...infoCurrent.slice(0, len-1)];\n    const h_tij = [currentStates[0].map((clst) => new Float32Array(clst.length)), ...currentStates];\n    // console.log(h_tij);\n    const infoKept = new Array(len);\n    const keptPositive = new Array(len);\n    const keptNegative = new Array(len);\n    for (let t = 0; t < len; t++) {\n      infoKept[t] = new Float32Array(clusterNum);\n      keptPositive[t] = new Float32Array(clusterNum);\n      keptNegative[t] = new Float32Array(clusterNum);\n      for (let i = 0; i < clusterNum; i++) {\n        for (let j = 0; j < clustersSize[i]; j++){\n          const prev = h_tij[t][i][j];\n          const cur = h_tij[t+1][i][j];\n          const ratio = cur / prev;\n          infoKept[t][i] += Math.abs(prev) * (ratio < 0 ? 0 : 1 < ratio ? 1 : ratio);\n          keptPositive[t][i] += prev > 0 ? (cur > 0 ? (cur > prev ? prev : cur) : 0) : 0;\n          keptNegative[t][i] += prev < 0 ? (cur < 0 ? (cur < prev ? prev : cur) : 0) : 0;\n        }\n      }\n    }\n\n    const dataList = words.map((word, t) => {\n      const data = Array.from(infoCurrent[t], (current, i) => {\n        const prev = infoPrevious[t][i];\n        // const kept = infoKept[t][i];\n        const keptP = keptPositive[t][i];\n        const keptN = keptNegative[t][i];\n        const kept = keptP - keptN;\n        const positive = infoPositive[t][i];\n        const negative = infoNegative[t][i];\n        const prevPositive = t > 0 ? infoPositive[t-1][i] : 0;\n        const prevNegative = t > 0 ? infoNegative[t-1][i] : 0;\n        const updatedPositive = positive - prevPositive;\n        const updatedNegative = negative - prevNegative;\n        const updated = updatedPositive + updatedNegative;\n        const size = clustersSize[i];\n        return {\n          currents: [positive, negative],\n          current: current,\n          prev: prev,\n          updatedRate: prev === 0 ? 0 : updated / prev,\n          keptRate: prev === 0 ? 0 : kept / prev,\n          updated: updated,\n          updateds: [updatedPositive, updatedNegative],\n          kepts: [keptP, keptN],\n          kept: kept,\n          size: clustersSize[i],\n          accumulate: accClustersSize[i],\n          major: Math.sign(positive + negative),\n        };\n      });\n      return {\n        word: word,\n        data: data,\n        response: updatedData[t],\n      };\n    });\n    return dataList;\n  }\n  get strengthByCluster() {\n    if (!this._sentence || !this._coCluster) return undefined;\n    if (this._dataList.length !== this._sentence.length || this._dataList[0].data[0].current.length != this._coCluster.labels.length)\n      this._dataList = this.preprocess(this._sentence, this._coCluster, this._words);\n    if (!this._strengthByCluster) {\n      this._strengthByCluster = this._dataList.map((word, i) => {\n        return word.data.map((clst, j) => {\n          return clst.size === 0 ? 0 : clst.updated / clst.size;\n        });\n      });\n    }\n    return this._strengthByCluster;\n  }\n};\n\nfunction sentence(selector, compare = false){\n  return new SentenceLayout(selector, compare);\n};\n\nexport {\n  sentence,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/sentence.js","import dataService from './services/dataService';\n\nexport class CoClusterProcessor {\n  constructor(modelName, stateName, nCluster = 10, params = { top_k: 300, mode: 'raw', layer: -1 }, sortBy = 'col') {\n    this.rawData;\n    this._rowClusters;\n    this._colClusters;\n    this._colSizes;\n    this._rolSizes;\n    this._aggregation_info = null;\n    this.modelName = modelName;\n    this.stateName = stateName;\n    this.nCluster = nCluster;\n    this.params = params;\n    this.sortBy = sortBy;\n  }\n  get correlation() {\n    return this.hasData ? this.rawData.data : undefined;\n  }\n  get labels() {\n    if (this.hasData && !this._labels) {\n      this._labels = [...new Set([...(this.colLabels), ...(this.rowLabels)])];\n      if (this.sortBy === 'col')\n        this._labels.sort((a, b) => this.colSizes[a] - this.colSizes[b]);\n      else if (this.sortBy === 'row')\n        this._labels.sort((a, b) => this.rowSizes[a] - this.rowSizes[b]);\n      // console.log(this._labels);\n    }\n    return this._labels;\n  }\n  get colSizes() {\n    if (this.hasData && !this._colSizes) {\n      const colSizes = new Int32Array(this.labels.length);\n      this.colLabels.forEach((label, i) => { colSizes[label] += 1; });\n      this._colSizes = colSizes;\n    }\n    return this._colSizes;\n  }\n  get rowSizes() {\n    if (this.hasData && !this._rowSizes) {\n      const rowSizes = new Int32Array(this.labels.length);\n      this.rowLabels.forEach((label, i) => { rowSizes[label] += 1; });\n      this._rowSizes = rowSizes;\n    }\n    return this._rowSizes;\n  }\n  get rowLabels() {\n    return this.hasData ? this.rawData.row : undefined;\n  }\n  get colLabels() {\n    return this.hasData ? this.rawData.col : undefined;\n  }\n  get ids() {\n    return this.hasData ? this.rawData.ids : undefined;\n  }\n\n  get words() {\n    return this.hasData ? this.rawData.words : undefined;\n  }\n\n  load() {\n    return dataService.getCoCluster(this.modelName, this.stateName, this.nCluster, this.params, (response) => {\n      if (response.status === 200) {\n        this.rawData = response.data;\n        console.log(this);\n      } else {\n        throw response;\n      }\n    });\n  }\n  get hasData() {\n    return Boolean(this.rawData);\n  }\n\n  strength_filter(strength, mode = this.params.mode) {\n    switch (mode) {\n      case 'positive':\n        return strength > 0 ? strength : 0;\n        break;\n      case 'negative':\n        return strength < 0 ? Math.abs(strength) : 0;\n        break;\n      case 'abs':\n        return Math.abs(strength);\n        break;\n      case 'raw':\n        return strength;\n        break;\n    }\n  }\n\n  Create2DArray(rowNum, colNum) {\n    return Array.from({ length: rowNum }, (v, i) => {\n      return new Float32Array(colNum); //Array.from({ length: colNum }, (v, i) => 0);\n    });\n  }\n\n  // sortData() {\n  //   if (this.hasData) {\n\n  //   }\n  // }\n  get aggregation_info() {\n    if (this.hasData && !this._aggregation_info) {\n      // const rowClusters = this.rowClusters;\n      // const colClusters = this.colClusters;\n      const row_cluster_2_col_cluster = this.Create2DArray(this.nCluster, this.nCluster);\n      const row_single_2_col_cluster = this.Create2DArray(this.rawData.row.length, this.nCluster);\n      const row_cluster_2_col_single = this.Create2DArray(this.nCluster, this.rawData.col.length);\n      const row_single_2_col_single = this.Create2DArray(this.rawData.row.length, this.rawData.col.length);\n      const cluster = [];\n      // calculate the correlation between clusters\n      this.correlation.forEach((strength_list, r_index) => {\n        strength_list.forEach((s, c_index) => {\n          let strength = this.strength_filter(s);\n          row_cluster_2_col_cluster[this.rawData.row[r_index]][this.rawData.col[c_index]] += strength / (this.rowSizes[this.rowLabels[r_index]] * this.colSizes[this.colLabels[c_index]]);\n          row_cluster_2_col_single[this.rawData.row[r_index]][c_index] += strength / this.rowSizes[this.rowLabels[r_index]];\n          row_single_2_col_cluster[r_index][this.rawData.col[c_index]] += strength / this.colSizes[this.colLabels[c_index]];\n          row_single_2_col_single[r_index][c_index] += strength;\n        });\n      });\n\n      this._aggregation_info = {\n        row_cluster_2_col_cluster: row_cluster_2_col_cluster,\n        row_single_2_col_cluster: row_single_2_col_cluster,\n        row_cluster_2_col_single: row_cluster_2_col_single,\n        row_single_2_col_single: row_single_2_col_single\n      };\n    }\n    return this._aggregation_info;\n  }\n\n  get cluster2cluster() {\n    if (this.hasData && !this._cluster2cluster) {\n      const row_cluster_2_col_cluster = this.Create2DArray(this.nCluster, this.nCluster);\n      this.correlation.forEach((strength_list, r_index) => {\n        strength_list.forEach((s, c_index) => {\n          let strength = this.strength_filter(s);\n          row_cluster_2_col_cluster[this.rawData.row[r_index]][this.rawData.col[c_index]] += strength;\n        });\n      });\n      this._cluster2cluster = row_cluster_2_col_cluster;\n    }\n    return this._cluster2cluster;\n  }\n\n  get single2cluster() {\n    if (this.hasData && !this._single2cluster) {\n      const row_single_2_col_cluster = this.Create2DArray(this.rawData.row.length, this.nCluster);\n      this.correlation.forEach((strength_list, r_index) => {\n        strength_list.forEach((s, c_index) => {\n          let strength = this.strength_filter(s);\n          row_single_2_col_cluster[r_index][this.rawData.col[c_index]] += strength;\n        });\n      });\n      this._single2cluster = row_single_2_col_cluster;\n    }\n    return this._cluster2cluster;\n  }\n\n  get cluster2single() {\n    if (this.hasData && !this._cluster2single) {\n      const row_cluster_2_col_single = this.Create2DArray(this.nCluster, this.rawData.col.length);\n      this.correlation.forEach((strength_list, r_index) => {\n        strength_list.forEach((s, c_index) => {\n          let strength = this.strength_filter(s);\n          row_single_2_col_single[r_index][c_index] += strength;\n        });\n      });\n      this._cluster2single = row_cluster_2_col_single;\n    }\n    return this._cluster2single;\n  }\n\n  get single2single() {\n    if (this.hasData && !this._single2single) {\n      const row_single_2_col_single = this.Create2DArray(this.rawData.row.length, this.rawData.col.length);\n      this.correlation.forEach((strength_list, r_index) => {\n        strength_list.forEach((s, c_index) => {\n          let strength = this.strength_filter(s);\n          row_single_2_col_cluster[r_index][this.rawData.col[c_index]] += strength;\n        });\n      });\n      this._single2cluster = row_single_2_col_cluster;\n    }\n    return this._cluster2cluster;\n  }\n\n  get rowClusters() {\n    if (this.hasData && !this._rowClusters) {\n      const rowClusters = Array.from({ length: this.labels.length }, (v, i) => []);\n      this.rawData.row.forEach((r, i) => {\n        // if (rowClusters[r] === undefined) {\n        //   rowClusters[r] = [];\n        // }\n        rowClusters[r].push(i);\n      });\n      this._rowClusters = new Array(this.labels.length);\n      this.labels.forEach((l, i) => this._rowClusters[i] = rowClusters[l]);\n    }\n    return this._rowClusters;\n  }\n  get colClusters() {\n    if (this.hasData && !this._colClusters) {\n      const colClusters = Array.from({ length: this.labels.length }, (v, i) => []);\n      this.rawData.col.forEach((c, i) => {\n        if (colClusters[c] === undefined) {\n          colClusters[c] = [];\n        }\n        colClusters[c].push(i);\n      });\n      this._colClusters = new Array(this.labels.length);\n      this.labels.forEach((l, i) => this._colClusters[i] = colClusters[l]);\n    }\n    return this._colClusters;\n  }\n\n  static identifier(processor) {\n    return `${processor.modelName}${processor.stateName}${processor.nCluster}${processor.params.layer+1}`;\n  }\n\n}\n\nexport class SentenceRecord {\n  constructor(inputs, modelName) {\n    this.inputs = inputs;\n    this.tokens;\n    this.records;\n    this.modelName = modelName;\n  }\n  evaluate(modelName = this.modelName) {\n    return dataService.getTextEvaluation(modelName, this.inputs, (response => {\n      if (response.status === 200) {\n        const data = response.data;\n        this.tokens = data.tokens[0]; // assume one sentence\n        this.records = data.records[0];\n      } else {\n        throw response;\n      }\n    }));\n  }\n  get states() {\n    if (this.records && !this._states) {\n      this._states = Object.keys(this.records[0]);\n    }\n    return this._states;\n  }\n  get layerNum() {\n    if (this.records && !this._layerNum) {\n      this._layerNum = this.records[0][this.states[0]].length;\n    }\n    return this._layerNum;\n  }\n  getRecords(stateName, layer = -1) {\n    if (this.records) {\n      layer = layer === -1 ? this.layerNum - 1 : layer;\n      console.log(layer);\n      return this.records.map((word) => {\n        return word[stateName][layer];\n      });\n    }\n    return undefined;\n  }\n}\n\nexport class StateStatistics {\n  constructor(modelName, stateName, layer = -1, top_k = 600) {\n    this.modelName = modelName;\n    this.stateName = stateName;\n    this.layer = layer;\n    this.top_k = top_k;\n    this.data;\n  }\n  load() {\n    if (this.data) return Promise.resolve(\"Already loaded\");\n    return dataService.getStateStatistics(this.modelName, this.stateName, this.layer, this.top_k, (response) => {\n      this.data = response.data;\n    });\n  }\n  get stateNum() {\n    return this.data ? this.data.mean[0].length : undefined;\n  }\n  get statesData() { // calculate statistics for each state unit\n    if (this.data && !this._statesData) {\n      this._statesData = this.data.mean[0].map((_, j) => {\n        const data = {\n          words: this.data.words,\n          // freqs: this.data.freqs,\n          mean: this.data.mean.map((m) => m[j]),\n          low1: this.data.low1.map((m) => m[j]),\n          low2: this.data.low2.map((m) => m[j]),\n          high1: this.data.high1.map((m) => m[j]),\n          high2: this.data.high2.map((m) => m[j]),\n          rank: this.data.sort_idx.map((indices) => {\n            return indices.findIndex((idx) => (idx === j));\n          }),\n        };\n        return data;\n      });\n    }\n    return this._statesData;\n  }\n  get word2Id() {\n    if (this.data && !this._word2Id) {\n      const word2Id = {}\n      this.data.words.forEach((word, i) => {\n        word2Id[word] = i;\n      })\n      this._word2Id = word2Id;\n    }\n    return this._word2Id;\n  }\n  get wordsData() {\n    if (this.data && !this._wordsData) {\n      this._wordsData = this.data.mean.map((mean, i) => {\n        const data = {\n          mean: mean,\n          range1: this.data.low1[i].map((low, j) => [low, this.data.high1[i][j]]),\n          range2: this.data.low2[i].map((low, j) => [low, this.data.high2[i][j]]),\n          word: this.data.words[i],\n          sort_idx: this.data.sort_idx[i],\n        };\n        return data;\n      });\n    }\n    return this._wordsData;\n  }\n  statOfWord(word) {\n    if (this.data) {\n      const id = this.word2Id[word];\n      return this.wordsData[id];\n    }\n    return undefined;\n  }\n}\n\nfunction memorize(fn) {\n  var cache = {};\n  return function () {\n    var key = arguments.length + Array.prototype.join.call(arguments, \",\");\n    if (key in cache) {\n      return cache[key];\n    } else {\n      return cache[key] = f.apply(this, arguments);\n    }\n  }\n}\n\nexport default {\n  CoClusterProcessor,\n  SentenceRecord,\n  StateStatistics,\n  memorize,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/preprocess.js","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../node_modules/vue-loader/lib/style-rewriter?id=data-v-1ccedeee!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./InfoBoard.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./InfoBoard.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?id=data-v-1ccedeee!../../node_modules/vue-loader/lib/selector?type=template&index=0!./InfoBoard.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/InfoBoard.vue\n// module id = 280\n// module chunks = 1","\n/* styles */\nrequire(\"!!../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../node_modules/vue-loader/lib/style-rewriter?id=data-v-25441132!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler?id=data-v-25441132!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 283\n// module chunks = 1","export const distances = {\n  euclidean: function(v1, v2) {\n    var total = 0;\n    for (var i = 0; i < v1.length; i++) {\n        total += Math.pow(v2[i] - v1[i], 2);\n    }\n    return Math.sqrt(total);\n  },\n  manhattan: function(v1, v2) {\n    var total = 0;\n    for (var i = 0; i < v1.length ; i++) {\n      total += Math.abs(v2[i] - v1[i]);\n    }\n    return total;\n  },\n  max: function(v1, v2) {\n    var max = 0;\n    for (var i = 0; i < v1.length; i++) {\n      max = Math.max(max , Math.abs(v2[i] - v1[i]));\n    }\n    return max;\n  }\n};\n\nfunction mean(points){\n  var meanPoint = new Float32Array(points[0].length);\n  for(let i = 0; i < meanPoint.length; i++){\n    let sum = 0;\n    for (let j = 0; j < points.length; j++) {\n      sum += points[j][i];\n    }\n    meanPoint[i] = sum / points.length;\n  }\n  return meanPoint;\n}\n\nexport class kMeans{\n  constructor(centroids, distance=\"euclidean\") {\n    this.centroids = centroids || [];\n    this.distance = distance;\n    if (typeof this.distance == \"string\") {\n        this.distance = distances[this.distance];\n    }\n  }\n\n  randomCentroids(points, k){\n    let centroids = points.slice(0); // copy\n    centroids.sort(function() {\n        return (Math.round(Math.random()) - 0.5);\n    });\n    return centroids.slice(0, k);\n  }\n\n  classify(point) {\n    let min = Infinity,\n      index = 0;\n\n    for (let i = 0; i < this.centroids.length; i++) {\n      let dist = this.distance(point, this.centroids[i]);\n      if (dist < min) {\n        min = dist;\n        index = i;\n      }\n    }\n\n    return index;\n  }\n\n  cluster(points, k, maxIter, snapshotFn) {\n    k = k || Math.max(2, Math.ceil(Math.sqrt(points.length / 2)));\n    maxIter = maxIter || 100;\n    this.centroids = this.randomCentroids(points, k);\n\n    var assignment = new Int32Array(points.length);\n    var clusters = new Array(k);\n\n    var iterations = 0;\n    var movement = true;\n    // let iter = 0;\n    while (movement && iterations < maxIter) {\n      // update point-to-centroid assignments\n      for (let i = 0; i < points.length; i++) {\n         assignment[i] = this.classify(points[i]);\n      }\n\n      // update location of each centroid\n      movement = false;\n      for (let j = 0; j < k; j++) { // iterate over k clusters\n        const assigned = points.filter((p, i) => { return assignment[i] == j;})\n\n        if (!assigned.length) {\n          continue;\n        }\n\n        const centroid = this.centroids[j];\n        const newCentroid = new mean(assigned);\n\n        for (let g = 0; g < centroid.length; g++) {\n          if (newCentroid[g] != centroid[g]) {\n            movement = true;\n          }\n        }\n\n        this.centroids[j] = newCentroid;\n        clusters[j] = assigned;\n      }\n      iterations++;\n      if (snapshotFn){\n        snapshotFn(clusters, iterations);\n      }\n    }\n    if (iterations >= maxIter){\n      console.log(\"Clustering algorithm early stopped.\");\n    }\n\n    return assignment;\n  }\n\n  toJSON() {\n    return JSON.stringify(this.centroids);\n  }\n\n  fromJSON() {\n    this.centroids = JSON.parse(json);\n    return this;\n  }\n}\n\nexport function kmeans(vectors, k, maxIter=100, distance=\"euclidean\", snapshotFn=null) {\n   return (new kMeans(distance)).cluster(vectors, k, maxIter, snapshotFn);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/algorithm/cluster.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue';\nimport ElementUI from 'element-ui';\nimport 'theme/index.css';\nimport App from './App';\n// import router from './router';\n\nVue.use(ElementUI);\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  // router,\n  // template: '<App/>',\n  // components: {App},\n  render: h => h(App)\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","<template>\n  <div id=\"app\">\n    <!--<el-row :gutter=\"10\" class=\"header-menu\">-->\n      <el-menu theme=\"dark\" :default-active=\"''\" class=\"header-menu\" mode=\"horizontal\" @select=\"() => {console.log('Hi!');}\">\n        <el-menu-item class=\"logo\" index=\"1\">RNNVis</el-menu-item>\n        <el-menu-item index=\"2\">Info</el-menu-item>\n      </el-menu>\n    <!--</el-row>-->\n    <el-row :gutter=\"10\">\n      <el-col :span=\"6\" class=\"col-bg\" :gutter=\"15\">\n        <model-view></model-view>\n        <br>\n        <info-board v-if='!compare' :compare='false' :type='\"word\"' :id='\"info-word\"' :height='infoHeight*1.0'></info-board>\n        <info-board v-if='!compare' :compare='false' :type='\"state\"' :id='\"info-state\"' :height='infoHeight*0.8'></info-board>\n      </el-col>\n      <el-col :span=\"18\" class=\"col-bg\" :gutter=\"15\">\n        <!--<router-view></router-view>-->\n        <el-row>\n          <main-view :height=\"mainHeight\"> </main-view>\n        </el-row>\n        <el-row :gutter=\"10\">\n          <info-view v-if='compare' :height=\"infoHeight\"> </info-view>\n        </el-row>\n      </el-col>\n      <!--<el-col :span='6' class=\"col-bg border\" :gutter=\"15\">-->\n\n          <!--<text-view> </text-view>-->\n\n      <!--</el-col>-->\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport ModelView from 'components/ModelView';\nimport MainView from 'components/MainView';\nimport TextView from 'components/TextView';\nimport InfoView from 'components/InfoView';\nimport InfoBoard from 'components/InfoBoard';\nimport { bus } from './event-bus';\n\nexport default {\n  name: 'app',\n  components: { ModelView, MainView, TextView, InfoView, InfoBoard },\n  data() {\n    return {\n      height: 800,\n      width: 1000,\n      shared: bus.state,\n    };\n  },\n  computed: {\n    mainHeight: function () {\n      return this.compare ? this.height * 0.6 : this.height*0.9;\n    },\n    infoHeight: function () {\n      return this.height * 0.2;\n    },\n    compare: function () {\n      return this.shared.compare;\n    }\n  },\n  mounted() {\n    this.height = window.innerHeight;\n    this.width = window.innerWidth;\n    window.addEventListener(\"resize\", () => {\n      this.height = window.innerHeight;\n      this.width = window.innerWidth;\n    });\n  }\n};\n</script>\n\n<style>\n#app {\n  font-family: \"Helvetica Neue\",Helvetica,Arial,sans-serif;\n  /*font-family: 'Avenir', Helvetica, Arial, sans-serif;*/\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  /*color: #2c3e50;*/\n  margin-top: 10px;\n}\n\n.el-row {\n  margin-bottom: 10px;\n  &:last-child {\n    margin-bottom: 0;\n  }\n}\n.el-col {\n  border-radius: 4px;\n}\n.bg-purple-dark {\n  background: #abc;\n}\n.bg-purple {\n  background: white;\n}\n.bg-purple-light {\n  background: #fff;\n}\n.grid-content {\n  border-radius: 4px;\n  min-height: 36px;\n}\n.col-bg {\n  padding: 5px 0;\n  background-color: white;\n}\n.row-bg {\n  padding: 10px 0;\n  background-color: white;\n}\n.border {\n  border-style: solid;\n  border-width: 1px;\n  border-color: #99A9BF;\n}\n.normal {\n  font-weight: normal;\n}\nh4 {\n  font-size: 14px;\n  color: #555;\n  line-height: 18px;\n  margin-top: 0px;\n  padding-left: 10px;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  margin-bottom: -10px;\n  text-align: left;\n  background-color: rgba(128, 128, 128, 0.1);\n}\n\n.header-menu {\n  height: 60px;\n  /*margin-bottom: -10px;*/\n}\n\n.logo {\n  font-size: 18px;\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?3058d2fb","<template>\n  <div class=\"arc\">\n    <div class=\"header\">\n      <el-radio-group v-model=\"selectedState\" size=\"small\">\n        <el-radio-button v-for=\"state in states\" :label=\"state\"></el-radio-button>\n      </el-radio-group>\n    </div>\n    <svg :id=\"svgId\" :width=\"width\" :height=\"height\"> </svg>\n    <div class=\"arc_config\">\n      <el-col :span=\"4\">\n        <span>Cluster No.</span>\n      </el-col>\n      <el-col :span=\"6\">\n        <el-slider v-model=\"clusterNum\" :min=\"2\" :max=\"20\"></el-slider>\n      </el-col>\n    </div>\n    <!--<el-tabs v-model=\"selectedState\">\n      <el-tab-pane v-for=\"state in states\" :label=\"state\" :name=\"state\">\n\n\n      </el-tab-pane>\n    </el-tabs>-->\n  </div>\n</template>\n\n<script>\n  import * as d3 from 'd3';\n  import dataService from '../services/dataService.js';\n  import {bus, SELECT_MODEL} from 'event-bus.js';\n  import { WordCloud } from '../layout/cloud.js';\n\n\n\n  const cell2states = {\n    'GRU': ['state'],\n    'BasicLSTM': ['state_c', 'state_h'],\n    'BasicRNN': ['state'],\n  };\n\n  export default {\n    name: 'ArcView',\n    data(){\n      return{\n         states: '',\n         fdGraph: null,\n         selectedState: '',\n         model: '',\n         wordNum: 200,\n         clusterNum: 5,\n         cluster_data: {},\n         state_data: null,\n         word_data: null,\n         cluster_mode: 'positive',\n      };\n    },\n    props: {\n      width: {\n        type: Number,\n        default: 800,\n      },\n      height: {\n        type: Number,\n        default: 600,\n      },\n    },\n    watch: {\n      width: function (newWidth) {\n        this.fdGraph.update_scale();\n      },\n      height: function (newHeight) {\n        this.fdGraph.update_scale();\n      },\n      selectedState: function(newState) {\n        if (newState === 'state' || newState === 'state_c' || newState === 'state_h'){\n          if (this.word_data === null || this.state_data === null) {\n            let ps = this.loadStateWordData();\n            var p = this.loadClusterData();\n            ps.push(p);\n            Promise.all(ps).then( values => {\n              this.reset();\n            });\n          }\n        }\n      },\n      wordNum: function (newWordNum) {\n        console.log('wordNum has changed');\n      },\n\n      clusterNum: function (newClusterNum) {\n        if (newClusterNum > 1) {\n          this.loadClusterData().then( values => { this.reset() });\n        }\n      }\n    },\n    computed: {\n      svgId: function() {\n        return this.paneId(this.model, this.selectedState);\n      }\n    },\n    methods: {\n      paneId(model, state) {\n        return `arc-${model}-${state}-svg`;\n      },\n      loadStateWordData() {\n        let p1 = dataService.getProjectionData(this.model, this.selectedState, {}, response => {\n          this.state_data = response.data;\n          console.log('state data loaded');\n        });\n        let p2 = dataService.getStrengthData(this.model, this.selectedState, {top_k: this.wordNum}, response => {\n          this.word_data = response.data;\n          console.log('word data loaded');\n        });\n        return [p1, p2];\n      },\n\n      loadClusterData() {\n        return bus.loadCoCluster(this.model, this.selectedState, this.clusterNum,\n          { top_k: this.wordNum, mode: this.cluster_mode, })\n          .then(() => {\n            this.cluster_data = bus.getCoCluster(this.model, this.selectedState, this.clusterNum,\n              { top_k: this.wordNum, mode: this.cluster_mode, });\n            console.log(`co_cluster_data ${this.clusterNum} loaded`);\n          });\n      },\n      reset() {\n        if (this.fdGraph) {\n          this.fdGraph.destroy();\n        }\n        const svg = document.getElementById(this.paneId(this.model, this.selectedState));\n        this.fdGraph = new ForceDirectedGraph(svg);\n        this.fdGraph.process_data(this.state_data, this.word_data, this.cluster_data, this.cluster_mode);\n        this.fdGraph.insert_element();\n        this.fdGraph.start_simulation();\n      },\n    },\n    mounted() {\n      bus.$on(SELECT_MODEL, (modelName, compare) => {\n        if (compare)\n          return;\n        console.log(`Selected model in ArcView: ${modelName}`);\n        this.model = modelName;\n        bus.loadModelConfig(modelName).then( () => {\n          this.states = bus.availableStates(modelName);\n        });\n      });\n    },\n};\n\nclass ForceDirectedGraph{\n  constructor(svg, strengthfn) {\n    let self = this;\n    this.svg = d3.select(`#${svg.id}`);\n    this.width = svg.clientWidth;\n    this.height = svg.clientHeight;\n    this.arcNodes = null;\n    this.innerNodes = null;\n    this.links = null;\n    this.word_clouds = [];\n    this.simulation = null;\n    this.strengthfn = strengthfn || (v => {return v; });\n    this.graph = null;\n    this.rScale = 0.1;\n    this.radius = 1.5;\n    this.defaultAlpha = 0.3;\n    this.scale = {\n      x: null,\n      y: null,\n    };\n    this.color = d3.scaleOrdinal(d3.schemeCategory20);\n    this.strength_threshold = 0.5;\n    this.normal_opacity_line = 0.1;\n    this.high_opacity_line = 0.1;\n    this.low_opacity_line = 0.01;\n    this.normal_opacity_node = 0.5;\n    this.high_opacity_node = 1;\n    this.low_opacity_node = 0.01;\n    this.strength_range = [0.1, 5];\n    this.arc_radius = 0.9 * Math.min(self.width/2, self.height/2);\n    this.cluster_data = [];\n    this.g_links = null;\n\n    // this.arc_gap_angle = Math.PI / 8;\n  }\n\n  process_data(arc_data, inner_data, cluster_data, cluster_mode) {\n    let self = this;\n    let label2arc = [];\n    let label2inner = [];\n    let circle_radius = 0.9 * Math.min(self.width/2, self.height/2);\n    this.cluster_data = cluster_data;\n\n    label2arc = cluster_data.colClusters.map((cluster, i) => {\n      return { data: cluster.map((col) => {\n        return { index: col, label: i };\n      }) };\n    })\n    label2inner = cluster_data.rowClusters.map((cluster, i) => {\n      return {data: cluster.map((row) => {\n        return { index: row, label: i, word: cluster_data.words[row] };\n      })};\n    })\n    // compute links data and inner data\n    let links = [];\n    console.log(cluster_data);\n    Object.keys(label2inner).forEach( (inner_k) => {\n      label2inner[inner_k]['type'] = 'inner';\n      Object.keys(label2arc).forEach( (arc_k) => {\n        label2arc[arc_k]['type'] = 'arc';\n        // calculate strength between arc_cluster and inner_cluster\n        let cluster_strength = 0;\n        label2inner[inner_k]['data'].forEach((inner_item) => {\n          label2arc[arc_k]['data'].forEach((arc_item) => {\n            let strength_item = cluster_data.correlation[inner_item.index][arc_item.index];\n            switch(cluster_mode) {\n              case 'positive':\n                cluster_strength += strength_item > 0 ? strength_item : 0;\n                break;\n              case 'negative':\n                cluster_strength += strength_item < 0 ? Math.abs(strength_item) : 0;\n                break;\n              case 'abs':\n                cluster_strength += Math.abs(strength_item);\n                break;\n              case 'raw':\n                cluster_strength += strength_item;\n                break;\n            }\n          });\n        });\n        let link = {\n          source: label2arc[arc_k],\n          target: label2inner[inner_k],\n          strength: cluster_strength,\n        }\n        links.push(link);\n      //   if (label2arc[inner_k].links === undefined) {\n      //     label2arc[inner_k].links = [];\n      //   }\n      //   label2arc[inner_k].links.push(link);\n      })\n    });\n\n    //normalize_strength\n    links = self.strength_normalize(links, self.strength_range);\n\n    console.log(\"finished preparing data\");\n    this.graph = {\n      links: links,\n      label2arc: label2arc,\n      label2inner: label2inner,\n      arc_data: arc_data,\n      inner_data: inner_data,\n      nodes: label2arc.concat(label2inner),\n    };\n  }\n\n  strength_normalize(links, range) {\n    let strength_extent = d3.extent(links.map( (l) => {return l.strength; }));\n    console.log(strength_extent);\n    // console.log(range);\n    let scale = d3.scaleLinear()\n        .domain(strength_extent)\n        .range(range);\n    links.forEach( (l) => {l.strength = scale(l.strength); });\n    return links;\n  }\n\n  draw_states() {\n    let self = this;\n    let width = this.width, height = this.height;\n    let radius = 0.9 * Math.min(width/2, height/2);\n    this.svg.append('g')\n        .selectAll('circle')\n        .data(this.graph.states)\n        .enter()\n        .append('circle')\n        .attr('r', 3)\n        .attr('cx', function(d) {return width / 2 + radius * Math.cos(d.angle)})\n        .attr('cy', function(d) {return height / 2 + radius * Math.sin(d.angle)})\n        .style('fill', function(d) {return self.color(d.label);})\n  }\n\n  insert_element() {\n    let self = this;\n\n    // draw arc path\n    let g_arc = self.svg.append('g')\n        .attr('transform', 'translate(' + self.width / 2 + ',' + self.height / 2 + ')');\n\n    let arc = d3.arc()\n        .innerRadius(self.arc_radius - 10)\n        .outerRadius(self.arc_radius)\n\n    let arc_data = d3.pie()(self.graph.label2arc.map((d) => {return d.data.length}));\n\n    self.graph.label2arc.forEach((d, i) => {\n      g_arc.append('path')\n        .datum(arc_data[i])\n        .style('fill', self.color(i))\n        .attr('d', arc)\n      let arc_centroid = arc.centroid(arc_data[i]);\n      d.fx = arc_centroid[0] + self.width / 2;\n      d.fy = arc_centroid[1] + self.height / 2;\n    });\n\n    // this.links = this.svg.append('g')\n    //   .attr('class', 'links')\n    //     .selectAll('line')\n    //     .data(this.graph.links)\n    //     .enter()\n    //     .append('line')\n    //     .classed('active', false)\n    //     .style('opacity', (d) => {return this.normal_opacity_line;})\n    //     .style('stroke', (d) => {return self.color(0)});\n\n\n\n    // let lines_data = [];\n    // self.graph.links.forEach((l) => {\n    //   lines_data.push([l.source, l.target]);\n    // });\n\n\n    // this.graph.links.forEach( (l) => {\n    //   console.log(`bundle line : ${line(l)}`)\n    // })\n    // let g_path = this.svg.append('g');\n    // this.graph.links.forEach( (l) => {\n    //   g_path.append('path')\n    //     .datum(l)\n    //     .each(()\n    //     .attr('d', line)\n    //     .attr('stroke', 'green')\n    //     .attr('stroke-width', 3)\n    //     .attr('fill', 'orange')\n    // })\n    // let path = this.svg.append('g')\n    //   .selectAll('path')\n    //   .data(lines_data)\n    //   .enter()\n    //   .append('path')\n    //   .each((d) => {d.source = d[0], d.target = d[d.length - 1]})\n    //   .attr('d', line)\n    //   .attr('stroke', 'green')\n    //   .attr('stroke-width', 3)\n    //   .attr('fill', 'orange')\n\n    // this.links.each(function(d) {\n    //   d['el'] = this;\n    // });\n\n    let words_list = [];\n    self.graph.label2inner.forEach((d) => {\n      let words = d.data.map((w) => {\n        return { text: w.word, size: (300 - w.index) / 15}\n      });\n      const radius = Math.sqrt(words.length) * 10 + 1;\n      console.log(words);\n      d['el_wc'] = this.svg.append('g');\n      let myWordCloud = new WordCloud(d['el_wc'], radius);\n      myWordCloud.update(words);\n      self.word_clouds.push(d['el_wc']);\n    });\n\n    // this.innerNodes = this.svg.append('g')\n    //   .attr('class', 'innerNodes')\n    //     .selectAll('text')\n    //     .data(self.graph.label2inner)\n    //     .enter()\n    //     .append('text')\n    //     .classed('active', false)\n    //     .text(function(d, i) {return i })\n    //     .attr('x', self.width / 2)\n    //     .attr('y', self.height / 2)\n    //     .call(d3.drag()\n    //       .on('start', d => {\n    //         if (!d3.event.active) self.simulation.alphaTarget(self.defaultAlpha).restart();\n    //         d.fx = d.x;\n    //         d.fy = d.y;\n    //       })\n    //       .on('drag', d => {\n    //         d.fx = d3.event.x;\n    //         d.fy = d3.event.y;\n    //       })\n    //       .on('end', d => {\n    //         if (!d3.event.active) self.simulation.alphaTarget(0);\n    //         d.fx = null;\n    //         d.fy = null;\n    //     }))\n\n    // this.innerNodes.each(function(d) {\n    //   d['el'] = this;\n    // })\n  }\n\n  start_simulation() {\n    let self = this;\n    var repelForce = d3.forceCollide(20)\n      .radius(d => Math.sqrt(d.data.length) * 10 + 10);\n    var init = repelForce.initialize;\n    repelForce.initialize = function(nodes) {\n      init(nodes.filter(function(d) {return d.type === 'inner'; }));\n    }\n    this.simulation = d3.forceSimulation().alpha(this.defaultAlpha)\n        .force('link', d3.forceLink()\n          .distance(function(d) {return d.strength > 0 ? 50 / d.strength : 300; })\n          .strength(function (d) {return 1; }))\n        .force('repel', repelForce)\n    this.simulation\n      .nodes(self.graph.nodes)\n      .on('tick', () => self.ticked());\n\n    this.simulation.force('link')\n      .links(self.graph.links);\n  }\n\n  ticked() {\n    let self = this;\n    // self.links\n    //   .attr('x1', function (d) {return d.source.fx; })\n    //   .attr('y1', function (d) {return d.source.fy; })\n    //   .attr('x2', function (d) {return d.target.x; })\n    //   .attr('y2', function (d) {return d.target.y; })\n\n    self.graph.label2inner.forEach((d) => {\n      d['el_wc'].attr('transform', 'translate(' + d.x + ',' + d.y + ')');\n    });\n\n    let line = d3.line()\n      .curve(d3.curveBundle.beta(1))\n      .x((d) => {return d.x})\n      .y((d) => {return d.y})\n\n    let line_data = [];\n    let data_center = [];\n    self.graph.label2arc.forEach((d, i) => {\n      self.graph.label2inner.forEach((w) => {\n        if (data_center[i] === undefined) {\n          data_center[i] = {x: 0, y: 0};\n        }\n        data_center[i].x = data_center[i].x + w.x / self.graph.label2inner.length;\n        data_center[i].y = data_center[i].y + w.y / self.graph.label2inner.length;\n      });\n    });\n    // console.log(data_center);\n    self.graph.label2arc.forEach((d, i) => {\n      self.graph.label2inner.forEach((w) => {\n        line_data.push([d, data_center[i], w]);\n      });\n    });\n\n    if (self.g_links) {\n      self.g_links.remove();\n    }\n    self.g_links = this.svg.append('g');\n    self.g_links\n      .selectAll('path')\n      .data(line_data).enter()\n      .append('path')\n      .attr('class', 'links')\n      .attr('d', line)\n      .attr('stroke', self.color(0))\n\n  }\n\n  destroy() {\n      console.log(`Destroying Graph`);\n      this.simulation.nodes([]);\n      this.simulation.force(\"link\").links([]);\n      // this.links.remove();\n      this.g_links.remove();\n      // this.word_clouds.remove();\n      this.word_clouds.forEach((d) => {d.remove()});\n      // this.innerNodes.remove();\n      // this.arcNodes.remove();\n    }\n\n};\n\n</script>\n\n<style>\n  .links {\n    fill: none;\n    stroke-width: 2;\n    opacity: 0.3;\n  }\n\n  .links .active {\n    stroke-width: 3;\n  }\n\n  .words {\n\n  }\n\n  .words .active {\n\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ArcView.vue?024ba000","<style>\n:root {\n  --positive-color: '#ff5b09';\n  --negative-color: '#09adff';\n}\n.hidden-cluster {\n  stroke: black;\n  stroke-opacity: 0.2;\n  stroke-width: 1;\n  fill: gray;\n  fill-opacity: 0.1;\n}\n.hidden-cluster.active {\n  stroke-width: 1.5;\n  stroke-opacity: 0.7;\n  stroke: black;\n  fill-opacity: 0.1;\n}\n#middle_line {\n  stroke: lightskyblue;\n  stroke-width: 2;\n  stroke-dasharray: 3, 3;\n  fill: none;\n  opacity: 0.5;\n}\n.link.active {\n  opacity: 1;\n}\n.link {\n  fill: none;\n  opacity: 0.2;\n}\n.link.positive {\n  stroke: #ff5b09;\n}\n.link.negative {\n  stroke: #09adff;\n}\n.unit {\n  stroke: 'none';\n}\n.unit-active {\n  stroke: black;\n  stroke-width: 1.0;\n}\n.wordcloud.active {\n  stroke: 'black';\n  stroke-width: 1.5;\n  stroke-opacity: 0.7;\n}\n\n.axis path, .axis tick, .axis line {\n  fill: none;\n  stroke: none;\n}\n\n</style>\n<template>\n  <!--<div>-->\n    <!--<div class=\"header\">\n      <el-radio-group v-model=\"selectedState\" size=\"small\">\n        <el-radio-button v-for=\"state in states\" :label=\"state\"></el-radio-button>\n      </el-radio-group>\n    </div>-->\n\n    <svg :id='svgId' :width='width' :height='height'>\n      <defs>\n        <linearGradient id=\"state-legend\">\n          <stop class=\"stop1\" offset=\"0%\" stop-color='rgba(9, 173, 255, 1)'/>\n          <stop class=\"stop2\" offset=\"50%\" stop-color='rgba(128, 128, 128, 0.1)'/>\n          <stop class=\"stop3\" offset=\"100%\" stop-color='rgba(255, 91, 9, 1)'/>\n        </linearGradient>\n      </defs>\n    </svg>\n  <!--</div>-->\n</template>\n\n<script>\n  import * as d3 from 'd3';\n  import { bus, SELECT_MODEL, SELECT_STATE, CHANGE_LAYOUT, EVALUATE_SENTENCE, SELECT_UNIT, DESELECT_UNIT, CLOSE_SENTENCE, SELECT_SENTENCE_NODE, SELECT_COLOR} from '../event-bus';\n  import { WordCloud } from '../layout/cloud.js';\n  import { sentence } from '../layout/sentence.js';\n\n  const colorHex = ['#33a02c','#1f78b4','#b15928','#fb9a99','#e31a1c','#6a3d9a','#ff7f00','#cab2d6','#ffff99','#a6cee3','#b2df8a','#fdbf6f'];\n  const colorScheme = (i) => colorHex[i];\n  const positiveColor = '#ff5b09';\n  const negativeColor = '#09adff';\n\n  class LayoutParamsConstructor {\n    constructor(width=800, height=800){\n      this.unitWidthRatio = 1.0;\n      this.unitMarginRatio = 0.5;\n      this.clusterMarginRatio = 0.7;\n      this.wordCloudArcDegree = 110;\n      this.wordCloudHightlightRatio = 1.5;\n      this.wordCloudPaddingLength = 5;\n      this.wordCloudChord2ClusterDistance = 50;\n      this.wordCloudChordLength2ClientHeightRatio = 0.8;\n      this.wordCloudChord2stateClusterHeightRatio = 1.1;\n      this.wordCloudWidth2HeightRatio = 1 / 0.5;\n      this.littleTriangleWidth = 5;\n      this.littleTriangleHeight = 5;\n      this.strengthThresholdPercent = [0.2, 1];\n      this.wordSize2StrengthRatio = 3;\n      // this.dxShrinkFactor = 0.1;\n      this.dxShrinkFactor = 0.04;\n      this.spacePerSentence = 2/20;\n      this.sentenceNodeWidth = 100;\n      this.sentenceInitTranslate = [50, 10]\n      // this.middleLineX = 300;\n      this.middleLineY = 50;\n      // this.middleLineTranslationXAfterSentence = 200;\n      this.brushTranslationX = -100;\n      this.sentenceWordThreshold = 0.5;\n      this.posColor = colorScheme;\n      this.middleLineOffset = 0;\n      this.width = width;\n      this.height = height;\n      this.sentenceBrushRectWidth = 10;\n      this.mode = 'width';\n    }\n    // switchMode() {\n    //   this.mode = this.mode === 'height' ? 'width' : 'height';\n    // }\n    get wordCloudWidth () {\n      // return this.width*0.3;\n      return this.width*0.18;\n    }\n    get unitHeight () {\n      return this._unitHeight ? this._unitHeight : Math.max(3, Math.min(~~((this.width - 500)/500) + 4, 7));\n    }\n    updateWidth(width) {\n      if (typeof width === 'number')\n        this.width = Math.min(Math.max(500, width), 1400);\n    }\n    updateHeight(height) {\n      if (typeof height === 'number')\n        this.height = Math.min(Math.max(200, height), 1000);\n    }\n    get unitWidth() {\n      return this.unitHeight * this.unitWidthRatio;\n    }\n    get unitMargin() {\n      return this.unitHeight * this.unitMarginRatio;\n    }\n    get clusterMargin() {\n      return this.unitHeight * this.clusterMarginRatio;\n    }\n    get maxClusterWidth() {\n      // const width = Math.max(this.width, 500);\n      return Math.min(this.width/3.5, 400);\n    }\n    get middleLineX() {\n      // const width = Math.max(this.width, 500);\n      return this.width * 0.25 + this.middleLineOffset;\n    }\n    computeUnitParams() {\n      // const unitHeight = this.clusterHeight / this.cluster2UnitRatio;\n      // this.unitHeight = ~~unitHeight;\n    }\n    get cluster2UnitRatio() {\n      return (this.packNum + (this.packNum - 1 ) * this.unitMarginRatio + 2 * this.clusterMarginRatio );\n    }\n    computeParams (clusterNum, clusterInterval2HeightRatio, clusterSizes, callTime = 0) {\n      if (callTime > 10) return;\n      const maxClusterSize = clusterSizes.reduce((a, b) => Math.max(a, b), 0);\n      const totalClusterSize = clusterSizes.reduce((a, b) => a+b, 0);\n      // this._unitHeight = 4 + this.width / totalClusterSize / 4;\n      this._unitHeight = 3 + this.width / totalClusterSize / 3;\n      this.wordCloudChordLength = this.height * this.wordCloudChordLength2ClientHeightRatio;\n      this.clusterHeight = (this.wordCloudChordLength) /\n        (clusterNum + clusterNum * clusterInterval2HeightRatio - clusterInterval2HeightRatio);\n      this.packNum = ~~((this.clusterHeight / this.unitHeight + this.unitMarginRatio - 2 * this.clusterMarginRatio) / (1+this.unitMarginRatio));\n      this.clusterHeight =  this.unitHeight * this.cluster2UnitRatio;\n      this.clusterInterval = this.clusterHeight * clusterInterval2HeightRatio;\n\n      if (this.middleLineY < 0) {\n        // callTime++;\n        this.computeParams(clusterNum, clusterInterval2HeightRatio-0.2, clusterSizes, callTime+1);\n      }\n      const maxClusterWidth = Math.ceil(maxClusterSize / this.packNum) * (this.unitWidth + this.unitMargin);\n      if (maxClusterWidth < 0.8 * this.maxClusterWidth) {\n        // callTime++;\n        clusterInterval2HeightRatio += 0.2;\n        this.computeParams(clusterNum, clusterInterval2HeightRatio, clusterSizes, callTime+1);\n      }\n      if (maxClusterWidth > this.maxClusterWidth) {\n        // callTime++;\n        clusterInterval2HeightRatio -= 0.2;\n        this.computeParams(clusterNum, clusterInterval2HeightRatio, clusterSizes, callTime+1);\n      }\n      if (callTime > 0) return;\n      if (this.mode === 'height')\n        this.middleLineY = (this.height - this.clusterHeight * clusterNum - this.clusterInterval * (clusterNum - 1)) / 2;\n      else{\n        this.widthPackNum = ~~(this.width/5.5/(this.unitWidth+this.unitMargin));\n        this.clusterWidth = this.widthPackNum * (this.unitWidth + this.unitMargin) - this.unitMargin + 2 * this.clusterMargin;\n        let heightSum = 0;\n        const heights = clusterSizes.forEach((size, i) => {\n\n          const pack = Math.ceil(size / this.widthPackNum);\n          heightSum += pack * (this.unitHeight + this.unitMargin) - this.unitMargin + 2 * this.clusterMargin;\n          // console.log(`pack ${pack}, widthPack ${this.widthPackNum}, size ${size}`);\n          // console.log(heightSum);\n\n        });\n        // const heightSum = heights.reduce((a, b) => a+b, 0);\n        this.clusterInterval = Math.floor((this.height - heightSum) / (clusterNum+2));\n        // console.log(`heightSum ${heightSum}, clusterInterval ${this.clusterInterval}`);\n        this.middleLineY = (this.height - heightSum - (clusterNum)*this.clusterInterval)/2;\n        // return;\n      }\n\n\n    }\n\n  }\n\n  const pos2tag = {\n    \"VERB\": 0,\n    \"NOUN\": 1,\n    \"PRON\": 2,\n    \"ADJ\" : 3,\n    \"ADV\" : 4,\n    \"ADP\" : 5,\n    \"CONJ\": 6,\n    \"DET\" : 7,\n    \"NUM\" : 8,\n    \"PRT\" : 9,\n    \"X\" : 10,\n    \".\" : 11,\n  };\n\n  const labelParams = {\n    colorScheme: colorScheme,\n    radius: 4,\n    fontSize: 11,\n    interval: 8\n  }\n\n  export default {\n    name: 'ClusterView',\n    data() {\n      return {\n        params: new LayoutParamsConstructor(this.width, this.height),\n        // svgId: 'cluster-svg',\n        clusterData: null,\n        // clusterNum: 10,\n        painter: null,\n        // painter2: null,\n        shared: bus.state,\n        // width: 800,\n        changingFlag: false,\n        posLabel: null,\n        rootGroup: null,\n      }\n    },\n    props: {\n      compare: {\n        type: Boolean,\n        defautl: false,\n      },\n      width: {\n        type: Number,\n        default: 800,\n      },\n      height: {\n        type: Number,\n        default: 800,\n      },\n    },\n    computed: {\n      svgId: function () {\n        return this.compare ? 'cluster-svg2' : 'cluster-svg';\n      },\n      selectedState: function() {\n        return this.compare ? this.shared.selectedState2 : this.shared.selectedState;\n      },\n      selectedModel: function() {\n        return this.compare ? this.shared.selectedModel2 : this.shared.selectedModel;\n      },\n      selectedLayer: function() {\n        return this.compare ? this.shared.selectedLayer2 : this.shared.selectedLayer;\n      },\n      layout: function() {\n        return this.compare ? this.shared.layout2 : this.shared.layout;\n      },\n      clusterNum: function() {\n        // console.log(`${this.svgId} > cluster num: ${this.layout.clusterNum}`);\n        return this.layout.clusterNum;\n      },\n      strokeControlStrength: function() {\n        return this.layout.strokeControlStrength;\n      },\n      linkFilterThreshold: function() {\n        return this.layout.linkFilterThreshold;\n      },\n      stateClip: function() {\n        return this.layout.stateClip;\n      },\n      selectedWords: function() {\n        return this.compare ? this.shared.selectedWords2 : this.shared.selectedWords;\n      },\n      selectedUnits: function() {\n        return this.compare ? this.shared.selectedUnits2 : this.shared.selectedUnits;\n      },\n      renderPos: function() {\n        return this.compare ? this.shared.renderPos2 : this.shared.renderPos;\n      },\n      mode: function() {\n        return this.layout.mode;\n      }\n    },\n    watch: {\n      selectedState: function (state) {\n        console.log(`${this.svgId} > state changed to ${this.selectedState}`);\n        this.maybeReload();\n      },\n      selectedLayer: function (layer) {\n        console.log(`${this.svgId} > layer changed to ${this.selectedLayer}`);\n        this.maybeReload();\n      },\n      strokeControlStrength: function(strokeControlStrength) {\n        this.changeStroke(this.strokeControlStrength, this.linkFilterThreshold);\n      },\n      linkFilterThreshold: function(linkFilterThreshold) {\n        this.changeStroke(this.strokeControlStrength, this.linkFilterThreshold);\n      },\n      clusterNum: function(clusterNum) {\n        console.log(`${this.svgId} > layout changed. clusterNum: ${this.layout.clusterNum}`);\n        this.maybeReload();\n      },\n      stateClip: function(newStateClip) {\n        console.log('state clip changed');\n        this.painter.changeStateClip(newStateClip);\n      },\n      mode: function(newMode) {\n        this.params.mode = newMode;\n        this.maybeReload();\n      },\n      selectedModel: function (newModel, oldModel) {\n        console.log(`${this.svgId} > model changed to ${this.selectedModel}`);\n        this.maybeReload();\n      },\n      selectedWords: function (words) {\n        // console.log('select word ' + words);\n        if (words.length === 0) {\n          this.painter.render_state([]);\n          return;\n        }\n        // const words = words.map((word) => word.text);\n        // this.compare = compare;\n        let model = this.selectedModel,\n          state = this.selectedState,\n          layer = this.selectedLayer;\n        const p = bus.loadStatistics(model, state, layer)\n          .then(() => {\n            const statistics = bus.getStatistics(model, state, layer);\n            const wordsStatistics = statistics.statOfWord(this.selectedWords[this.selectedWords.length-1].text).mean;\n            // const wordsStatistics = statistics.statOfWord(this.selectedWords[0].text).mean;\n            // console.log('click word ' + this.selectedWords[0].text);\n            this.painter.render_state(wordsStatistics);\n          });\n      },\n      renderPos: function(renderPos) {\n        const data = {};\n        if (renderPos) {\n          bus.loadPosStatistics(this.selectedModel, undefined, (response) => {\n            // console.log(response);\n            if (response.status === 200) {\n              const posStatistics = response.data;\n              posStatistics.forEach((word, i) => {\n                const posRatio = Object.keys(word.ratio).map((key, i) => {\n                  return {index: i, pos: key, value: word.ratio[key]};\n                });\n                posRatio.sort((a, b) => b.value - a.value);\n                data[word.word] = pos2tag[posRatio[0].pos];\n              });\n              // console.log(data);\n              this.posLabel.draw(pos2tag).transform('translate(' + [this.width-40, 10] + ')');\n            }\n            this.painter.renderWord(data);\n          });\n        } else {\n          this.painter.renderWord(data);\n          this.posLabel.clean();\n        }\n      },\n      width: function (newWidth, oldWidth) {\n        this.params.updateWidth(newWidth);\n        this.maybeReload();\n      },\n      height: function (newHeight) {\n        this.params.updateHeight(newHeight);\n        this.maybeReload();\n      }\n    },\n    methods: {\n      checkLegality() {\n        const state = this.selectedState;\n        // console.log(state);\n        // console.log(this.selectedLayer);\n        // console.log(this.layout);\n        return (state === 'state' || state === 'state_c' || state === 'state_h')\n          && ((typeof this.selectedLayer) === 'number') && (this.layout) && (this.painter)\n          && (typeof this.width === 'number') && (typeof this.height === 'number');\n      },\n      maybeReload() {\n        if (!this.changingFlag){\n          this.changingFlag = true;\n          if (this.checkLegality()){\n            console.log(`${this.svgId} > reloading...`);\n            this.reload(this.selectedModel, this.selectedState, this.selectedLayer, this.clusterNum)\n              .then(() => {\n                this.changingFlag = false;\n              });\n          } else {\n            this.changingFlag = false;\n          }\n        }\n      },\n      init() {\n        this.params.updateWidth(this.width);\n        this.rootGroup = d3.select(`#${this.svgId}`).append('g');\n        this.painter = new Painter(this.rootGroup, this.params, this.compare);\n        this.posLabel = new PosLabel(this.rootGroup.append('g'), labelParams, this.compare);\n      },\n      reload(model, state, layer, clusterNum) {\n        const params = {\n          top_k: 300,\n          mode: 'raw',\n          layer: layer,\n        };\n        if (this.renderPos) {\n          this.posLabel.clean();\n          this.posLabel.draw(pos2tag).transform('translate(' + [this.width-40, 10] + ')');\n        }\n        return bus.loadCoCluster(model, state, clusterNum, params)\n          .then(() => {\n            this.clusterData = bus.getCoCluster(model, state, clusterNum, params);\n            console.log(this.clusterData.colClusters.length);\n            this.rootGroup.attr('transform', this.compare ? 'scale(-1,1)translate(' + [-this.width, 0] + ')' : '')\n            this.painter.destroy();\n            this.painter.draw(this.clusterData);\n          });\n      },\n      changeStroke(controlStrength, linkFilterThreshold) {\n        this.painter.refreshStroke(controlStrength, linkFilterThreshold);\n      }\n    },\n    mounted() {\n      this.init();\n\n      bus.$on(EVALUATE_SENTENCE, (value, compare) => {\n        if (compare !== this.compare)\n          return;\n        const record = bus.evalSentence(value, this.selectedModel);\n        const p2 = record.evaluate();\n        Promise.all([p2]).then((values) => {\n          // TODO change -1 to something else\n          const sentenceRecord = record.getRecords(this.selectedState, -1);\n\n          this.painter.addSentence(value, record, sentenceRecord);\n        })\n      });\n\n      bus.$on(CLOSE_SENTENCE, (sentence, compare) => {\n        if(compare !== this.compare)\n          return;\n        this.painter.deleteSentence(sentence);\n      });\n\n      bus.$on(SELECT_COLOR, (newColor) => {\n        console.log(`color has changed to ${newColor}`);\n        d3.select(`#${this.svgId}`)\n          .selectAll('.link.positive')\n          .style('stroke', newColor[1]);\n        d3.select(`#${this.svgId}`)\n          .selectAll('.link.negative')\n          .style('stroke', newColor[0]);\n      })\n    }\n  }\n\n  class PosLabel {\n    constructor(selector, params, compare=False) {\n      this.g = selector;\n      this.params = params;\n      this.compare = compare;\n    }\n    draw(tags) {\n      const params = this.params;\n      const color = params.colorScheme;\n      const fontSize = params.fontSize;\n      const radius = params.radius;\n      const interval = params.interval;\n      const labels = [];\n      Object.keys(tags).forEach((key) => { labels[tags[key]] = key; });\n      const gs = this.g.selectAll('g')\n        .data(labels).enter()\n        .append('g');\n      gs.append('circle')\n        .attr('cx', 0).attr('cy', (d, i) => i*(interval + 2*radius))\n        .attr('r', radius)\n        .style('fill', (d, i) => color(i));\n      gs.append('text')\n        .attr('x', radius*2).attr('y', (d, i) => i*(interval + 2*radius) + fontSize/2)\n        .attr('text-anchor', 'start').style('font-size', fontSize)\n        .text((d)=> d);\n      return this;\n      // pos = this.g.selectAll\n    }\n    transform(transStr){\n      if (this.compare)\n        transStr = transStr + 'scale(-1, 1)';\n      this.g.attr('transform', transStr);\n      return this;\n    }\n    clean(){\n      this.g.selectAll('g').remove();\n    }\n  }\n\n  class Painter {\n    constructor(selector, params, compare=false) {\n      this.svg = selector;\n      this.params = params;\n\n      this.topGroupClass = 'topGroup';\n      this.topg = this.svg.append('g').attr('class', this.topGroupClass);\n      this.hg = this.topg.append('g');\n      this.wg = this.topg.append('g');\n      this.sentenceWordThreshold = params.sentenceWordThreshold;\n      this.strengthThresholdPercent = params.strengthThresholdPercent;\n\n      this.dx = 0, this.dy = 0;\n      this.graph = null;\n      this.clusterSelected = [];\n\n      this.state_elements = [];\n      this.loc = null;\n      this.wordClouds = [];\n\n      this.unitNormalColor = '#ff5b09';\n      this.unitRangeColor = ['#09adff', '#ff5b09'];\n      this.linkWidthRange = [1, 5];\n      this.linkColor = ['#09adff', '#ff5b09'];\n      this.compare = compare;\n      this.stateTranslateHis = [];\n      this.sentenceTranslateHis = [this.params.sentenceInitTranslate[0],];\n      this.sentences = [];\n      this.stateClip = 2;\n\n      this.strokeWidth = function(t) { return Math.abs(t) * 8};\n      this.sentenceStrokeWidth = function(t) {return Math.abs(t) * 24};\n      this.colorLegendAxis = null;\n    }\n    get dxOffset() {\n      const adaptive = (this.client_width - this.client_height) / 4;\n      // return Math.max(adaptive, 0);\n      return 0;\n    }\n    get stateClusterWordCloudDX () {\n      return this.client_width * ( - this.params.dxShrinkFactor * this.sentences.length) + this.dxOffset;\n    }\n    transform(trans) {\n      this.svg.attr('transform', trans);\n    }\n    get client_width () {\n      return this.params.width;\n    }\n    get client_height () {\n      return this.params.height;\n    }\n    get middle_line_x() {\n      return this.params.middleLineX;\n    }\n    get middle_line_y() {\n      return this.params.middleLineY;\n    }\n\n    get nSentence() {\n      return this.sentences.length;\n    }\n\n    refreshStroke(controlStrength, linkFilterThreshold) {\n      this.strokeWidth = function(t) {return Math.abs(t) * controlStrength};\n      this.sentenceStrokeWidth = function(t) {return Math.abs(t) * controlStrength / 3};\n      this.strengthThresholdPercent = linkFilterThreshold;\n      if (this.graph) {\n        this.draw_link(this.hg, this.graph);\n\n        this.graph.sentence_info.forEach((si) => {\n          const strength_extent = d3.extent(this.flatten(si.links).map((l) => l.strength));\n          const max_strength = Math.max(Math.abs(strength_extent[0]), Math.abs(strength_extent[1]));\n          const strength_bound = this.strengthThresholdPercent.map((t) => t * max_strength);\n          si.links.forEach((ls) => {\n            ls.forEach((l) => {\n              l['el'].attr('display', (Math.abs(l.strength) < strength_bound[0] || Math.abs(l.strength) > strength_bound[1]) ? 'none' : '')\n                     .attr('stroke-width', this.sentenceStrokeWidth(l.strength));\n            });\n          });\n        });\n      }\n    }\n\n    changeStateClip(clip) {\n      if (!this.graph) {\n        return;\n      }\n      this.stateClip = clip;\n      const scale = d3.scaleLinear()\n                        .domain([-this.stateClip, 0, this.stateClip])\n                        .range([1, 0, 1]);\n      if (d3.select(this.graph.state_info.state_info[0]['el']).property('colored')) {\n        this.graph.state_info.state_info.forEach((s, i) => {\n          let tmp_s = d3.select(s['el']);\n          tmp_s\n            .transition()\n            .attr('fill', tmp_s.property('strength') > 0 ? positiveColor : negativeColor)\n            .attr('fill-opacity', scale(Math.abs(tmp_s.property('strength'))));\n\n        });\n        this.axisScale.domain([-this.stateClip, this.stateClip]);\n        this.colorLegendAxis = d3.axisBottom()\n                          .tickValues([parseInt(-this.stateClip), 0, parseInt(this.stateClip)])\n                          .tickFormat(d3.format('.' + d3.precisionFixed(1) + 'f'))\n                          .scale(this.axisScale);\n        // this.hg.select('#color-legend')\n        //        .select('g')\n        //        .remove();\n        this.hg.select('#color-legend')\n               .select('g')\n               .call(this.colorLegendAxis);\n      }\n\n    }\n\n    deleteSentence(value) {\n      const sentence_to_add = this.sentences.filter((s) => {return s !== value});\n      this.sentences = [];\n      this.translateX(-d3.sum(this.stateTranslateHis));\n      this.adjustdx(this.stateClusterWordCloudDX);\n      this.stateTranslateHis = [];\n      this.sentenceTranslateHis = [this.params.sentenceInitTranslate[0],];\n\n      const tmpSentenceInfo = {};\n      this.graph.sentence_info.forEach((s) => {\n        tmpSentenceInfo[s.value] = s;\n        s['group'].remove();\n      });\n      this.graph.sentence_info = [];\n      sentence_to_add.forEach((s) => {\n        this.addSentence(s, tmpSentenceInfo[s].record, tmpSentenceInfo[s].sentenceRecord)\n      });\n    }\n\n    deleteAllSentences() {\n      this.sentences = [];\n      this.translateX(-d3.sum(this.stateTranslateHis));\n      this.adjustdx(this.stateClusterWordCloudDX);\n      this.stateTranslateHis = [];\n      this.sentenceTranslateHis = [this.params.sentenceInitTranslate[0],];\n\n      const tmpSentenceInfo = {};\n      this.graph.sentence_info.forEach((s) => {\n        tmpSentenceInfo[s.value] = s;\n        s['group'].remove();\n      });\n      this.graph.sentence_info = [];\n    }\n\n    addSentence(value, record, sentenceRecord) {\n      const self = this;\n      const needTranslate = (this.params.spacePerSentence + this.params.dxShrinkFactor) * this.client_width;\n      const translationForEachSentence = needTranslate;\n      const translationForState = needTranslate * 0.5;\n      const sentenceInitTranslate = this.params.sentenceInitTranslate;\n      this.stateTranslateHis.push(translationForState);\n      if (this.sentences.length) {\n        this.sentenceTranslateHis.push(translationForEachSentence);\n      }\n      // const sentenceTranslationX = this.client_width * 0.01;\n      const sg = this.svg.append('g')\n                      .attr('transform', `translate(${sentenceInitTranslate[0]}, ${sentenceInitTranslate[1]})`)\n      this.sentences.push(value);\n      const spg = sg.append('g');\n      const sentenceTranslate = [50, 10];\n      this.translateX(d3.sum(this.stateTranslateHis));\n      this.adjustdx(this.stateClusterWordCloudDX);\n\n      this.graph.sentence_info.forEach((s, k) => {\n        s.group\n        .transition()\n        .attr('transform', 'translate(' + [d3.sum(this.sentenceTranslateHis), sentenceInitTranslate[1]] + ')');\n      });\n\n      const rectGroup = sg.append('g').attr('transform', 'translate(' + [-this.params.sentenceNodeWidth/2, this.client_height/4] + ')');\n      this.drawBrushRect(rectGroup, sentenceRecord.length, updateSentence);\n\n      const sent = sentence(spg, this.compare)\n        .size([this.params.sentenceNodeWidth, this.params.sentenceNodeWidth * sentenceRecord.length])\n        .sentence(sentenceRecord)\n        .coCluster(this.graph.coCluster)\n        .words(record.tokens)\n        .mouseoverCallback(highlightSentenceLinkByNodeIndex)\n        .barMouseoverCallback(barHighlightState)\n        .draw();\n\n      const links = [];\n      const strength = sent.strengthByCluster;\n      sent.strengthByCluster.forEach((strengths, i) => {\n        links[i] = [];\n        const wordPos = sent.getWordPos(i);\n        this.graph.coCluster.colClusters.forEach((clst, j) => {\n          const strength = strengths[j];\n          const s = this.graph.state_info.state_cluster_info[j];\n          links[i][j] = {\n            source: {x: wordPos[0] + sent.nodeWidth, y: wordPos[1] + sent.nodeHeight/2},\n            source_init: {x: wordPos[0] + sent.nodeWidth, y: wordPos[1] + sent.nodeHeight/2},\n            // source_init: {x: wordPos[0] + sent.nodeWidth + sentenceTranslate[0], y: wordPos[1] + sent.nodeHeight/2 + sentenceTranslate[1]},\n            target: {x: s.top_left[0] + this.middle_line_x - sentenceInitTranslate[0] , y: s.top_left[1] + this.middle_line_y + s.height / 2 - sentenceInitTranslate[1]},\n            strength: strength,\n          };\n        });\n      });\n      // links.forEach(function(ls) {\n      //   const strengthExtent = d3.extent(ls.map(l => Math.abs(l.strength)));\n      //   const filterStrength = strengthExtent[1] * self.sentenceWordThreshold;\n      //   ls.forEach((l) => {\n      //     l.strength = Math.abs(l.strength) < filterStrength ? 0 : l.strength;\n      //   });\n      // });\n\n      // const strengthes = flatten(links).map(d => {return Math.abs(d.strength)});\n      // const scale = d3.scaleLinear()\n      //   .domain([0, d3.extent(strengthes)[1]])\n      //   .range([0, this.linkWidthRange[1]])\n\n\n      const strength_extent = d3.extent(this.flatten(links).map((l) => l.strength));\n      const max_strength = Math.max(Math.abs(strength_extent[0]), Math.abs(strength_extent[1]));\n      const strength_bound = this.strengthThresholdPercent.map((t) => t * max_strength);\n\n      const lsg = sg.append('g');\n      links.forEach(function(ls) {\n        ls.forEach(function(l) {\n          l['el'] = lsg.append('path')\n                      .classed('active', false)\n                      .classed('link', true)\n                      .classed(l.strength > 0 ? 'positive' : 'negative', true)\n                      .attr('d', self.createLink(l))\n                      .attr('stroke-width', self.sentenceStrokeWidth(l.strength))\n                      .attr('opacity', 0.2)\n                      .attr('fill', 'none')\n                      .attr('display', (Math.abs(l.strength) < strength_bound[0] || Math.abs(l.strength) > strength_bound[1]) ? 'none' : '')\n                      .attr('hold', 'false');\n        });\n      });\n      self.graph.sentence_info.push({sentence: sent, links: links, value: value, group: sg, record: record, sentenceRecord: sentenceRecord});\n      if (this.sentences.length > 1) {\n        self.graph.sentence_info.forEach((si) => {\n          si.links.forEach((ls) => {\n            ls.forEach((l) => {\n              l['el'].attr('display', 'none');\n            });\n          });\n        });\n      }\n\n      function updateSentence(extent_) {\n        // console.log(`extent_ is ${extent_}`);\n        const words = record.tokens.slice(...extent_);\n        // console.log(`words is ${words}`);\n        let scaleFactor = self.client_height / words.length / self.params.sentenceNodeWidth / 1.05;\n        // console.log(`scaleFactor is ${scaleFactor}`);\n        scaleFactor = Math.min(scaleFactor, 1.5);\n        const newHeight = scaleFactor * self.client_height;\n        let translateY = (sent.getWordPos(extent_[0])[1] + sent.getWordPos(extent_[1])[1]) / 2;\n        // let translateY = sent.getWordPos(~~((extent_[0] + extent_[1])/2))[1];\n        sent.transform('scale('  + scaleFactor + ')translate(' + [0, -translateY + self.client_height/2/scaleFactor] + ')');\n        // sent.transform('scale('  + scaleFactor + ')translate(' + [d3.sum(self.sentenceTranslateHis)/scaleFactor, -translateY + self.client_height/2/scaleFactor] + ')');\n        links.forEach((ls) => {\n          ls.forEach((l) => {\n            const actualY = (l.source_init.y - translateY) * scaleFactor + self.client_height / 2;\n            console.log(`client height is ${self.client_height}`);\n            console.log(`actualY is ${actualY}`);\n            // const actualY = (l.source_init.y - translateY) * scaleFactor + self.client_height / 2;\n            l.source.x = l.source_init.x * scaleFactor;\n            l.source.y = actualY;\n            l['el']\n              .transition()\n              .attr('d', (actualY > 0 && actualY < self.client_height) ? self.createLink(l) : '');\n          })\n        })\n      }\n\n      function highlightSentenceLinkByNodeIndex (data, t, highlight, changeCheckStatus=false) {\n        // console.log(this);\n        links[t].forEach((l) => {\n          if (changeCheckStatus) {\n            l['el'].attr('hold', l['el'].attr('hold') === 'false' ? 'true' : 'false');\n          }\n          if (l['el'].attr('hold') !== 'true') {\n            l['el'].classed('active', highlight)\n            .attr('display', highlight || (self.sentences.length < 2 && l['el'].attr('display') !== 'none') ? '' : 'none');\n          } else {\n            l['el'].classed('active', true)\n            .attr('display', '');\n          }\n\n        });\n        if(changeCheckStatus) {\n          data.selected = !data.selected;\n          bus.$emit(SELECT_SENTENCE_NODE, data, self.compare);\n        }\n        data.bg.classed('active', data.selected ? true : highlight);\n      }\n\n      function barHighlightState(state_index, highlight) {\n        console.log('state ' + state_index + ' is hover on or out');\n        self.update_ref(d3.select(self.graph.state_info.state_cluster_info[state_index]['el']).select('rect').node(), highlight ? 'plus' : 'minus');\n      }\n    }\n\n    drawBrushRect(g, dataLength, func) {\n      const self = this;\n\n      const maxHeight = this.params.height / 2;\n      const unitHeight = Math.min( maxHeight / dataLength, 50);\n      console.log(`unitHeight is ${unitHeight}`);\n      const rectSize = [self.params.sentenceBrushRectWidth, unitHeight];\n      console.log(`rect size is ${rectSize}`);\n      const minBrushLength = 3;\n      g.selectAll('.wordRect')\n        .data(d3.range(dataLength)).enter()\n        .append('rect')\n        .attr('x', 0)\n        .attr('y', d => d * rectSize[1])\n        .attr('width', rectSize[0])\n        .attr('height', rectSize[1])\n        .attr('fill', 'black')\n        .attr('stroke-width', 1)\n        .attr('stroke', 'blue')\n        .attr('opacity', 0.2);\n      let brush = d3.brushY()\n        .extent([[0, 0], [rectSize[0], rectSize[1] * dataLength]])\n        .on('end', function() {\n          if (!d3.event.sourceEvent) return;\n          if (!d3.event.selection) return;\n          let extent = d3.event.selection;\n          let lower = Math.round(extent[0] / rectSize[1]);\n          let upper = Math.round(extent[1] / rectSize[1]);\n          extent[0] = lower * rectSize[1];\n          extent[1] = upper * rectSize[1];\n          d3.select(this).transition().call(d3.event.target.move, extent);\n          console.log(d3.event.selection);\n          func([lower, upper]);\n        });\n      g.append('g')\n        .call(brush)\n        .call(brush.move, [0, rectSize[1] * dataLength])\n    }\n\n    calculate_state_info(coCluster, mode='height') {\n      let state_loc = [];\n      let state_cluster_loc = [];\n      // let little_triangle_loc = [];\n\n      const clusterHeight = this.params.clusterHeight;\n      const packNum = this.params.packNum;\n      this.params.computeUnitParams();\n      const unitHeight = this.params.unitHeight;\n      const unitWidth = this.params.unitWidth;\n      const unitMargin = this.params.unitMargin;\n      const clusterMargin = this.params.clusterMargin;\n      const clusterInterval = this.params.clusterInterval;\n\n      const stateClusters = coCluster.colClusters;\n\n      if (mode === 'height'){\n        stateClusters.forEach((clst, i) => {\n          let width = Math.ceil(clst.length / packNum) * (unitWidth + unitMargin) - unitMargin + 2 * clusterMargin;\n          let height = clusterHeight;\n          let top_left = [-width / 2, i * (height + clusterInterval)];\n\n          state_cluster_loc[i] = {top_left: top_left, width: width, height: height};\n\n          clst.forEach((c, j) => {\n            let s_width = unitWidth;\n            let s_height = unitHeight;\n            let s_top_left = [(~~(j/packNum)) * (unitMargin + unitWidth) + clusterMargin,\n              j%packNum * (unitHeight + unitMargin) + clusterMargin];\n            state_loc[c] = {top_left: s_top_left, width: s_width, height: s_height};\n          });\n        });\n      } else if (mode === 'width') {\n        const width = this.params.clusterWidth;\n        const widthPackNum = this.params.widthPackNum;\n        let offset = 0;\n        stateClusters.forEach((clst, i) => {\n          let height = Math.ceil(clst.length / widthPackNum) * (unitHeight + unitMargin) - unitMargin + 2 * clusterMargin;\n          let top_left = [-width / 2, offset];\n          offset += (height + clusterInterval);\n          // let packNum =\n          state_cluster_loc[i] = {top_left: top_left, width: width, height: height};\n\n          clst.forEach((c, j) => {\n            let s_width = unitWidth;\n            let s_height = unitHeight;\n            let s_top_left = [(j%widthPackNum) * (unitMargin + unitWidth) + clusterMargin,\n              ~~(j/widthPackNum) * (unitHeight + unitMargin) + clusterMargin];\n            state_loc[c] = {top_left: s_top_left, width: s_width, height: s_height};\n          });\n        });\n      }\n      return {state_cluster_info: state_cluster_loc, state_info: state_loc};\n    }\n\n    calculate_word_info(coCluster, selected_state_cluster_index=-1) {\n      let self = this;\n      const wordCloudPaddingLength = this.params.wordCloudPaddingLength;\n      const wordSize2StrengthRatio = this.params.wordSize2StrengthRatio;\n      // const wordCloudWidth2HeightRatio = this.params.wordCloudWidth2HeightRatio;\n      const baseWordCloudWidth = this.params.wordCloudWidth;\n      const wordClusters = coCluster.rowClusters;\n      const words = coCluster.words;\n      const nCluster = coCluster.labels.length;\n      const agg_info = coCluster.aggregation_info;\n\n      let chordLength = this.params.wordCloudChordLength;\n      let availableLength = chordLength - nCluster * wordCloudPaddingLength;\n\n      const wordCloudArcRadius = chordLength / 2 / Math.sin(this.params.wordCloudArcDegree / 2 * Math.PI / 180);\n      this.params.wordCloudArcRadius = wordCloudArcRadius;\n      // const wordCloudArcLength = wordCloudArcRadius * wordCloudArcDegree * Math.PI / 180;\n\n      let highlight_clouds = [];\n      if (selected_state_cluster_index >= 0) {\n        self.graph.link_info[selected_state_cluster_index].forEach((d, j) => {\n          // if (Math.abs(d.strength) > 0) {\n          if (d3.select(d['el']).attr('display') !== 'none') {\n            highlight_clouds.push(j);\n          }\n        });\n      }\n      // console.log(\"need to highlight \");\n      // console.log(highlight_clouds);\n      highlight_clouds = new Set(highlight_clouds);\n      let word_info = [];\n      let wd_height = wordClusters.map((d, i) => {\n        if (highlight_clouds.size === 0) {\n          // return d.length;\n          return Math.sqrt(d.length);\n        } else if (!highlight_clouds.has(i)) {\n          return Math.sqrt(d.length);\n          // return d.length;\n        } else {\n          // return d.length * this.params.wordCloudHightlightRatio;\n          return Math.sqrt(d.length) * this.params.wordCloudHightlightRatio;\n        }\n      });\n\n      let wd_height_sum = wd_height.reduce((acc, val) => {\n        return acc + val;\n      }, 0);\n      const max_height = wd_height.reduce((a, b) => Math.max(a,b), 0);\n\n      let offset = -chordLength / 2 ;\n      wordClusters.forEach((wdst, i) => {\n        // let angle = wd_radius[i] / wd_radius_sum * availableDegree / 2;\n        // let actual_radius = wordCloudArcRadius * angle * Math.PI / 180;\n        // let angle_loc = angle + offset;\n        const actual_height = wd_height[i] / wd_height_sum * availableLength;\n        const actual_width = baseWordCloudWidth; // * wd_height[i] / max_height;\n        const top_left_y = offset;\n        const top_left_x = Math.sqrt(wordCloudArcRadius ** 2 - top_left_y ** 2);\n        offset += actual_height + wordCloudPaddingLength;\n        // if self.graph exist, then only update the location info\n        if (self.graph && self.graph.word_info) {\n          self.graph.word_info[i].top_left = [top_left_x, top_left_y];\n          self.graph.word_info[i].width = actual_width;\n          self.graph.word_info[i].height = actual_height;\n          word_info[i] = self.graph.word_info[i];\n        } else {\n          const words_data = wdst.map((d) => {\n            return {text: words[d], size: agg_info.row_single_2_col_cluster[d][i] * wordSize2StrengthRatio};\n          });\n          word_info[i] = {top_left: [top_left_x, top_left_y], width: actual_width,\n            height: actual_height, words_data: words_data};\n        }\n      });\n      // console.log(word_info);\n      return word_info;\n    }\n\n    calculate_link_info(state_info, word_info, coCluster, dx, dy) {\n      const self = this;\n      let links = [];\n      const row_cluster_2_col_cluster = coCluster.aggregation_info.row_cluster_2_col_cluster;\n      const colClusters = coCluster.colClusters;\n      const rowClusters = coCluster.rowClusters;\n      const labels = coCluster.labels;\n      // console.log('row_cluster_2_col_cluster');\n      // console.log(row_cluster_2_col_cluster);\n      state_info.state_cluster_info.forEach((s, i) => {\n        let max_strength = 0;\n        // if (!self.graph || !this.graph.link_info) {\n        //   const strength_extent = d3.extent(row_cluster_2_col_cluster.map((row_cluster) => row_cluster[i]));\n        //   max_strength = Math.max(Math.abs(strength_extent[0]), Math.abs(strength_extent[1]));\n        //   // console.log(`threshold is ${strength_extent[0]*strengthThresholdPercent}, ${strength_extent[1]*strengthThresholdPercent}`);\n        // }\n        // const filter_strength = max_strength * strengthThresholdPercent;\n        word_info.forEach((w, j) => {\n          if (links[i] === undefined) {\n            links[i] = [];\n          }\n          // if self.graph exists, then only update the location info, keep\n          if (this.graph && this.graph.link_info) {\n            // console.log(self.graph.link_info[i][j].el);\n            links[i][j] = {source: {x: s.top_left[0] + s.width,\n              y: s.top_left[1] + s.height / 2},\n              target: {x: w.top_left[0] + dx, y: w.top_left[1] + w.height/2 + dy},\n              strength: self.graph.link_info[i][j].strength,\n              el: self.graph.link_info[i][j].el,\n            };\n          } else {\n            let tmp_strength = row_cluster_2_col_cluster[labels[j]][labels[i]];\n            // tmp_strength = Math.abs(tmp_strength) < filter_strength ? 0 : tmp_strength;\n            links[i][j] = {source: {x: s.top_left[0] + s.width,\n              y: s.top_left[1] + s.height / 2},\n              target: {x: w.top_left[0] + dx, y: w.top_left[1] + w.height/2 + dy},\n              strength: tmp_strength,\n            };\n          }\n\n        });\n      });\n      // console.log(links);\n      return links;\n    }\n\n    ArcLength2Angle(length, radius) {\n      return length / radius * 180 / Math.PI;\n    }\n\n    render_state(data) {\n      if (data.length) {\n        if (!this.hg.select('#color-legend').node()) {\n          const tmp_state = this.graph.state_info.state_cluster_info[this.graph.state_info.state_cluster_info.length - 1];\n          const tmp_g = this.hg.append('g')\n                            .attr('id', 'color-legend')\n                            .attr('transform', 'translate(' + [0, tmp_state.top_left[1] + tmp_state.height + 0.6 * this.params.clusterInterval] +\n                              ')' + (this.compare ? 'scale(-1, 1)' : ''));\n          const width = tmp_state.width;\n          // console.log('unitHeight is ' + this.params.unitHeight);\n          const height = 3.8 * 2;\n          // const height = this.params.unitHeight * 2;\n          tmp_g.append('rect')\n          .attr('transform', 'translate(' + [-width / 2, 0] + ')')\n          .transition()\n          .attr('x', 0)\n          .attr('y', 0)\n          .attr('width', width)\n          .attr('height', height)\n          .style('fill', 'url(#state-legend)');\n\n          this.axisScale = d3.scaleLinear().range([0, width]).domain([-this.stateClip, this.stateClip]);\n          this.colorLegendAxis = d3.axisBottom()\n                          .tickValues([parseInt(-this.stateClip), 0, parseInt(this.stateClip)])\n                          .tickFormat(d3.format('.' + d3.precisionFixed(1) + 'f'))\n                          .scale(this.axisScale);\n          tmp_g.append('g')\n               .classed('axis', true)\n               .attr('transform', 'translate(' + [-width/2, 0] + ')')\n               .call(this.colorLegendAxis);\n        }\n\n        // const extent = d3.extent(data);\n        const scale = d3.scaleLinear()\n                        .domain([-this.stateClip, 0, this.stateClip])\n                        .range([1, 0, 1]);\n        // console.log(`the extent of render state is ${extent}`);\n        this.graph.state_info.state_info.forEach((s, i) => {\n          d3.select(s['el'])\n            .property('colored', true)\n            .property('strength', data[i])\n            .transition()\n            .duration(300)\n            .attr('fill', data[i] > 0 ? positiveColor : negativeColor)\n            .attr('fill-opacity', scale(Math.abs(data[i])));\n        });\n\n      } else {\n        this.hg.select('#color-legend').remove();\n        this.graph.state_info.state_info.forEach((s, i) => {\n          d3.select(s['el'])\n            .property('colored', false)\n            .transition()\n            .duration(400)\n            .attr('fill', this.unitNormalColor)\n            .attr('fill-opacity', 0.3)\n        });\n      }\n    }\n\n    renderWord(data = {}) {\n      // console.log(data);\n      this.graph.word_info.forEach((wordCluster, i) => {\n        wordCluster.words_data.forEach((word, j) => {\n          word.type = data[word.text];\n        })\n      });\n      // console.log(this.graph.word_info);\n      // console.log(this.graph.word_info);\n      this.draw_word(this.wg, this.graph);\n    }\n\n    redraw_word_link(selected_state_cluster_index = -1) {\n      this.graph.word_info = this.calculate_word_info(this.graph.coCluster, selected_state_cluster_index);\n      this.graph.link_info = this.calculate_link_info(this.graph.state_info, this.graph.word_info, this.graph.coCluster, this.stateClusterWordCloudDX, this.dy);\n      this.draw_word(this.wg, this.graph);\n      this.draw_link(this.hg, this.graph);\n    }\n\n    update_ref(el, mode) {\n      if (mode === \"plus\") {\n        d3.select(el).property('ref', parseInt(d3.select(el).property('ref')) + 1);\n        d3.select(el).classed('active', true);\n      } else if (mode === \"minus\") {\n        d3.select(el).property('ref', parseInt(d3.select(el).property('ref')) - 1);\n        if (parseInt(d3.select(el).property('ref')) === 0) {\n          d3.select(el).classed('active', false);\n        }\n      }\n    }\n\n    draw_state(g, graph) {\n      let self = this;\n      let coCluster = graph.coCluster;\n      let state_info = graph.state_info;\n      const clusterHeight = this.params.clusterHeight;\n      const packNum = this.params.packNum;\n      const unitHeight = this.params.unitHeight;\n      const unitWidth = this.params.unitWidth;\n      const unitMargin = this.params.unitMargin;\n      const clusterInterval = this.params.clusterInterval;\n      const littleTriangleWidth = this.params.littleTriangleWidth;\n      const littleTriangleHeight = this.params.littleTriangleHeight;\n\n      if (this.clusterSelected.length !== coCluster.colClusters.length) {\n        this.clusterSelected = coCluster.colClusters.map((d, i) => 0);\n      }\n      const clusterSelected = this.clusterSelected;\n      g.append('line')\n        .attr('id', 'middle_line')\n        .attr('x1', 0)\n        .attr('y1', -1000)\n        .attr('x2', 0)\n        .attr('y2', 1000)\n        .attr('display', 'none');\n\n      // const color = ['#09adff', '#ffffff', '#ff5b09'];\n      // g.append('defs')\n      //   .append('linearGradient')\n      //   .attr('id', 'legend-state')\n      //   .attr('x1', '0').attr('y1', '0')\n      //   .attr('x2', '1').attr('y2', '0')\n      //   .selectAll('stop')\n      //   .data(d3.range(3)).enter()\n      //   .append('stop')\n      //   .attr('offset', d => d/2)\n      //   .attr('stop-color', d => color[d]);\n\n\n\n\n      const hiddenClusters = g.selectAll('g rect')\n        .data(coCluster.colClusters, (clst, i) => Array.isArray(clst) ? (String(clst.length) + String(i)) : this.id); // matching function\n\n      const selectCluster = function (clst, i) {\n        if (!clusterSelected[i]){\n          clusterSelected[i] = 1;\n          self.redraw_word_link(i);\n          self.update_ref(d3.select(this).select('rect').node(), \"plus\");\n          self.graph.link_info[i].forEach((l, j) => {\n            self.update_ref(l['el'], \"plus\");\n            if (d3.select(l['el']).attr('display') !== 'none') {\n              self.update_ref(self.graph.word_info[j]['wordCloud'].bgHandle.node(), \"plus\");\n            }\n          });\n        } else {\n          clusterSelected[i] = 0;\n          self.redraw_word_link(-1);\n          self.update_ref(d3.select(this).select('rect').node(), \"minus\");\n          self.graph.link_info[i].forEach((l, j) => {\n            self.update_ref(l['el'], \"minus\");\n            if (d3.select(l['el']).attr('display') !== 'none') {\n              self.update_ref(self.graph.word_info[j]['wordCloud'].bgHandle.node(), \"minus\");\n            }\n          });\n        }\n      }\n\n      const hGroups = hiddenClusters.enter()\n        .append('g');\n      hGroups\n        .on('mouseenter', function (clst, i) {\n          self.update_ref(d3.select(this).select('rect').node(), \"plus\");\n          self.graph.link_info[i].forEach((l, j) => {\n            self.update_ref(l['el'], \"plus\");\n            if (d3.select(l['el']).attr('display') !== 'none') {\n              self.update_ref(self.graph.word_info[j]['wordCloud'].bgHandle.node(), \"plus\");\n              const ref = self.graph.word_info[j]['wordCloud'].bgHandle.property('ref');\n              console.log(`word ${j}'s ref is ${ref}`);\n            }\n          })\n        })\n        .on('mouseleave', function(clst, i) {\n          console.log('mouse leave');\n          self.update_ref(d3.select(this).select('rect').node(), \"minus\");\n          console.log(d3.select(this).select('rect').property('ref'));\n          self.graph.link_info[i].forEach((l, j) => {\n            self.update_ref(l['el'], \"minus\");\n            if (d3.select(l['el']).attr('display') !== 'none') {\n              self.update_ref(self.graph.word_info[j]['wordCloud'].bgHandle.node(), \"minus\");\n              const ref = self.graph.word_info[j]['wordCloud'].bgHandle.property('ref');\n              console.log(`word ${j}'s ref is ${ref}`);\n            }\n          })\n        })\n        .on('click', selectCluster)\n      hGroups.attr('transform', 'translate(0,0)')\n        .attr('id', (clst, i) => (String(clst.length) + String(i)))\n        .transition()\n        .duration(300)\n        .attr('transform', (d, i) => 'translate(' + [state_info.state_cluster_info[i].top_left[0], state_info.state_cluster_info[i].top_left[1]] + ')');\n\n      hGroups.each(function (d, i) {\n        graph.state_info.state_cluster_info[i]['el'] = this;\n      });\n\n      const clusterRect = hGroups.append('rect')\n        .classed('hidden-cluster', true)\n        .classed('active', false)\n        .property('ref', 0)\n        .transition()\n        .duration(400)\n        .attr('width', (clst, i) => state_info.state_cluster_info[i].width)\n        .attr('height', (clst, i) => state_info.state_cluster_info[i].height)\n        .attr('x', 0) //(clst, i) => state_info.state_cluster_info[i].top_left[0])\n        .attr('y', 0) //(clst, i) => state_info.state_cluster_info[i].top_left[1]);\n\n      const units = hGroups.append('g')\n        .selectAll('rect')\n        .data(d => d);\n\n      let tmp_units = units.enter()\n        .append('rect')\n        .on('mouseover', function(d, i) {\n          if (state_info.state_info[d].selected) return;\n            d3.select(this).classed('unit-active', true)\n            // fisheye in\n        })\n        .on('mouseleave', function(d, i) {\n          if (state_info.state_info[d].selected) return;\n            d3.select(this).classed('unit-active', false)\n            // fisheye out\n        })\n        .on('click', function(d, i) {\n            if (!state_info.state_info[d].selected){\n              state_info.state_info[d].selected = true;\n              d3.select(this).classed('unit-active', true)\n              bus.$emit(SELECT_UNIT, d, self.compare);\n            } else {\n              state_info.state_info[d].selected = false;\n              d3.select(this).classed('unit-active', false)\n              bus.$emit(DESELECT_UNIT, d, self.compare);\n            }\n          // }\n        })\n        .transition()\n        .duration(400)\n        .attr('width', (i) => state_info.state_info[i].width)\n        .attr('height', (i) => state_info.state_info[i].height)\n        .attr('x', (i) => state_info.state_info[i].top_left[0])\n        .attr('y', (i) => state_info.state_info[i].top_left[1])\n        .attr('fill', self.unitNormalColor)\n        .attr('fill-opacity', 0.3)\n\n      tmp_units.each(function(d) {\n        graph.state_info.state_info[d]['el'] = this;\n      })\n\n      // add\n      // hiddenClusters.exit()\n      //   .transition()\n      //   .duration(400)\n      //   .style('fill-opacity', 1e-6)\n      //   .attr('width', 1)\n      //   .attr('height', 1)\n      //   .remove();\n    }\n\n    sum(arr) {\n      return arr.reduce(function (acc, val) {\n        return acc + val;\n      }, 0);\n    }\n\n    draw_word(g, graph) {\n      let self = this;\n      let word_info = graph.word_info;\n      word_info.forEach((wclst, i) => {\n        if (wclst['wordCloud']) {\n          const ref = parseInt(wclst['wordCloud'].bgHandle.property('ref'));\n          const selected = wclst['wordCloud'].bgHandle.property('selected');\n          const active = wclst['wordCloud'].bgHandle.classed('active');\n          wclst['wordCloud']\n            .draw([wclst.width/2, wclst.height/2])\n            .transform( 'translate(' + [wclst.top_left[0] + wclst.width/2, wclst.top_left[1] + wclst.height/2] + ')');\n          wclst['wordCloud'].bgHandle.property('ref', ref)\n                              .property('selected', selected)\n                              .classed('wordcloud', true)\n                              .classed('active', active);\n        } else {\n          let tmp_g = g.append('g')\n            .on('mouseenter', function () {\n              self.graph.link_info.forEach((ls, j) => {\n                self.update_ref(ls[i]['el'], 'plus');\n                if (d3.select(ls[i]['el']).attr('display') !== 'none') {\n                  self.update_ref(d3.select(self.graph.state_info.state_cluster_info[j]['el']).select('rect').node(), 'plus');\n                }\n              });\n              self.update_ref(wclst['wordCloud'].bgHandle.node(), 'plus');\n            })\n            .on('mouseleave', function () {\n              self.graph.link_info.forEach((ls, j) => {\n                self.update_ref(ls[i]['el'], 'minus');\n                if (d3.select(ls[i]['el']).attr('display') !== 'none') {\n                  self.update_ref(d3.select(self.graph.state_info.state_cluster_info[j]['el']).select('rect').node(), 'minus');\n                }\n              });\n              self.update_ref(wclst['wordCloud'].bgHandle.node(), 'minus');\n            })\n            .on('click', function () {\n              // wclst['wordCloud'].selected = ~wclst['wordCloud'].selected;\n              wclst['wordCloud'].bgHandle.property('selected', ~wclst['wordCloud'].bgHandle.property('selected'))\n              self.graph.link_info.forEach((ls, j) => {\n                self.update_ref(ls[i]['el'], wclst['wordCloud'].bgHandle.property('selected') ? 'plus' : 'minus');\n                if (d3.select(ls[i]['el']).attr('display') !== 'none') {\n                  self.update_ref(d3.select(self.graph.state_info.state_cluster_info[j]['el']).select('rect').node(), wclst['wordCloud'].bgHandle.property('selected') ? 'plus' : 'minus');\n                }\n              });\n              self.update_ref(wclst['wordCloud'].bgHandle.node(), wclst['wordCloud'].bgHandle.property('selected') ? 'plus' : 'minus');\n            });\n          let myWordCloud = new WordCloud(tmp_g, wclst.width/2, wclst.height/2, 'rect', this.compare)\n            .transform( 'translate(' + [wclst.top_left[0] + wclst.width/2, wclst.top_left[1] + wclst.height/2] + ')')\n            .color(this.params.posColor);\n          myWordCloud.update(word_info[i].words_data);\n          myWordCloud.bgHandle.property('ref', 0)\n                              .property('selected', false)\n                              .classed('wordcloud', true);\n          wclst['wordCloud'] = myWordCloud;\n        }\n\n      });\n    }\n\n    erase_link() {\n      this.graph.link_info.forEach((ls) => {\n        ls.forEach((l) => {\n          d3.select(l['el'])\n          .transition()\n          .duration(500)\n          .style('opacity', 0)\n          .remove();\n        });\n      });\n    }\n\n    erase_word () {\n      this.graph.word_info.forEach((w) => {\n        w['wordCloud'].destroy();\n\n      });\n    }\n\n    erase_state() {\n      this.graph.state_info.state_cluster_info.forEach((s) => {\n        d3.select(s['el'])\n          .transition()\n          .duration(500)\n          .style('fill-opacity', 1e-6)\n          .style('opacity', 1e-6)\n          .remove();\n      });\n    }\n\n    createLink(d) {\n      return \"M\" + d.source.x + \",\" + d.source.y\n          + \"C\" + (d.source.x + d.target.x) / 2 + \",\" + d.source.y\n          + \" \" + (d.source.x + d.target.x) / 2 + \",\" + d.target.y\n          + \" \" + d.target.x + \",\" + d.target.y;\n    }\n\n    flatten(arr) {\n      return arr.reduce((acc, val) => {\n        return acc.concat(Array.isArray(val) ? this.flatten(val) : val);\n      }, []);\n    }\n\n    draw_link(g, graph) {\n      const link_info = graph.link_info;\n\n      const strength_extent = d3.extent(this.flatten(link_info).map((l) => l.strength));\n      const max_strength = Math.max(Math.abs(strength_extent[0]), Math.abs(strength_extent[1]));\n      const strength_bound = this.strengthThresholdPercent.map((t) => t * max_strength);\n\n      link_info.forEach((ls, i) => {\n        // const strengthRange = d3.extent(ls);\n        // console.log(`strength threshold is ${this.strengthThresholdPercent}`);\n        ls.forEach((l, j) => {\n          if (l['el']) {\n            d3.select(l['el'])\n              .attr('display', (Math.abs(l.strength) < strength_bound[0] || Math.abs(l.strength) > strength_bound[1]) ? 'none' : '')\n              .transition()\n              .duration(300)\n              .attr('stroke-width', this.strokeWidth(l.strength))\n              // .attr('stroke-width', l.strength !== 0 ? this.strokeWidth(l.strength) : 0)\n              .attr('d', this.createLink(l))\n          } else {\n            let tmp_path = g.append('path')\n              .classed('link', true)\n              .classed('active', false)\n              .classed(l.strength > 0 ? 'positive' : 'negative', true)\n              .property('ref', 0)\n              .attr('d', this.createLink(l))\n              .attr('stroke-width', this.strokeWidth(l.strength))\n              .attr('opacity', 0.15)\n              // .attr('stroke', l.strength > 0 ? this.linkColor[1] : this.linkColor[0])\n              .attr('display', (Math.abs(l.strength) < strength_bound[0] || Math.abs(l.strength) > strength_bound[1]) ? 'none' : '')\n\n            l['el'] = tmp_path.node();\n          }\n\n        });\n      });\n    }\n\n    draw(coCluster) {\n      let self = this;\n      // console.log(coCluster.colClusters.length);\n      const maxClusterSize = coCluster.colSizes.reduce((a, b) => Math.max(a,b));\n      const nCluster = coCluster.labels.length;\n      let clusterInterval2HeightRatio = 1.0;\n      // console.log(coCluster);\n      // console.log(`cluster number is ${nCluster}`);\n      this.params.computeParams(coCluster.labels.length, clusterInterval2HeightRatio, coCluster.colSizes);\n      // this.dx = this.params.wordCloudChord2ClusterDistance - (this.params.wordCloudChord2CenterDistance - maxClusterWidth / 2);\n      this.dx = this.stateClusterWordCloudDX;\n      this.dy = this.params.wordCloudChordLength / 2.0 - this.middle_line_y / 2;\n      // console.log(`maxClusterWidth is ${maxClusterWidth}`);\n      // console.log(`wordCloudChord2CenterDistance is ${this.params.wordCloudChord2CenterDistance}`);\n      console.log(`dx is ${this.dx}, dy is ${this.dy}`);\n\n      // this.dx = 0, this.dy = chordLength / 2;\n      const coClusterAggregation = coCluster.aggregation_info;\n      let state_info = this.calculate_state_info(coCluster, this.params.mode);\n\n      self.graph = {\n        state_info: state_info,\n        coCluster: coCluster,\n        sentence_info: [],\n      }\n      this.draw_state(this.hg, self.graph);\n\n      this.redraw_word_link();\n\n      this.translateX(0);\n    }\n\n    translateX(x) {\n      this.params.middleLineOffset += x;\n      this.hg.attr('transform', 'translate(' + [this.middle_line_x, this.middle_line_y] + ')');\n      this.wg.attr('transform', 'translate(' + [this.middle_line_x + this.dx, this.middle_line_y + this.dy] + ')');\n    }\n\n    adjustdx(newdx) {\n      this.dx = newdx;\n      this.wg.attr('transform', 'translate(' + [this.middle_line_x + this.dx, this.middle_line_y + this.dy] + ')');\n      this.redraw_word_link();\n    }\n\n    destroy() {\n      if (!this.graph) {\n        return;\n      }\n      this.deleteAllSentences();\n      this.erase_state();\n      this.erase_link();\n      this.erase_word();\n      this.topg.transition()\n        // .attr('transform')\n        .duration(300)\n        .attr('transform', 'scale(0.01, 0.01)')\n        .style('opacity', 1e-6)\n        .remove();\n      this.topg = this.svg.append('g');\n      this.hg = this.topg.append('g');\n      this.wg = this.topg.append('g');\n    }\n  }\n\n</script>\n\n\n\n// WEBPACK FOOTER //\n// ClusterView.vue?0949442a","<template>\n  <div>\n    <h4 class=\"normal\">{{ header }}</h4>\n    <hr>\n    <svg :id='svgId' :width='width' :height='height'> </svg>\n    <svg :id='svgId+\"2\"' :width='width' :height='30'> </svg>\n  </div>\n</template>\n\n<style>\n  .content {\n    padding-left: 5px;\n    padding-right: 5px;\n  }\n</style>\n\n<script>\n  import * as d3 from 'd3';\n  import { Chart } from '../layout/chart';\n  import { bus, SELECT_UNIT, SELECT_WORD, SELECT_LAYER } from '../event-bus';\n  import dataServices from '../services/dataService.js'\n\n  const layoutParams = {\n    lineLength: 30,\n    wordWidth: 50,\n    interval: 20,\n    color: d3.scaleOrdinal(d3.schemeCategory10),\n  };\n\n  export default {\n    name: 'InfoBoard',\n    data(){\n      return {\n        // width: 0,\n        chart: null,\n        labelBoard: null,\n        shared: bus.state,\n        statistics: null,\n        layoutParams: layoutParams,\n        wordsStatistics: null,\n        unitsStatistics: null,\n        top_k: 4,\n      };\n    },\n    props: {\n      height: {\n        type: Number,\n        default: 600,\n      },\n      id: {\n        type: String,\n        default: 'info-board',\n      },\n      type: {\n        type: String,\n        default: 'state',\n      },\n      compare: {\n        type: Boolean,\n        default: false,\n      },\n    },\n    computed: {\n      header: function() {\n        const typeStr = this.type === 'state' ? 'Hidden State' : 'Word';\n        return 'Info: ' + (this.shared.compare ? ('[' + this.selectedModel + '] ' + typeStr) : typeStr);\n      },\n      svgId: function () {\n        return this.id + '-svg';\n      },\n      selectedLayer: function () {\n        return this.compare ? this.shared.selectedLayer2 : this.shared.selectedLayer;\n      },\n      selectedModel: function () {\n        return this.compare ? this.shared.selectedModel2 : this.shared.selectedModel;\n      },\n      selectedState: function () {\n        return this.compare ? this.shared.selectedState2 : this.shared.selectedState;\n      },\n      selectedUnits: function () {\n        return this.type === 'state' ? (this.compare ? this.shared.selectedUnits2 : this.shared.selectedUnits) : 0;\n      },\n      selectedWords: function () {\n        return this.type === 'word' ? (this.compare ? this.shared.selectedWords2 : this.shared.selectedWords) : 0;\n      },\n      selectedNode: function() {\n        return this.type === 'word' ? (this.compare ? this.shared.selectedNode2 : this.shared.selectedNode) : 0;\n      },\n    },\n    watch: {\n      width: function () {\n        if (this.selectedLayer && this.selectedModel && this.selectedState) {\n          if (this.type === 'word' && this.wordsStatistics) this.repaintWord();\n          else if (this.type === 'state' && this.unitsStatistics) this.repaintState();\n        }\n      },\n      selectedUnits: function () {\n        if (this.selectedUnits) {\n          let model = this.selectedModel,\n            state = this.selectedState,\n            layer = this.selectedLayer;\n          const p = bus.loadStatistics(model, state, layer)\n            .then(() => {\n              this.statistics = bus.getStatistics(model, state, layer);\n              this.unitsStatistics = this.selectedUnits.map((unit, i) => {\n                const data = this.statistics.statesData[unit];\n                const dataArray = data.mean.map((_, j) => {\n                  return {\n                    mean: data.mean[j],\n                    range1: [data.low1[j], data.high1[j]],\n                    range2: [data.low2[j], data.high2[j]],\n                    word: data.words[j],\n                  };\n                });\n                dataArray.sort((a, b) => a.mean - b.mean);\n                dataArray.splice(this.top_k, dataArray.length - 2 * this.top_k);\n                return dataArray;\n              });\n              this.repaintState();\n            });\n        }\n      },\n      selectedWords: function() {\n        if (this.selectedWords) {\n          let model = this.selectedModel,\n            state = this.selectedState,\n            layer = this.selectedLayer;\n          const p = bus.loadStatistics(model, state, layer)\n            .then(() => {\n              this.statistics = bus.getStatistics(model, state, layer);\n              this.wordsStatistics = this.selectedWords.map((word, i) => {\n                const wordData = this.statistics.statOfWord(word.text);\n                wordData.color = this.selectedWords[i].color;\n                return wordData;\n              });\n              // console.log(this.statistics);\n              this.repaintWord();\n              // const wordsStatistics = this.statistics.statOfWord(this.selectedWords[0]).mean;\n            });\n        }\n      },\n      selectedNode: function() {\n        if (this.selectedNode) {\n          let model = this.selectedModel,\n            state = this.selectedState,\n            layer = this.selectedLayer;\n          const p = dataServices.getWordStatistics(model, state, layer, this.selectedNode.word, (response) => {\n            if (response.status === 200) {\n              const data = response.data;\n              data.word = data.words;\n              data.range1 = data.low1.map((low1, i) => [low1, data.high1[i]]);\n              data.range2 = data.low2.map((low2, i) => [low2, data.high2[i]]);\n              data.color = this.layoutParams.color(0);\n              const line = {mean: this.selectedNode.response, color: this.layoutParams.color(1), word: data.word + '(sentence)'};\n              this.wordsStatistics = [data, line];\n              console.log(this.selectedNode);\n              this.repaintWord();\n            }\n          });\n        }\n      },\n      compare: function () {\n        this.init();\n      },\n      type: function () {\n        this.init();\n      }\n    },\n    methods: {\n      init() {\n        if (this.chart) {\n          this.chart.clean();\n        }\n        if (this.labelBoard) {\n          this.labelBoard.selectAll('rect, text, path').remove();\n        }\n        this.chart = new Chart(d3.select(`#${this.svgId}`), this.width, this.height)\n          .background('lightgray', 0.0);\n        this.labelBoard = d3.select(`#${this.svgId}2`);\n      },\n      repaintWord() {\n        this.chart.clean()\n          .resize(this.width, this.height);\n        this.labelBoard.selectAll('rect, text, path').remove();\n        if (!this.wordsStatistics.length){\n          console.log('Painting no words');\n          return;\n        }\n        const layout = this.layoutParams;\n        const color = layout.color;\n        const labelLength = layout.lineLength + layout.wordWidth + layout.interval;\n\n        this.chart\n          .margin(20, 30, 20, 30)\n          .xAxis('dim')\n          .yAxis('response');\n        let sortIdx = this.wordsStatistics[0].sort_idx;\n        const interval = ~~(sortIdx.length / 200) + 1;\n        const ranges = range(0, sortIdx.length, interval);\n        sortIdx = ranges.map((i) => sortIdx[i]);\n        // console.log(range);\n        // console.log(sortIdx);\n        this.chart.line([[0,0], [this.wordsStatistics[0].mean.length,0]])\n          .attr('stroke', '#000');\n\n        this.wordsStatistics.forEach((wordData, i) => {\n          this.chart\n            .line(sortIdx.map((i) => wordData.mean[i]), (d, i) => i*interval, (d) => { return d; })\n            .attr('stroke-width', 1)\n            .attr('stroke', wordData.color)\n            .attr('stroke-opacity', 0.6);\n          if(wordData.range1){\n            this.chart\n              .area(sortIdx.map((i) => wordData.range1[i]), (d, i) => i*interval, (d) => d[0], (d) => d[1])\n              .attr('fill', wordData.color)\n              .attr('fill-opacity', 0.15)\n              .attr('stroke', wordData.color)\n              .attr('stroke-opacity', 0.1);\n          }\n          if(wordData.range2){\n            this.chart\n              .area(sortIdx.map((i) => wordData.range2[i]), (d, i) => i*interval, (d) => d[0], (d) => d[1])\n              .attr('fill', wordData.color)\n              .attr('fill-opacity', 0.15)\n              .attr('stroke', wordData.color)\n              .attr('stroke-opacity', 0.05);\n          }\n          // draw labels\n          this.labelBoard.append('rect')\n            .attr('x', labelLength*i + 20).attr('y', 10).attr('width', layout.lineLength).attr('height', 1)\n            .attr('fill', wordData.color);\n          this.labelBoard.append('text')\n            .attr('x', labelLength*i + 30 + layout.lineLength).attr('y', 15)\n            .text(wordData.word)\n            .style('font-size', 12);\n          if (i === 0) {\n            this.labelBoard.append('path')\n              .attr('d', 'M' + (30 + layout.lineLength) + ' 20 ' + 'H ' + (wordData.word.length*7 + 30 + layout.lineLength))\n              .style('stroke', wordData.color);\n          }\n        });\n        this.chart.draw();\n\n      },\n      repaintState() {\n        this.chart.clean()\n          .resize(this.width, this.height);\n        this.labelBoard.selectAll('path, text').remove();\n        if (!this.selectedUnits.length){\n          console.log('Painting no states');\n          return;\n        }\n        const xLabelWidth = 20;\n        const subChartWidth = (this.width-xLabelWidth)/this.unitsStatistics.length;\n        const top_k = this.top_k;\n\n        this.unitsStatistics.forEach((unitData, i) => {\n          const xLabel = i === this.unitsStatistics.length - 1 ? 'r' : ' '\n          const marginRight = i === this.unitsStatistics.length - 1 ? xLabelWidth : 0;\n          const subWidth = i === this.unitsStatistics.length - 1 ? subChartWidth + xLabelWidth : subChartWidth;\n          const subchart = this.chart.subChart(subWidth, this.height)\n            .xAxis(xLabel)\n            .yAxis('words');\n          subchart.axis.y.tickFormat((j) => {\n            // console.log(j);\n            if (-1 < j && j < top_k * 2)\n              return unitData[j].word;\n          }).tickValues(range(0,top_k*2,1));\n          subchart.axis.x.ticks(6);\n          subchart\n            .margin(20,marginRight,20,55)\n            .translate(subChartWidth*i, 0)\n            .rotate();\n          subchart\n            .box(unitData, 6, (d, j) => j, (d) => d.mean, (d) => d.range1, (d) => d.range2)\n            .attr('fill', 'steelblue')\n            .attr('stroke', 'black')\n            .attr('stroke-width', 0)\n            .attr('fill-opacity', 0.5);\n          // horizontal line\n          subchart.line([[top_k-0.5, subchart.extents[1][0]], [top_k-0.5, subchart.extents[1][1]]])\n            .style('stroke', '#333').style('stroke-dasharray', '5 5').style('stroke-opacity', 0.6);\n          const labelPos = subChartWidth*i + subChartWidth/2 - 6;\n          this.labelBoard.append('text')\n            .attr('x', labelPos).attr('y', 15)\n            .text('Dim: ' + this.selectedUnits[i])\n            .style('font-size', 12);\n          if (i === 0){\n            this.labelBoard.append('path')\n              .attr('d', 'M' + labelPos + ' 20 ' + 'H ' + (this.selectedUnits[0].toString().length*6 + 30 + labelPos))\n              .style('stroke', '#a36');\n          }\n        })\n        this.chart.draw();\n      },\n\n    },\n    mounted() {\n      // console.log(this.$el);\n      this.width = this.$el.clientWidth - 10;\n      this.init();\n      // register event listener\n      // this.register();\n\n      // test event\n      // bus.$on(SELECT_LAYER, () => {\n      //   setTimeout(() => {\n      //     if (this.type === 'word')\n      //       bus.$emit(SELECT_UNIT, 10, false);\n      //     // if (this.type === 'state')\n      //     //   bus.$emit(SELECT_WORD, 'he', false);\n      //   }, 1000);\n      //   setTimeout(() => {\n      //     if (this.type === 'word')\n      //       bus.$emit(SELECT_UNIT, 20, false);\n      //     // if (this.type === 'state')\n      //     //   bus.$emit(SELECT_WORD, 'she', false);\n      //   }, 4000);\n\n      // });\n\n    }\n  }\n\n  function getSortedStatesData(words) {\n\n  }\n\n  function range(start, end, interval = 1) {\n    const num = ~~((end - start -1) / interval) + 1;\n    return Array.from({length: num}, (v, i) => start + i * interval);\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// InfoBoard.vue?7879530a","<template>\n  <div>\n    <el-col :span=\"12\" class=\"col-bg\" :gutter=\"15\">\n      <info-board :type=\"type1\" :id=\"'info-board-1'\" :height=\"height\" :compare='compare'> </info-board>\n    </el-col>\n    <el-col :span=\"12\" class=\"col-bg\" :gutter=\"15\">\n      <info-board :type=\"type2\" :id=\"'info-board-2'\" :height=\"height\" :compare='false'> </info-board>\n    </el-col>\n  </div>\n</template>\n<style scoped>\n  .model-view {\n    text-align: left;\n    /*padding: 5px;*/\n  }\n\n  .content {\n    padding-left: 5px;\n    padding-right: 5px;\n  }\n</style>\n<script>\n  import { bus, SELECT_UNIT, SELECT_WORD, SELECT_SENTECE_NODE } from '../event-bus.js';\n  import InfoBoard from './InfoBoard';\n\n  export default{\n    name: 'InfoView',\n    components: { InfoBoard },\n    data() {\n      return {\n        shared: bus.state,\n        type1: 'state',\n        type2: 'word',\n      };\n    },\n    props: {\n      height: {\n        type: Number,\n        default: 300,\n      }\n    },\n    computed: {\n      compare: function() {\n        return this.shared.compare;\n      },\n    },\n    methods: {\n\n    },\n    mounted() {\n      bus.$on(SELECT_UNIT, (unit, compare) => {\n        if (!this.compare) return;\n        if (compare) {\n          this.type1 = 'state';\n        } else {\n          this.type2 = 'state';\n        }\n      });\n      bus.$on(SELECT_WORD, (word, compare) => {\n        if (!this.compare) return;\n        if (compare) {\n          this.type1 = 'word';\n        } else {\n          this.type2 = 'word';\n        }\n      });\n      bus.$on(SELECT_SENTECE_NODE, (node, compare) => {\n        if (!this.compare) return;\n        if (compare) {\n          this.type1 = 'word';\n        } else {\n          this.type2 = 'word';\n        }\n      });\n    }\n  }\n\n</script>\n\n\n\n// WEBPACK FOOTER //\n// InfoView.vue?716a8792","<template>\n  <div>\n    <h4 class=\"normal\">Main</h4>\n    <hr>\n    <cluster-view v-if=\"compare\" :width=\"width/2-15\" :height=\"height\" :compare='true'> </cluster-view>\n    <cluster-view :width=\"compare ? width/2-15 : width\" :height=\"height\" :compare='false'> </cluster-view>\n\n    <!--<test-view> </test-view>-->\n      <!--<project-view> </project-view>-->\n\n  </div>\n\n  <!--<el-tabs v-model=\"activeTab\" @tab-click=\"handleClick\" type=\"border-card\" height=800>\n\n    <el-tab-pane label=\"Cluster\" name=\"cluster\">\n      <cluster-view class=\"content\" :height=\"height\"> </cluster-view>\n    </el-tab-pane>\n    <el-tab-pane label=\"Test\" name=\"test\">\n      <test-view> </test-view>\n    </el-tab-pane>\n  </el-tabs>-->\n\n  <!--<el-tab-pane label=\"Project\" name=\"project\">\n      <project-view> </project-view>\n    </el-tab-pane>\n    <el-tab-pane label=\"Arc\" name=\"arc\">\n      <arc-view> </arc-view>\n    </el-tab-pane>-->\n\n</template>\n<style>\n  .content {\n    padding-left: 5px;\n    padding-right: 5px;\n  }\n</style>\n<script>\n  // import ModelView from 'components/ModelView';\n  import ProjectView from 'components/ProjectView';\n  import TestView from 'components/TestView';\n  import ArcView from 'components/ArcView';\n  import ClusterView from 'components/ClusterView';\n  import { bus } from '../event-bus';\n\n  export default {\n    name: \"MainView\",\n    data() {\n      return {\n        activeTab: 'project',\n        shared: bus.state,\n        width: 800,\n      };\n    },\n    props: {\n      height: {\n        type: Number,\n        default: 700,\n      }\n    },\n    methods: {\n      handleClick(tab, event) {\n        // console.log(tab, event);\n        return;\n      }\n    },\n    computed: {\n      // width: function () {\n      //   if (this.$el) {\n      //     console.log(this.$el.clientWidth);\n      //     return this.$el.clientWidth;\n      //   }\n      //   return 800;\n      // },\n      compare: function () {\n        return this.shared.compare;\n      }\n    },\n    components: {\n      ProjectView,\n      TestView,\n      ArcView,\n      ClusterView,\n    },\n    mounted() {\n      this.width = this.$el.clientWidth;\n    }\n  };\n</script>\n\n\n\n// WEBPACK FOOTER //\n// MainView.vue?53b6d424","<template>\n  <div class=\"grid-content\">\n    <el-form label-position=\"left\" label-width=\"30%\">\n      <!--Model Selector-->\n      <el-form-item :label=\"compare ? 'Model 2' : 'Model'\">\n        <el-select v-model=\"selectedModel\" placeholder=\"Select A Model\" size=\"small\" style=\"width: 80%;\">\n          <el-option v-for=\"(model, idx) in availableModels\" :value=\"model\" :label=\"model\"></el-option>\n        </el-select>\n        <el-button v-if=\"compare\" @click=\"toggle\" icon=\"delete\" size=\"small\"></el-button>\n      </el-form-item>\n\n      <!--Model Configs as tags-->\n      <div v-if=\"config\" class=\"el-form-item\">\n        <el-tag v-for=\"key in Object.keys(config)\" :type=\"colorType\">{{key}}: {{config[key]}}</el-tag>\n      </div>\n      <hr v-if=\"config\" class=\"local-hr\">\n\n      <!--Radio control for selecting state type-->\n      <el-form-item label=\"Hidden State\" v-if=\"states.length\">\n        <el-radio-group v-model=\"selectedState\" size=\"small\">\n          <el-radio-button v-for=\"state in states\" :label=\"state\">{{stateName(state)}}</el-radio-button>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"Layer\" v-if=\"layerNum\">\n        <el-input-number size=\"small\" v-model=\"selectedLayer\" :max=\"layerNum-1\" style=\"width: 100px; margin-top: 5px\"></el-input-number>\n      </el-form-item>\n      <el-form-item label=\"POS Tag\" v-if=\"states.length\">\n        <el-switch v-model=\"posSwitch\" on-text=\"\" off-text=\"\">\n        </el-switch>\n        <span class=\"align\" style='margin-left: 30px'>Align</span>\n        <el-switch v-model=\"mode\" on-text=\"\" off-text=\"\" @change=\"layoutChange\">\n        </el-switch>\n      </el-form-item>\n\n      <!--Sentence Editor-->\n      <el-form-item label=\"Sentences\" v-if=\"selectedModel\">\n        <el-input\n          class=\"input-new-tag\"\n          v-if=\"inputVisible\"\n          v-model=\"inputValue\"\n          ref=\"saveTagInput\"\n          size=\"small\"\n          @keyup.enter.native=\"handleInputConfirm\"\n          @blur=\"handleInputConfirm\"\n        >\n        </el-input>\n        <el-button v-else class=\"button-new-tag\" size=\"small\" @click=\"showInput\">+ New Sentence</el-button>\n      </el-form-item>\n      <div class=\"sentence-container\" v-if=\"sentences.length\">\n        <el-tag v-for=\"sentence in sentences\" :closable=\"true\" @close=\"closeSentence(sentence)\" :type=\"colorType\">\n          <a>{{sentence}}</a>\n        </el-tag>\n      </div>\n      <hr v-if=\"selectedState\" class=\"local-hr\">\n\n      <!--Controls for the layout-->\n      <el-form-item label=\"Cluster Num\" v-if=\"selectedState\">\n        <el-slider v-model=\"layout.clusterNum\" :min=\"2\" :max=\"20\" style=\"width: 80%\" @change=\"layoutChange\"></el-slider>\n      </el-form-item>\n      <el-form-item label=\"Stroke Width\" v-if=\"selectedState\" style=\"margin-top: -7px; padding-bottom: -10px\">\n        <el-slider v-model=\"layout.strokeControlStrength\" :min=\"0\" :max=\"maxWidth\" :step=\"0.1\" style=\"width: 80%\" @change=\"layoutChange\"></el-slider>\n      </el-form-item>\n      <el-form-item label=\"Link Filter\" v-if=\"selectedState\" style=\"margin-top: -7px\">\n        <el-slider v-model=\"layout.linkFilterThreshold\" range :min=\"0\" :max=\"1\" :step=\"0.0001\" @change=\"layoutChange\" style=\"width: 80%\"></el-slider>\n      </el-form-item>\n      <el-form-item label=\"State Clip\" v-if=\"selectedState\" style=\"margin-top: -7px\">\n        <el-slider v-model=\"layout.stateClip\" :min=\"0\" :max=\"10\" :step=\"1\" @change=\"layoutChange\" style=\"width: 80%\"></el-slider>\n      </el-form-item>\n      <!--Color Picker for temporal use-->\n      <!--<el-form-item label=\"colorPicker\" v-if=\"selectedState\">\n        <el-color-picker label=\"positive\" v-model=\"color[1]\" @change=\"colorChange\"></el-color-picker>\n        <el-color-picker label=\"negative\" v-model=\"color[0]\" @change=\"colorChange\"></el-color-picker>\n      </el-form-item>-->\n    </el-form>\n  </div>\n</template>\n<style>\n  .el-form-item {\n    margin-bottom: 5px;\n    margin-top: -5px;\n    font-size: 12px;\n  }\n\n  .align {\n    color: rgb(72, 87, 106);\n  }\n\n  .el-form-item__content{\n    line-height: 30px !important;\n  }\n\n  label {\n    font-size: 12px !important;\n  }\n\n  .el-tag {\n    margin-right: 5px;\n    display: inline-block;\n    /*width: 90%;*/\n    white-space: normal;\n    height: auto;\n    line-height: 18px;\n  }\n\n  .local-hr {\n    width: 95%;\n    font-size: 1px;\n    color: gray;\n    opacity: 0.5;\n    line-height: 1px;\n    margin-top: 8px;\n    margin-bottom: 4px;\n  }\n\n  .sentence-container {\n    width: 90%;\n    margin-left: 10px;\n  }\n</style>\n<script>\n  import { bus, SELECT_MODEL, SELECT_STATE, SELECT_LAYER, CHANGE_LAYOUT, EVALUATE_SENTENCE, CLOSE_SENTENCE, SELECT_COLOR} from '../event-bus';\n\n  export default {\n    name: 'ModelConfig',\n    data() {\n      return {\n        shared: bus.state,\n        states: [],\n        selectedState: null,\n        selectedModel: null,\n        selectedLayer: null,\n        posSwitch: false,\n        config: null,\n        layout: {\n           clusterNum: 2,\n           strokeControlStrength: 100,\n          //  strokeControlStrength: 8,\n           linkFilterThreshold: [0, 1],\n          //  linkFilterThreshold: [0.2, 1],\n           stateClip: 1,\n           mode: 'width',\n        },\n        sentences: [],\n        inputVisible: false,\n        inputValue: '',\n        mode: false,\n        color: ['#09adff', '#ff5b09'],\n      };\n    },\n    props: {\n      toggle: {\n        type: Function,\n        default: () => { return; },\n      },\n      compare: {\n        type: Boolean,\n        default: false,\n      },\n    },\n    computed: {\n      availableModels: function () { // model list\n        return this.shared.availableModels;\n      },\n      colorType: function() {\n        return this.compare ? 'gray' : '';\n      },\n      layerNum: function() {\n        if (this.config) return this.config.LayerNum;\n        return 0;\n      },\n      maxWidth: function() {\n        // if (this.selectedModel.substring(0, 4) === 'YELP' || this.selectedModel.substring(0, 4) === 'IMDB') return 100;\n        return 20;\n      }\n    },\n    watch: {\n      selectedModel: function (selectedModel) {\n        if (!selectedModel) return;\n        bus.loadModelConfig(selectedModel) // make sure the bus has got the config data\n          .then(() => {\n            const states = bus.availableStates(selectedModel);\n            if (states) {\n              this.states = states;\n              this.selectedState = this.states[0]; // reset\n              const config = bus.state.modelConfigs[selectedModel];\n              this.config = {\n                Cell: config.model.cell_type,\n                LayerNum: config.model.cells.length,\n                LayerSize: config.model.cells[0].num_units,\n              };\n              this.posSwitch = false;\n              this.selectedLayer = this.config.LayerNum - 1;\n              this.sentences = [];\n              bus.$emit(SELECT_MODEL, this.selectedModel, this.compare);\n              bus.$emit(CHANGE_LAYOUT, this.layout, this.compare);\n            }\n          }).catch((v) => console.log(v));\n      },\n      selectedState: function (newState) {\n        if (newState === 'state' || newState === 'state_c' || newState === 'state_h') {\n          bus.$emit(SELECT_STATE, this.selectedState, this.compare);\n        }\n      },\n      selectedLayer: function (newLayer) {\n        bus.$emit(SELECT_LAYER, newLayer, this.compare);\n      },\n      posSwitch: function(pos) {\n        if (this.compare) this.shared.renderPos2 = pos;\n        else this.shared.renderPos = pos;\n      }\n      // layout: function (newLayout) {\n      //   console.log('layout changed.')\n      //   bus.$emit(CHANGE_LAYOUT, newLayout, this.compare);\n      // }\n    },\n    methods: {\n      stateName(state) {\n        switch (state) {\n          case 'state_c': return 'cell state';\n          case 'state_h': return 'hidden state';\n          case 'state': return 'hidden state';\n          default: return 'Unknown';\n        }\n      },\n      layoutChange() {\n        console.log(\"Layout changed\")\n        // copy to a new one to force change\n        this.layout.mode = this.mode ? 'width' : 'height';\n        const layout = Object.assign({}, this.layout)\n        bus.$emit(CHANGE_LAYOUT, layout, this.compare);\n      },\n      closeSentence(sentence) {\n        const idx = this.sentences.indexOf(sentence);\n        if (idx !== -1){\n          bus.$emit(CLOSE_SENTENCE, sentence, this.compare);\n          this.sentences.splice(idx, 1);\n        }\n      },\n      showInput() {\n        this.inputVisible = true;\n        this.$nextTick(_ => {\n          this.$refs.saveTagInput.$refs.input.focus();\n        });\n      },\n\n      handleInputConfirm() {\n        let inputValue = this.inputValue;\n        if (inputValue) {\n          bus.$emit(EVALUATE_SENTENCE, inputValue, this.compare);\n          this.sentences.push(inputValue);\n        }\n        this.inputVisible = false;\n        this.inputValue = '';\n      },\n\n      colorChange(color) {\n        bus.$emit(SELECT_COLOR, this.color);\n        // console.log('color changed to ' + color);\n      }\n    },\n    mounted() {\n      // this.activeSentences = this.sentences.map((d, i) => {\n      //   return true;\n      // });\n    }\n  };\n\n</script>\n\n\n\n// WEBPACK FOOTER //\n// ModelConfig.vue?3226e355","<template>\n  <div>\n    <h4 class=\"normal\">Models</h4>\n    <hr>\n    <div class=\"content model-view\">\n      <model-config :compare=\"false\"> </model-config>\n      <hr v-if=\"compare\">\n      <model-config v-if=\"compare\" :compare=\"true\" :toggle=\"toggleCompare\"> </model-config>\n      <hr>\n      <el-button @click=\"toggleCompare\" size=\"small\">Compare Model</el-button>\n    </div>\n  </div>\n</template>\n<style scoped>\n  .model-view {\n    text-align: left;\n    /*padding: 5px;*/\n  }\n\n  .content {\n    padding-left: 5px;\n    padding-right: 5px;\n  }\n</style>\n<script>\n  import { bus, SELECT_MODEL, SELECT_STATE } from '../event-bus.js';\n  import ModelConfig from './ModelConfig';\n\n  export default{\n    name: 'ModelView',\n    components: { ModelConfig },\n    data() {\n      return {\n        compare: false,\n        shared: bus.state,\n      };\n    },\n    mounted() {\n      this.getAvailableModels();\n    },\n    computed: {\n      // availableModels: function() { // model list\n      //   return this.shared.availableModels;\n      // },\n    },\n    methods: {\n      getAvailableModels() {\n        console.log(\"getting available models...\");\n        bus.loadAvailableModels();\n        if(this.shared.availableModels) return;\n        setTimeout(() => {\n          this.getAvailableModels();\n        }, 2000);\n      },\n      modelColor(i) {\n        return i === 1 ? 'primary' : 'success';\n      },\n      toggleCompare() {\n        this.compare = !this.compare;\n        if (!this.compare) {\n          this.selectedModel2 = null;\n          this.selectedState2 = null;\n          this.states2 = [];\n          bus.$emit(SELECT_MODEL, null, true);\n          bus.$emit(SELECT_STATE, null, true);\n\n        }\n      },\n      stateName(state) {\n        switch(state) {\n          case 'state_c': return 'c_state';\n          case 'state_h': return 'h_state';\n          case 'state': return 'h_state';\n          default: return 'Unknown';\n        }\n      }\n    },\n    watch: {\n      // selectedModel: function(selectedModel){\n      //   bus.loadModelConfig(selectedModel) // make sure the bus has got the config data\n      //     .then(() => {\n      //       const states = bus.availableStates(selectedModel);\n      //       if (states){\n      //         this.states = states;\n      //         this.selectedState = null; // reset\n      //         const config = bus.state.modelConfigs[selectedModel];\n      //         this.config = {\n      //           Cell: config.model.cell_type,\n      //           LayerNum: config.model.cells.length,\n      //           LayerSize: config.model.cells[0].num_units,\n      //         };\n      //       // this.configTree = json2tree(config).children;\n      //         bus.$emit(SELECT_MODEL, this.selectedModel, this.selectedModel2);\n      //       }\n      //     });\n      // },\n      // selectedModels: function(selectedModels){\n      //   if (!selectedModel) return;\n      //   bus.loadModelConfig(selectedModel) // make sure the bus has got the config data\n      //     .then(() => {\n      //       const states = bus.availableStates(selectedModel);\n      //       if (states){\n      //         this.states2 = states;\n      //         this.selectedState2 = null; // reset\n      //       // const config = bus.state.modelConfigs[selectedModel];\n      //       // this.configTree = json2tree(config).children;\n      //         bus.$emit(SELECT_MODEL, this.selectedModel, this.selectedModel2);\n      //       }\n      //     });\n      // },\n      // selectedState: function (newState) {\n      //   if (newState === 'state' || newState === 'state_c' || newState === 'state_h') {\n      //     bus.$emit(SELECT_STATE, this.selectedState, this.selectedState2);\n      //   }\n      // },\n      // selectedState2: function (newState) {\n      //   if (newState === 'state' || newState === 'state_c' || newState === 'state_h') {\n      //     bus.$emit(SELECT_STATE, this.selectedState, this.selectedState2);\n      //   }\n      // },\n    }\n  }\n\n  function json2tree(json){\n    let data = {label: '', children: []};\n    if (isObject(json)) {\n      Object.keys(json).map( key => {\n        let child = json2tree(json[key]);\n        child.label = key + child.label; // assign key back\n        if (Array.isArray(json)){\n          child.label = child.children[0].label;\n        }\n        data.children.push(child);\n      });\n    }\n    else{\n      data.label = \": \" + json;\n      delete data.children;\n    }\n    return data;\n  }\n\n  function isObject(thing){\n    return (typeof thing === \"object\") && (thing !== null);\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// ModelView.vue?48621188","<template>\n  <svg :id=\"svgId\" :width=\"width\" :height=\"height\" class=\"project\"> </svg>\n</template>\n<script>\n  import * as d3 from 'd3';\n  import { bus } from 'event-bus';\n  import { kmeans } from '../algorithm/cluster';\n\n  const defaultConfig = {\n    rScale: 0.3,\n    radius: 3.0,\n    opacity: 0.4,\n    opacityHigh: 1.0,\n    defaultAlpha: 0.35,\n    repel: -5,\n    strength_thred: 0.6,\n    color: d3.scaleOrdinal(d3.schemeCategory10),\n    color2: d3.scaleOrdinal(d3.schemeCategory20),\n    clusterNum: 0,\n  };\n\n  export default {\n    name: 'ProjectGraph',\n    defaultConfig: defaultConfig,\n    data() {\n      return {\n        fdGraph: null,\n        // defaultConfig: defaultConfig,\n      };\n    },\n    props: {\n      width: {\n        type: Number,\n        default: 800,\n      },\n      height: {\n        type: Number,\n        default: 800,\n      },\n      graphData: {\n        type: Object,\n        required: true,\n      },\n      svgId: {\n        type: String,\n        required: true,\n      },\n      config: {\n        type: Object,\n        default: null,\n      },\n      ready: { // a small workaround of getting ready signal form parent\n        type: Boolean,\n        default: false,\n      },\n    },\n    watch: {\n      width: function (newWidth) {\n        this.fdGraoh.updateScale();\n      },\n      height: function (newWidth) {\n        this.fdGraph.updateScale();\n      },\n      ready: function (newReady) {\n        if (newReady) {\n          this.reset();\n        }\n      },\n    },\n    methods: {\n      reset() {\n        // const config = this.config === null ? defaultConfig : this.config;\n        if (this.fdGraph) {\n          this.fdGraph.destroy();\n        }\n        const svg = document.getElementById(this.svgId);\n        this.fdGraph = new ForceDirectedGraph(svg, this.config);\n        normalize(this.graphData.states);\n        let extents = calExtent(this.graphData.states);\n        this.fdGraph.updateScale(extents);\n        this.fdGraph.buildGraph(this.graphData.strength, this.graphData.states);\n        this.fdGraph.insertElements();\n        this.fdGraph.initSimulation();\n        this.fdGraph.startSimulation();\n      },\n      refreshGraph(ready) {\n        if (ready){\n          this.fdGraph.refresh();\n          this.fdGraph.clusterStates(this.graphData.signature);\n        }\n      }\n    },\n    mounted() {\n      // register event listeners\n      bus.$on('REFRESH_PROJECT_GRAPH', this.refreshGraph);\n      // this.reset();\n    }\n  };\n\n  function normalize(points) {\n    const extents = calExtent(points);\n    const factor_x = 100 / (extents[0][1] - extents[0][0]);\n    const factor_y = 100 / (extents[1][1] - extents[1][0]);\n    const factor = Math.max(factor_x, factor_y)\n    for (let i = 0; i < points.length; i++) {\n      points[i].coords[0] *= factor;\n      points[i].coords[1] *= factor;\n    }\n  }\n\n  class ForceDirectedGraph {\n    constructor(svg, params, strengthfn) {\n      let self = this;\n      this.svg = d3.select(`#${svg.id}`);\n      this.svgEl = svg;\n      this.graph = null;\n      this.simulation = null;\n      this.stateNodes = null;\n      this.wordNodes = null;\n      this.links = null;\n      this.scale = { x: null, y: null, invert_x: null, invert_y: null };\n      this.extents = null;\n      this.strengthfn = strengthfn || (v => { return (v / 2) ** 3; });\n      this.params = params;\n      // Object.keys(params).forEach((p) => { self[p] = params[p]; });\n    }\n\n    get width() {\n      return this.svgEl.clientWidth;\n    }\n\n    get height() {\n      return this.svgEl.clientHeight;\n    }\n\n    buildGraph(words, states) {\n      let self = this;\n      // initialize Nodes and Links\n      // console.log(\"initializing stateNodes\")\n      states.forEach(function (e) {\n        e.id = \"\" + e.layer + \"-\" + e.state_id;\n        e.fx = e.coords[0];\n        e.fy = e.coords[1];\n        e.links = [];\n        // e.force = -200;\n      });\n      // console.log(\"initializing wordNodes\")\n      words.forEach(function (e) {\n        e.id = e.word;\n        e.links = [];\n        // e.force = 0;\n      });\n      // console.log(\"initializing nodeLinks\")\n\n      let layers = Array.from(new Set(states.map(function (d) { return d.layer }))).sort();\n      // console.log(layers)\n      let links = [];\n      let id2states = {};\n      states.forEach(function (d) { id2states[d.id] = d });\n      words.forEach(function (node) {\n        let i = 0;\n        node.strength.forEach(function (strengths) {  // the strength is stored as a list per layer's states\n          let j = 0;  // state_id counter\n          strengths.forEach(function (f) {\n            let intensity = f;\n            if (Math.abs(intensity) > self.params.strength_thred) {  // a threshold strength\n              // create link\n              let link = {\n                source: \"\" + layers[i] + \"-\" + j,  // the id of the stateNode\n                target: node.id,\n                strength: self.strengthfn(Math.abs(intensity)),\n                type: Math.sign(f)  // negative or positive strength\n              };\n              link._source = id2states[link.source];\n              link._target = node;\n              // add link to links array\n              links.push(link);\n              // add link to source and target nodes for reference\n              id2states[link.source].links.push(link);\n              node.links.push(link);\n            }\n            j++;\n          });\n          i++;\n        });\n      });\n      console.log(\"done building graph\")\n      this.graph = {\n        nodes: words.concat(states),\n        links: links,\n        id2states: id2states,\n        wordNodes: words,\n        stateNodes: states\n      };\n    }\n\n    initSimulation() {\n      var repelForce = d3.forceManyBody().strength(-30).distanceMax(4); // the force that repel words apart\n      var init = repelForce.initialize;\n      repelForce.initialize = function (nodes) {\n        init(nodes.filter(function (d) { d.hasOwnProperty(\"word\") })); // only apply between word Nodes\n      }\n      // var collideForce = d3.forceManyBody().strength(this.params.repel).distanceMax(10);\n      var collideForce = d3.forceCollide().strength(0.5).radius(1);\n      this.simulation = d3.forceSimulation().alpha(this.params.defaultAlpha)\n        .force(\"link\", d3.forceLink() //.iterations(4)\n          .id((d) => { return d.id; })\n          .distance((l) => { return l.type < 0 ? 50 : 5; })\n          .strength((d) => { return d.strength }))\n        .force(\"collide\", collideForce)\n        .force(\"charge\", repelForce);\n    }\n\n    insertElements() {\n      let self = this;\n      var g_states = this.svg.append('g')\n        .attr('class', 'states');\n      this.stateNodes = g_states.selectAll('circle')\n        .data(this.graph.stateNodes)\n        .enter().append(\"circle\")\n        // .attr(\"cx\", function(d) { return d.fx; })\n        // .attr(\"cy\", function(d) { return d.fy; })\n        .attr(\"r\", function (d) {\n          if (d.links.length > 0)\n            return d.links.length * self.params.rScale + self.params.radius;\n          return 0;\n        })\n        .style(\"fill\", function (d, i) { return self.params.color(d.label); })\n        .classed(\"active\", false)\n        .on(\"mouseover\", d => mouseover(d, self))\n        .on(\"mouseout\", d => mouseout(d, self))\n        .on(\"click\", d => clickState(d, self));\n\n      this.stateNodes.append(\"title\")\n        .text(function (d) { return d.id });\n      //.style({opacity:'1.0'});\n\n      // append a group for links\n      this.links = this.svg.append(\"g\")\n        .attr(\"class\", \"links\")\n        .selectAll(\"line\")\n        .data(this.graph.links)\n        .enter().append(\"line\")\n        .classed(\"active\", false);\n\n      // append a group for text nodes\n      this.wordNodes = this.svg.append(\"g\")\n        .attr(\"class\", \"words\")\n        .selectAll(\"text\")\n        .data(this.graph.wordNodes)\n        .enter().append(\"text\")\n        .classed(\"active\", false)\n        .call(d3.drag()\n          .on(\"start\", d => {\n            if (!d3.event.active) self.simulation.alphaTarget(self.params.defaultAlpha).restart();\n            d.fx = d.x;\n            d.fy = d.y;\n            // graph.links.forEach( function(d) {d.active = false; });\n            d.links.forEach(function (d) { d.active = true; });\n            refreshLinkStyle(self);\n          })\n          .on(\"drag\", d => {\n            d.fx = self.scale.invert_x(d3.mouse(self.svgEl)[0]);\n            d.fy = self.scale.invert_y(d3.mouse(self.svgEl)[1]);\n          })\n          .on(\"end\", d => {\n            if (!d3.event.active) self.simulation.alphaTarget(0);\n            d.fx = null;\n            d.fy = null;\n            d.links.forEach(function (d) { d.active = false; });\n            refreshLinkStyle(self);\n          }))\n        .text(function (d) { return d.id });\n      // console.log(this.links)\n\n      refreshLinkStyle(self);\n      refreshWordStyle(self);\n      refreshStateStyle(self);\n    }\n\n    startSimulation() {\n      let self = this;\n      self.simulation\n        .nodes(self.graph.nodes)\n        .on(\"tick\", () => self.ticked(self.links, self.wordNodes, self.stateNodes));\n\n      self.simulation.force(\"link\")\n        .links(self.graph.links);\n    }\n\n    ticked(links, wordNodes, stateNodes) {\n      // console.log(this.scale)\n      let _graph = this;\n      links\n        .attr(\"x1\", function (d) { return _graph.scale.x(d.source.x); })\n        .attr(\"y1\", function (d) { return _graph.scale.y(d.source.y); })\n        .attr(\"x2\", function (d) { return _graph.scale.x(d.target.x); })\n        .attr(\"y2\", function (d) { return _graph.scale.y(d.target.y); });\n\n      wordNodes\n        .attr(\"x\", function (d) { return _graph.scale.x(d.x); })\n        .attr(\"y\", function (d) { return _graph.scale.y(d.y); });\n\n      stateNodes\n        .attr(\"cx\", function (d) { return _graph.scale.x(d.x); })\n        .attr(\"cy\", function (d) { return _graph.scale.y(d.y); });\n    }\n\n    updateScale(extents) {\n      if (extents) {\n        this.extents = extents;\n      }\n      let width = this.width, height = this.height;\n      let xExtent = this.extents[0],\n        yExtent = this.extents[1];\n      let xCenter = (xExtent[0] + xExtent[1]) / 2,\n        yCenter = (yExtent[0] + yExtent[1]) / 2;\n      let scaleFactor = 0.9 * Math.min(width / (xExtent[1] - xExtent[0]), height / (yExtent[1] - yExtent[0]));\n      this.scale.x = function (_x) {\n        return (_x - xCenter) * scaleFactor + width / 2;\n      };\n      this.scale.y = function (_y) {\n        return (yCenter - _y) * scaleFactor + height / 2;\n      };\n      this.scale.invert_x = function (_x) {\n        return (_x - width / 2) / scaleFactor + xCenter;\n      };\n      this.scale.invert_y = function (_y) {\n        return yCenter - (_y - height / 2) / scaleFactor;\n      };\n    }\n\n    clusterStates(stateSignature) {\n      const clusterNum = this.params.clusterNum;\n      if (clusterNum < 2)\n        return;\n      const clusterAssignments = kmeans(stateSignature, clusterNum, 1000);\n      this.graph.stateNodes.forEach( (node, i) => {\n        node.cluster = clusterAssignments[i];\n      });\n      this.stateNodes.style('fill', (d, i) => {\n        if (clusterNum < 11)\n          return this.params.color(d.cluster);\n        return this.params.color2(d.cluster);\n      });\n    }\n\n    destroy() {\n      console.log(`Destroying Graph ${this.svgEl.id}`)\n      this.simulation.nodes([]);\n      this.simulation.force(\"link\").links([]);\n      this.links.remove();\n      this.stateNodes.remove();\n      this.wordNodes.remove();\n      // this.graph;\n    }\n\n    refresh() {\n      refreshLinkStyle(this);\n      refreshStateStyle(this);\n      refreshWordStyle(this);\n    }\n\n  };\n\n  function calExtent(points) {\n    var xExtent = d3.extent(points, function (d) { return d.coords[0] }),\n      yExtent = d3.extent(points, function (d) { return d.coords[1] });\n    return [xExtent, yExtent]\n  }\n\n  function mouseover(d, g) {\n    if (d.active) return;\n    d3.select(this).classed(\"active\", true);\n    d.links.forEach(function (l) {\n      l.active = true;\n      l._target.active = true;\n    });\n    refreshLinkStyle(g);\n    refreshWordStyle(g);\n  }\n\n  function mouseout(d, g) {\n    if (d.active) return;\n    d3.select(this).classed(\"active\", false);\n    d.links.forEach(function (l) {\n      l.active = false;\n      l._target.active = false;\n    });\n    refreshLinkStyle(g);\n    refreshWordStyle(g);\n  }\n\n\n  function clickState(d, g) {\n    let isActive = d.active;\n    if (isActive) {\n      d.active = false;\n      mouseout(d, g);\n    }\n    else {\n      mouseover(d, g);\n      d.active = true;\n    }\n    refreshLinkStyle(g);\n    refreshWordStyle(g);\n    d3.select(this).classed(\"active\", d.active);\n  }\n\n  function refreshLinkStyle(g) {\n    g.links.classed(\"active\", function (d) { return d.active; })\n      .style(\"opacity\", function (d) {\n        return d.strength * (d.active ? g.params.opacityHigh : g.params.opacity);\n      })\n      .style(\"stroke\", function (d) {\n        if (d.active)\n          return \"#6b7\"\n        if (d.type < 0)\n          return \"#68b\";\n        return \"#c66\";\n      });\n  }\n\n  function refreshStateStyle(g) {\n    g.stateNodes.classed(\"active\", function (d) { return d.active; });\n    // stateNodes.attr('r', function(d){ return d.links.length * rScale + radius})\n  }\n\n  function refreshWordStyle(g) {\n    g.wordNodes.classed(\"active\", function (d) { return d.active; })\n  }\n\n</script>\n<style>\n  .links .active {\n    stroke-width: 3;\n  }\n\n  .links {\n    stroke-width: 1.5;\n    pointer-events: none;\n  }\n\n  .states .active {\n    stroke-width: 2.0;\n    stroke: black;\n    opacity: 1.0;\n  }\n\n  .states {\n    stroke-width: 0.0;\n    opacity: 0.7;\n  }\n\n  .words .active {\n    stroke-width: 0.5;\n    stroke: black;\n    opacity: 1.0;\n  }\n\n  .words {\n    font-size: 13;\n    opacity: 0.8;\n    stroke: black;\n    stroke-width: 0;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ProjectGraph.vue?1b20cc84","<template>\n  <div class=\"project\">\n    <!--<div class=\"header\">\n      <el-radio-group v-model=\"selectedState\" size=\"small\">\n        <el-radio-button v-for=\"state in states\" :label=\"state\"></el-radio-button>\n      </el-radio-group>\n    </div>-->\n    <project-graph :svg-id=\"paneId(model, selectedState)\" :width=\"width\" :height=\"height\" :graph-data=\"graphData\" :ready=\"ready\" :config=\"config\">\n    </project-graph>\n    <div class=\"config\">\n      <!--<el-form :model=\"config\" :inline=\"true\">-->\n      <el-col :span=\"4\">\n        <span>Cluster No.</span>\n      </el-col>\n      <el-col :span=\"6\">\n        <el-slider v-model=\"config.clusterNum\" :min=\"1\" :max=\"20\" @change=\"configWatcher\"></el-slider>\n      </el-col>\n      <el-col :span=\"4\">\n        <span>Opacity</span>\n      </el-col>\n      <el-col :span=\"6\">\n        <el-slider v-model=\"config.opacity\" :max=\"1\" :step=\"0.05\" @change=\"configWatcher\" :width=\"100\"></el-slider>\n      </el-col>\n      <!--</el-form>-->\n    </div>\n\n  </div>\n</template>\n<script>\n  import * as d3 from 'd3';\n  import dataService from '../services/dataService';\n  import { bus, SELECT_MODEL } from 'event-bus';\n  import ProjectGraph from 'components/ProjectGraph';\n\n  export default {\n    name: 'ProjectView',\n    props: {\n      width: {\n        type: Number,\n        default: 800,\n      },\n      height: {\n        type: Number,\n        default: 600,\n      },\n    },\n    data() {\n      const drawConfig = Object.assign({}, ProjectGraph.defaultConfig); // get a copy\n      return {\n        model: '',\n        // selectedState: '',\n        states: '',\n        ready: false,\n        graphData: { states: null, strength: null },\n        config: drawConfig,\n        cache: {},\n        shared: bus.state,\n      };\n    },\n    components: { ProjectGraph },\n    computed: {\n      selectedState: function () {\n        return this.shared.selectedState;\n      }\n    },\n    watch: {\n      selectedState: function (newState, oldState) {\n        bus.state.selectedState = newState;\n        if (newState === oldState) {\n          return;\n        }\n        if (newState === 'state' || newState === 'state_c' || newState === 'state_h') {\n          this.reset();\n        }\n      },\n    },\n\n    methods: {\n\n      paneId(model, state) {\n        return `${model}-${state}-svg`;\n      },\n\n      reset() { // reset the whole graph\n        this.ready = false; // reset ready signal\n        delete this.graphData.signature; // reset signature data\n        this.config = Object.assign({}, ProjectGraph.defaultConfig); // reset controlings\n        if(this.selectedState === 'state'){ //hack\n          this.config.strength_thred = 0.9;\n        }\n        if(this.selectedState === 'state_h'){\n          this.config.strength_thred = 0.5;\n        }\n        if(this.model === 'IMDB'){\n          this.config.strength_thred = 0.0;\n          this.config.strengthFn = (v => { return (v * 30) ** 2; });\n          this.config.farDistance = 120;\n        }\n        const cacheTag = this.paneId(this.model, this.selectedState);\n        if (Object.prototype.hasOwnProperty.call(this.cache, cacheTag)) { // already has the cache data\n          Object.assign(this.graphData, this.cache[cacheTag]);\n          setTimeout(() => { this.ready = true; }, 100);\n          return;\n        }\n        // request for data\n        const p1 = dataService.getProjectionData(this.model, this.selectedState, {}, response => {\n          this.graphData.states = response.data;\n          console.log('states data loaded');\n        });\n        const p2 = dataService.getStrengthData(this.model, this.selectedState, { top_k: 200 }, response => {\n          const strengthData = response.data;\n          this.graphData.strength = [strengthData[163]].concat(strengthData.slice(20, 40)); //.concat(strengthData.slice(170, 190));\n          console.log('strength data loaded');\n        });\n        const pAll = Promise.all([p1, p2]).then(values => {\n          this.cache[cacheTag] = { states: this.graphData.states, strength: this.graphData.strength }; // cache fetched data;\n          setTimeout(() => { this.ready = true; }, 100);\n          // continue to download signature data which might be used for clustering\n          dataService.getStateSignature(this.model, this.selectedState, {}, response => {\n            this.graphData.signature = response.data;\n            this.cache[cacheTag].signature = this.graphData.signature;\n            console.log('signature data loaded');\n          });\n        }, errResponse => {\n          console.log(\"Failed to build force graph!\");\n        });\n\n      },\n\n      configWatcher() {\n        if (this.ready === false) return;\n        if (this.config.clusterNum > 1 && !Object.prototype.hasOwnProperty.call(this.graphData, 'signature')) {\n          dataService.getStateSignature(this.model, this.selectedState, {}, response => {\n            this.graphData.signature = response.data;\n            console.log('signature data loaded');\n            bus.$emit(\"REFRESH_PROJECT_GRAPH\", this.ready);\n          });\n          return;\n        }\n        bus.$emit(\"REFRESH_PROJECT_GRAPH\", this.ready);\n      },\n    },\n\n    mounted() {\n      bus.$on(SELECT_MODEL, (modelName, compare) => {\n        if (compare)\n          return;\n        console.log(`selected model: ${modelName}`);\n        this.model = modelName;\n        bus.loadModelConfig(modelName).then((_) => {\n          const states = bus.availableStates(modelName);\n          if (states){\n            this.states = states;\n            // console.log(this.states);\n            setTimeout(() => { // wait 100ms to update incase the dom is not ready\n              if (this.states[0] === this.selectedState) { // ugly hacker incase states are same to manually reset the data.\n                this.reset();\n              }\n              this.selectedState = null;\n            }, 100);\n          }\n          else {\n            console.log(\"Unknown cell type!\");\n          }\n        })\n      });\n    },\n\n  };\n\n</script>\n<style scope>\n  .config span {\n    line-height: 34px;\n  }\n  .header {\n    text-align: left;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ProjectView.vue?6d808270","<template>\n  <div>\n    <svg :id='svgId'> </svg>\n  </div>\n</template>\n<style>\n\n</style>\n<script>\n  import * as d3 from 'd3';\n  import dataService from '../services/dataService.js';\n  import { bus, SELECT_MODEL } from 'event-bus.js';\n  import { Chart } from '../layout/chart.js'\n  import { WordCloud } from '../layout/cloud.js'\n  import { sentence } from '../layout/sentence.js'\n\n  export default {\n    name: 'TestView',\n    data() {\n      return {\n        chart: null,\n        model: 'PTB-LSTM',\n        state: 'state_c',\n      };\n    },\n    props: {},\n    computed: {\n      svgId: function () {\n        return 'svg-test';\n      }\n    },\n    methods: {\n      init() {\n        const svg = d3.select(`#${this.svgId}`)\n          .attr('width', 500)\n          .attr('height', 500);\n        this.chart = new Chart(svg, 500, 500)\n          .background('lightgray', 0.0);\n      },\n      draw2() {\n        var words = ['you', 'want', 'more',\n          'words', 'than', 'this', 'he', 'is', 'she', 'they', 'what', 'million',\n          'it', '$', '<unk>', 'good', 'i', 'by']\n          .map(function (d, i) {\n            return { text: d, size: 5 + Math.random()*25, type: 0 + Math.round(Math.random()) };\n          });\n        //This method tells the word cloud to redraw with a new set of words.\n        //In reality the new words would probably come from a server request,\n        // user input or some other source.\n        function showNewWords(vis, i) {\n          i = i || 0;\n\n          vis.update(words)\n          setTimeout(function () { showNewWords(vis, i + 1) }, 2000)\n        }\n\n        //Create a new instance of the word cloud visualisation.\n        var myWordCloud = new WordCloud(d3.select(`#${this.svgId}`), 120, 120).transform('translate(200,200)');\n        // myWordCloud.update(words);\n\n        //Start cycling through the demo data\n        showNewWords(myWordCloud);\n        // myWordCloud.update(words);\n      },\n      draw() {\n        dataService.getWordStatistics(this.model, this.state, -1, 'he', response => {\n          const data = response.data;\n          const mean = data.sort_idx.map((d, i) => { return data.mean[d]; });\n          const range = data.sort_idx.map((d, i) => { return [data.low1[d], data.high1[d]]; });\n          const range2 = data.sort_idx.map((d, i) => { return [data.low2[d], data.high2[d]]; });\n\n          console.log(data);\n          const subchart = this.chart.subChart(250, 200)\n            .margin(5, 5, 20, 30)\n            .xAxis()\n            .yAxis();\n          subchart.line(mean, (d, i) => { return i; }, (d) => { return d; });\n          subchart.area(range, (d, i) => i, (d) => d[0], (d) => d[1])\n            .attr('opacity', 0.4);\n          subchart.area(range2, (d, i) => i, (d) => d[0], (d) => d[1])\n            .attr('opacity', 0.2);\n          // subchart.draw();\n        });\n        let processed;\n        const p1 = dataService.getStateStatistics(this.model, this.state, -1, 200, response => {\n          const data = response.data;\n          // console.log(data);\n          processed = data.mean[0].map((_, i) => {\n            return {\n              freqs: data.freqs,\n              mean: data.mean.map((m) => m[i]),\n              low1: data.low1.map((m) => m[i]),\n              low2: data.low2.map((m) => m[i]),\n              high1: data.high1.map((m) => m[i]),\n              high2: data.high2.map((m) => m[i]),\n              rank: data.sort_idx.map((indice) => {\n                return indice.findIndex((idx) => (idx === i));\n              })\n            };\n          });\n        });\n        let vocab;\n        const p2 = dataService.getVocab(this.model, 200, response => {\n          vocab = response.data;\n        })\n        Promise.all([p1, p2]).then(() => {\n          console.log(processed);\n          console.log(vocab);\n          const dim = 10;\n          let data = processed[dim];\n          data = data.freqs.map((f, i) => {\n            return {\n              freqs: f,\n              mean: data.mean[i],\n              range1: [data.low1[i], data.high1[i]],\n              range2: [data.low2[i], data.high2[i]],\n              rank: data.rank[i],\n              word_id: i,\n              word: vocab[i],\n            };\n          })\n          const boxData = data.sort((a, b) => {\n            return a.mean - b.mean;\n          })\n          // const boxData = mean.map((m, i) => {\n          //   return {mean: m, range1: range[i], range2: range2[i], idx: data.sort_idx[i]};\n          // });\n          const boxes = boxData.slice(0, 10).concat(boxData.slice(boxData.length - 10));\n          const subchart2 = this.chart.subChart(250, 200)\n            .translate(250, 0)\n            .margin(5, 30, 40, 5)\n            .xAxis()\n            .yAxis('right');\n          subchart2.axis.x.tickFormat((d, i) => {\n            return boxes[d].word;\n          }).ticks(20);\n          //   .group.attr('transform', 'rotate(90)');\n          subchart2.box(boxes, 5, (d, i) => i, (d) => d.mean, (d) => d.range1, (d) => d.range2)\n            .attr('fill', 'steelblue')\n            .attr('stroke', 'gray')\n            .attr('fill-opacity', 0.5);\n          this.chart.draw();\n\n          // formatting x axis labels\n          subchart2.axisHandles.x.selectAll('text')\n            .attr('y', 0)\n            .attr('x', -9)\n            .attr('dy', '.35em')\n            .attr('transform', 'rotate(-90)')\n            .style('text-anchor', 'end');\n          // subchart2.axis.x.ticks(10);\n\n          // .line([[0.1, 0.1], [0.3, 0.8], [0.9,0.9]]);\n\n        });\n      },\n      draw_arc() {\n        let color = d3.scaleOrdinal(d3.schemeCategory10);\n        let width = 500, height = 500;\n        const svg = d3.select(`#${this.svgId}`)\n          .attr('width', width)\n          .attr('height', height);\n\n        let data = [\n          { start: 0, end: 2 * Math.PI / 8},\n          { start: 2 * Math.PI / 8, end: 2 * Math.PI / 2},\n          { start: 2 * Math.PI / 2, end: 2 * Math.PI},\n        ];\n\n        let g = svg.append('g')\n          .attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')');\n        var arc = d3.arc()\n          .innerRadius(230)\n          .outerRadius(240)\n          // .startAngle(0)\n\n        data.forEach((d, i) => {\n          g.append('path')\n          // .attr('transform', 'rotate(' + 180 + ')')\n            .datum({startAngle: d.start, endAngle: d.end})\n            .style('fill', color(i))\n            .attr('d', arc)\n            // .attr('cent', arc.centroid())\n          console.log(arc.centroid({startAngle: d.start, endAngle: d.end}));\n        })\n\n      },\n      draw4() {\n        let color = d3.scaleOrdinal(d3.schemeCategory10);\n        let width = 500, height = 500;\n        const rectHeight = 20;\n        const rectWidth = 50;\n        const rectInterval = 10;\n        const data = ['this', 'is', 'foy', 'test', '<eos>'];\n        \n        var x = d3.scaleTime()\n          .domain([new Date(2013, 7, 1), new Date(2013, 7, 15) - 1])\n          .rangeRound([0, width]);\n        const g = d3.select(`#${this.svgId}`)\n          .attr('width', width)\n          .attr('height', height)\n          .append('g')\n          .attr(\"transform\", \"translate(100,\" + height / 3  + \")\");\n\n        let texts = g\n          .selectAll('text')\n          .data(data).enter()\n          .append('text')\n          .text((d) => {return d})\n          .style('text-anchor', 'middle')\n          // .attr('font-size', 12)\n          .attr('transform', function(d, i) {\n            return 'translate(' + [(rectWidth + rectInterval) * i + rectWidth / 2, rectHeight/1.3] + ')';\n          });\n        \n        const rect_g = g.append('g');\n        data.forEach((d, i) => {\n          if (i > 0) {\n            rect_g.append('rect')\n              .attr('x', i * (rectWidth + rectInterval) - rectInterval)\n              .attr('y', '0')\n              .attr('width', rectInterval)\n              .attr('height', rectHeight)\n              .attr('fill', 'lightgray')\n              .attr('stroke-width', 2)\n              .attr('stroke', 'blue')\n              .attr('opacity', 0.2);\n          }\n          rect_g\n            .append('rect')\n            .attr('x', i * (rectWidth + rectInterval))\n            .attr('y', '0')\n            .attr('width', rectWidth)\n            .attr('height', rectHeight)\n            .attr('fill', 'lightgray')\n            .attr('stroke-width', 2)\n            .attr('stroke', 'blue')\n            .attr('opacity', 0.2);\n        });\n        \n        g.append('g')\n          .call(d3.brushX()\n              .extent([[0, 0], [(rectWidth + rectInterval) * data.length - rectInterval, rectHeight]])\n              .on('end', brushended)\n          );\n        \n        function brushended () {\n          if (!d3.event.sourceEvent) return;\n          if (!d3.event.selection) return;\n          let extent = d3.event.selection;\n          extent[0] = Math.round(extent[0] / (rectWidth + rectInterval)) * (rectWidth + rectInterval);\n          extent[1] = Math.max(Math.round(extent[1] / (rectWidth + rectInterval)) * (rectWidth + rectInterval) - rectInterval, extent[0]);\n          console.log(d3.event.selection);\n          d3.select(this).transition().call(d3.event.target.move, extent)\n        }\n      },\n\n      drawRect(g, dataLength, func) {\n        const self = this;\n        const rectSize = [20, 50];\n        const minBrushLength = 3;\n        g.selectAll('.wordRect')\n          .data(d3.range(dataLength)).enter()\n          .append('rect')\n          .attr('x', 0)\n          .attr('y', d => d * rectSize[1])\n          .attr('width', rectSize[0])\n          .attr('height', rectSize[1])\n          .attr('fill', 'lightgray')\n          .attr('stroke-width', 2)\n          .attr('stroke', 'blue')\n          .attr('opacity', 0.2);\n        let brush = d3.brushY()\n          .extent([[0, 0], [rectSize[0], rectSize[1] * dataLength]])\n          .on('end', function() {\n            if (!d3.event.sourceEvent) return;\n            if (!d3.event.selection) return;\n            let extent = d3.event.selection;\n            extent[0] = Math.round(extent[0] / rectSize[1]) * rectSize[1];\n            extent[1] = Math.round(extent[1] / rectSize[1]) * rectSize[1];\n            d3.select(this).transition().call(d3.event.target.move, extent);\n            console.log(d3.event.selection);\n            func([Math.round(extent[0] / rectSize[1]), Math.round(extent[1] / rectSize[1])])\n          });\n        g.append('g')\n          .call(brush)\n          .call(brush.move, [0, rectSize[1] * dataLength])\n      },\n\n      draw5() {\n        const p1 = bus.loadCoCluster('PTB-LSTM', 'state_c', 10, {top_k: 300, mode: 'raw'});\n        const record = bus.evalSentence('What can I do for you?', 'PTB-LSTM');\n        const p2 = record.evaluate();\n        const clientHeight = 500;\n        let sent = null;\n        const svg = d3.select(`#${this.svgId}`);\n        const sent_g = svg.append('g');\n        \n        Promise.all([p1, p2]).then((values) => {\n          const coCluster = bus.getCoCluster('PTB-LSTM', 'state_c', 10, {top_k: 300, mode: 'raw'});\n          const sentenceRecord = record.getRecords('state_c', -1);\n          console.log(record);\n          const rect_g = svg.append('g')\n            .attr('transform', 'translate(0, 50)');\n          sent = sentence(sent_g)\n            .transform('translate(100, 0)')\n            .size([50, clientHeight])\n            .sentence(sentenceRecord)\n            .coCluster(coCluster)\n            .words(record.tokens)\n            .draw()\n            // .transform('scale('  + scaleFactor + ')translate(' + [200/scaleFactor,10/scaleFactor] + ')');;\n          console.log(sent.strengthByCluster);\n          this.drawRect(rect_g, record.tokens.length, updateSentence);\n      });\n\n      function updateSentence(extent_) {\n        console.log(`extent_ is ${extent_}`);\n        const words = record.tokens.slice(...extent_);\n        console.log(`words is ${words}`);\n        let scaleFactor = record.tokens.length / words.length;\n        scaleFactor = Math.min(scaleFactor, 2);\n        const newHeight = scaleFactor * clientHeight;\n        let translateY = sent.getWordPos(extent_[0])[1];\n        sent.transform('scale('  + scaleFactor + ')translate(' + [100/scaleFactor, -translateY] + ')');\n      }\n    },\n    \n    draw3() {\n      const p1 = bus.loadCoCluster('PTB-LSTM', 'state_c', 10, {top_k: 300, mode: 'raw'});\n      const record = bus.evalSentence('What can I do for you?', 'PTB-LSTM');\n      const p2 = record.evaluate();\n      Promise.all([p1, p2]).then((values) => {\n        const coCluster = bus.getCoCluster('PTB-LSTM', 'state_c', 10, {top_k: 300, mode: 'raw'});\n        const sentenceRecord = record.getRecords('state_c', -1);\n        console.log(record);\n        const a = sentence(d3.select(`#${this.svgId}`).append('g'))\n          .transform('translate(100, 10)')\n          .size([50, 450])\n          .sentence(sentenceRecord)\n          .coCluster(coCluster)\n          .words(record.tokens)\n          .draw();\n        console.log(a.strengthByCluster);\n      })\n\n\n        // .layout();\n    },\n  },\n    mounted() {\n      // let coClusterData;\n      // const p = dataService.getCoCluster(this.model, this.state, 10, {}, response => {\n      //   coClusterData = response.data;\n      //   // console.log('co-cluster data:');\n      //   // console.log(coClusterData);\n      // })\n      this.init();\n      // this.draw2();\n      // this.draw_arc();\n      this.draw5();\n      // this.draw4();\n    }\n\n  }\n\n</script>\n\n\n\n// WEBPACK FOOTER //\n// TestView.vue?069eb963","import Vue from 'vue'\nimport VueResource from 'vue-resource';\nVue.use(VueResource);\n\n// Test version\n// const devMainUrl = 'http://143.89.191.20';\nconst devMainUrl =\n  process.env.NODE_ENV === 'development'\n    ? 'http://localhost:5000'\n    : location.origin;\n\nconst $http = Vue.http;\n\nconst cache = {}\n\nconst getUrlData = function(url, callback) {\n  if (url in cache) {\n      return Promise.resolve(callback(cache[url]));\n  } else {\n    return $http.get(url).then(response => {\n      if (response.status === 200)\n        cache[url] = {status: 200, data: response.data};\n      callback(cache[url]);\n    }, errResponse => {\n      console.log(errResponse);\n      throw errResponse;\n    });\n  }\n}\n\nlet getProjectionData = function (model, state, parameters = {}, callback) {\n  //  empty api for future implementation\n  let url = `${devMainUrl}/projection?model=${model}&state=${state}`;\n  Object.keys(parameters).forEach((p) => { url += `&${p}=${parameters[p]}`; });\n  return getUrlData(url, callback);\n}\n\nlet getStrengthData = function (model, state, parameters = {}, callback) {\n  // additional parameters: layer: -1, top_k: 100\n  let url = `${devMainUrl}/strength?model=${model}&state=${state}`\n  Object.keys(parameters).forEach((p) => { url += `&${p}=${parameters[p]}`; });\n  return getUrlData(url, callback);\n}\n\n\nlet getStateSignature = function (model, state, parameters = {}, callback) {\n  // additional parameters: layer: -1, size: 1000\n  let url = `${devMainUrl}/state_signature?model=${model}&state=${state}`\n  Object.keys(parameters).forEach((p) => { url += `&${p}=${parameters[p]}`; });\n  return getUrlData(url, callback);\n}\n\nlet getModels = function (callback) {\n  const url = `${devMainUrl}/models/available`;\n  return getUrlData(url, callback);\n}\n\nlet getModelConfig = function (model, callback) {\n  const url = `${devMainUrl}/models/config/${model}`;\n  return getUrlData(url, callback);\n}\n\nlet getTextEvaluation = function (model, text, callback) {\n\n  let url = `${devMainUrl}/models/evaluate`;\n  // Object.keys(parameters).forEach((p) => { url += `&${p}=${parameters[p]}`; });\n  return $http.post(url, { model: model, text: text }).then(response => {\n    callback(response);\n  }, errResponse => {\n    console.log(errResponse);\n    throw errResponse;\n  });\n}\n\nlet getCoCluster = function (model, state, n_cluster, parameters = {}, callback) {\n  // layer: -1\n  // top_k: 100\n  // mode: 'positive'\n  // seed: 0\n  let url = `${devMainUrl}/co_clusters?model=${model}&state=${state}&n_cluster=${n_cluster}`;\n  Object.keys(parameters).forEach((p) => { url += `&${p}=${parameters[p]}`; });\n  return getUrlData(url, callback);\n}\n\nlet getVocab = function (model, top_k = 100, callback) {\n  const url = `${devMainUrl}/vocab?model=${model}&top_k=${top_k}`;\n  return getUrlData(url, callback);\n}\n\n// Get statistics of all states in a layer. The statistics are relating to words, e.g. reaction distribution\nlet getStateStatistics = function (model, state, layer, top_k, callback) {\n  // k: k words with highest strength, and k words with lowest negative strength\n  console.log(`If no statistics data available, try visit url ${devMainUrl}/models/record_default?model=${model}&set=test for generating state records!`);\n  const url = `${devMainUrl}/state_statistics?model=${model}&state=${state}&layer=${layer}&top_k=${top_k}`;\n  return getUrlData(url, callback);\n}\n\n// Get statistics of a word regarding all states in a layer.\nlet getWordStatistics = function (model, state, layer, word, callback) {\n  const url = `${devMainUrl}/word_statistics?model=${model}&state=${state}&layer=${layer}&word=${word}`;\n  return getUrlData(url, callback);\n}\n\nlet getPosStatistics = function (model, top_k, callback) {\n  const url = `${devMainUrl}/pos_statistics?model=${model}&top_k=${top_k}`;\n  return getUrlData(url, callback);\n}\n\n\nexport default {\n  getProjectionData,\n  getStrengthData,\n  // getTextData,\n  getModels,\n  getModelConfig,\n  getTextEvaluation,\n  getCoCluster,\n  getVocab,\n  getStateSignature,\n  getStateStatistics,\n  getWordStatistics,\n  getPosStatistics,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/dataService.js","<template>\n  <div class=\"text-view\">\n    <h4 class=\"normal\">Text</h4>\n    <hr>\n    <div class=\"state-select\" v-if=\"displayControl\">\n      <el-radio-group v-model=\"selectedState\" size=\"small\">\n        <el-radio-button v-for=\"state in states\" :label=\"state\"></el-radio-button>\n      </el-radio-group>\n      <div class=\"input\">\n        <el-col :span=\"4\" class=\"label\">\n          <span>Layer:</span>\n        </el-col>\n        <el-col :span=\"8\">\n          <el-input-number size=\"small\" v-model=\"selectedLayer\" :max=\"layerNum-1\" style=\"width: 80%\"></el-input-number>\n        </el-col>\n        <!--<el-col :span=\"2\"> <span> </span></el-col>-->\n        <el-col :span=\"4\" class=\"label\">\n          <span>Dim:</span>\n        </el-col>\n        <el-col :span=\"8\">\n          <el-input-number size=\"small\" v-model=\"selectedDim\" :max=\"layerSize\" style=\"width: 100%\"></el-input-number>\n        </el-col>\n      </div>\n    </div>\n    <el-input\n      type=\"textarea\"\n      :rows=\"2\"\n      placeholder=\"Please input\"\n      v-if=\"isInput\"\n      v-model=\"inputs\"\n      class=\"text-input\">\n    </el-input>\n    <el-button @click=\"onSubmit\"> Evaluate\n    </el-button>\n    <hr v-if=\"records\">\n    <div class=\"text-box\" v-if=\"records\">\n      <div v-for=\"sentence in sentences\">\n        <span v-for=\"word in sentence\" v-bind:style=\"{backgroundColor: color(word.value)}\"> {{ word.text }} </span>\n      </div>\n    </div>\n  </div>\n</template>\n<style scoped>\n.text-view {\n  padding: 5px;\n  text-align: left;\n}\n.text-box {\n  border-style: solid;\n  border-width: 1px;\n  border-color: lightgrey;\n  padding: 6px;\n  margin-top: 2px;\n  margin-bottom: 10px;\n}\n.text-input {\n  margin-top: 2px;\n  margin-bottom: 10px;\n}\n.state-select {\n  margin-bottom: 10px;\n}\n.label {\n  margin: auto;\n  font-size: 10pt;\n  text-align: left;\n  /*line-height: 20px;*/\n  /*padding: 8px 0 8px;*/\n}\n.input {\n  margin-top: 6px;\n  margin-bottom: 8px;\n}\n</style>\n<script>\n  import dataService from '../services/dataService';\n  import { bus, SELECT_MODEL } from '../event-bus';\n\n  let activeColorScheme = [\"88, 126, 182\", \"201, 90, 95\"];\n  export default {\n    name: 'TextView',\n    data() {\n      return {\n        // sentences: sentences,\n        inputs: null,\n        shared: bus.state,\n        isInput: true,\n        states: [],\n        selectedState: null,\n        selectedLayer: -1,\n        selectedDim: null,\n        cache: {},\n        oldInputs: null,\n        tokens: null,\n        records: null,\n        layerNum: 0,\n        // layerSize: 0,\n      };\n    },\n    computed: {\n      displayControl: function() {\n        return this.states.length !== 0;\n      },\n      // hasRecords: function() {\n      //   return this.records;\n      // },\n      layerSize: function() {\n        const selectedModel = this.shared.selectedModel;\n        return bus.layerSize(selectedModel, this.selectedLayer);\n      },\n      sentences: function() {\n        if(this.records){\n          return this.tokens.map((sentence, i) => {\n            return sentence.map((token, j) => {\n              return {text: token, value: this.records[i][j][this.selectedState][this.selectedLayer][this.selectedDim]};\n            })\n          });\n        }\n        return [];\n      }\n    },\n    watch: {\n      // inputs: function(newValue, oldValue){\n      //   this.oldInputs = oldValue;\n      // }\n    },\n    methods: {\n      color(value) {\n        if (value < 0)\n          return 'rgba(' + activeColorScheme[0] + ',' + (-value) + ')';\n        return 'rgba(' + activeColorScheme[1] + ',' + value + ')';\n      },\n      onSubmit() {\n        if (this.selectedState === null) return false;\n        const selectedModel = this.shared.selectedModel;\n        if(this.inputs === this.oldInputs) return true;\n        // const splitted = this.inputs.split('.')\n        dataService.getTextEvaluation(selectedModel, this.inputs,\n          (response) => {\n            const data = response.data;\n            this.tokens = data.tokens;\n            this.records = data.records;\n            this.oldInputs = this.inputs;\n          });\n      }\n    },\n    mounted() {\n      bus.$on(SELECT_MODEL, (modelName) => {\n        const states = bus.availableStates(modelName);\n        if (states) {\n          this.states = states;\n          this.layerNum = bus.layerNum(modelName);\n          this.selectedLayer = this.layerNum - 1;\n          this.selectedState = this.states[0];\n        }\n        else {\n          this.states = [];\n        }\n      })\n    }\n  }\n  function colorGrad(color1, color2, ratio) {\n    return color1.map((c, i) => c * ratio + color2[i] * (1-ratio));\n  }\n\n</script>\n\n\n\n// WEBPACK FOOTER //\n// TextView.vue?2b088992","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../node_modules/vue-loader/lib/style-rewriter?id=data-v-5a3bb6f0!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ArcView.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ArcView.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?id=data-v-5a3bb6f0!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ArcView.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ArcView.vue\n// module id = 711\n// module chunks = 1","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../node_modules/vue-loader/lib/style-rewriter?id=data-v-d96d80a0!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ClusterView.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ClusterView.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?id=data-v-d96d80a0!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ClusterView.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ClusterView.vue\n// module id = 712\n// module chunks = 1","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../node_modules/vue-loader/lib/style-rewriter?id=data-v-6411595c&scoped=true!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./InfoView.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./InfoView.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?id=data-v-6411595c!../../node_modules/vue-loader/lib/selector?type=template&index=0!./InfoView.vue\"),\n  /* scopeId */\n  \"data-v-6411595c\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/InfoView.vue\n// module id = 713\n// module chunks = 1","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../node_modules/vue-loader/lib/style-rewriter?id=data-v-b48e8d46!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MainView.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MainView.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?id=data-v-b48e8d46!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MainView.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MainView.vue\n// module id = 714\n// module chunks = 1","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../node_modules/vue-loader/lib/style-rewriter?id=data-v-709c6488!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ModelConfig.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ModelConfig.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?id=data-v-709c6488!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ModelConfig.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ModelConfig.vue\n// module id = 715\n// module chunks = 1","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../node_modules/vue-loader/lib/style-rewriter?id=data-v-820c27c2&scoped=true!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ModelView.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ModelView.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?id=data-v-820c27c2!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ModelView.vue\"),\n  /* scopeId */\n  \"data-v-820c27c2\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ModelView.vue\n// module id = 716\n// module chunks = 1","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../node_modules/vue-loader/lib/style-rewriter?id=data-v-1d6c2814!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ProjectGraph.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ProjectGraph.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?id=data-v-1d6c2814!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ProjectGraph.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ProjectGraph.vue\n// module id = 717\n// module chunks = 1","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../node_modules/vue-loader/lib/style-rewriter?id=data-v-18dee9cf!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ProjectView.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ProjectView.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?id=data-v-18dee9cf!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ProjectView.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ProjectView.vue\n// module id = 718\n// module chunks = 1","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../node_modules/vue-loader/lib/style-rewriter?id=data-v-33a00f36!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TestView.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./TestView.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?id=data-v-33a00f36!../../node_modules/vue-loader/lib/selector?type=template&index=0!./TestView.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/TestView.vue\n// module id = 719\n// module chunks = 1","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../node_modules/vue-loader/lib/style-rewriter?id=data-v-0de1765e&scoped=true!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TextView.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./TextView.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?id=data-v-0de1765e!../../node_modules/vue-loader/lib/selector?type=template&index=0!./TextView.vue\"),\n  /* scopeId */\n  \"data-v-0de1765e\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/TextView.vue\n// module id = 720\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"text-view\"\n  }, [_c('h4', {\n    staticClass: \"normal\"\n  }, [_vm._v(\"Text\")]), _vm._v(\" \"), _c('hr'), _vm._v(\" \"), (_vm.displayControl) ? _c('div', {\n    staticClass: \"state-select\"\n  }, [_c('el-radio-group', {\n    attrs: {\n      \"size\": \"small\"\n    },\n    model: {\n      value: (_vm.selectedState),\n      callback: function($$v) {\n        _vm.selectedState = $$v\n      },\n      expression: \"selectedState\"\n    }\n  }, _vm._l((_vm.states), function(state) {\n    return _c('el-radio-button', {\n      attrs: {\n        \"label\": state\n      }\n    })\n  })), _vm._v(\" \"), _c('div', {\n    staticClass: \"input\"\n  }, [_c('el-col', {\n    staticClass: \"label\",\n    attrs: {\n      \"span\": 4\n    }\n  }, [_c('span', [_vm._v(\"Layer:\")])]), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 8\n    }\n  }, [_c('el-input-number', {\n    staticStyle: {\n      \"width\": \"80%\"\n    },\n    attrs: {\n      \"size\": \"small\",\n      \"max\": _vm.layerNum - 1\n    },\n    model: {\n      value: (_vm.selectedLayer),\n      callback: function($$v) {\n        _vm.selectedLayer = $$v\n      },\n      expression: \"selectedLayer\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-col', {\n    staticClass: \"label\",\n    attrs: {\n      \"span\": 4\n    }\n  }, [_c('span', [_vm._v(\"Dim:\")])]), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 8\n    }\n  }, [_c('el-input-number', {\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"size\": \"small\",\n      \"max\": _vm.layerSize\n    },\n    model: {\n      value: (_vm.selectedDim),\n      callback: function($$v) {\n        _vm.selectedDim = $$v\n      },\n      expression: \"selectedDim\"\n    }\n  })], 1)], 1)], 1) : _vm._e(), _vm._v(\" \"), (_vm.isInput) ? _c('el-input', {\n    staticClass: \"text-input\",\n    attrs: {\n      \"type\": \"textarea\",\n      \"rows\": 2,\n      \"placeholder\": \"Please input\"\n    },\n    model: {\n      value: (_vm.inputs),\n      callback: function($$v) {\n        _vm.inputs = $$v\n      },\n      expression: \"inputs\"\n    }\n  }) : _vm._e(), _vm._v(\" \"), _c('el-button', {\n    on: {\n      \"click\": _vm.onSubmit\n    }\n  }, [_vm._v(\" Evaluate\\n  \")]), _vm._v(\" \"), (_vm.records) ? _c('hr') : _vm._e(), _vm._v(\" \"), (_vm.records) ? _c('div', {\n    staticClass: \"text-box\"\n  }, _vm._l((_vm.sentences), function(sentence) {\n    return _c('div', _vm._l((sentence), function(word) {\n      return _c('span', {\n        style: ({\n          backgroundColor: _vm.color(word.value)\n        })\n      }, [_vm._v(\" \" + _vm._s(word.text) + \" \")])\n    }))\n  })) : _vm._e()], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-0de1765e!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/TextView.vue\n// module id = 721\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"project\"\n  }, [_c('project-graph', {\n    attrs: {\n      \"svg-id\": _vm.paneId(_vm.model, _vm.selectedState),\n      \"width\": _vm.width,\n      \"height\": _vm.height,\n      \"graph-data\": _vm.graphData,\n      \"ready\": _vm.ready,\n      \"config\": _vm.config\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"config\"\n  }, [_c('el-col', {\n    attrs: {\n      \"span\": 4\n    }\n  }, [_c('span', [_vm._v(\"Cluster No.\")])]), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 6\n    }\n  }, [_c('el-slider', {\n    attrs: {\n      \"min\": 1,\n      \"max\": 20\n    },\n    on: {\n      \"change\": _vm.configWatcher\n    },\n    model: {\n      value: (_vm.config.clusterNum),\n      callback: function($$v) {\n        _vm.$set(_vm.config, \"clusterNum\", $$v)\n      },\n      expression: \"config.clusterNum\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 4\n    }\n  }, [_c('span', [_vm._v(\"Opacity\")])]), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 6\n    }\n  }, [_c('el-slider', {\n    attrs: {\n      \"max\": 1,\n      \"step\": 0.05,\n      \"width\": 100\n    },\n    on: {\n      \"change\": _vm.configWatcher\n    },\n    model: {\n      value: (_vm.config.opacity),\n      callback: function($$v) {\n        _vm.$set(_vm.config, \"opacity\", $$v)\n      },\n      expression: \"config.opacity\"\n    }\n  })], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-18dee9cf!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/ProjectView.vue\n// module id = 722\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('h4', {\n    staticClass: \"normal\"\n  }, [_vm._v(_vm._s(_vm.header))]), _vm._v(\" \"), _c('hr'), _vm._v(\" \"), _c('svg', {\n    attrs: {\n      \"id\": _vm.svgId,\n      \"width\": _vm.width,\n      \"height\": _vm.height\n    }\n  }), _vm._v(\" \"), _c('svg', {\n    attrs: {\n      \"id\": _vm.svgId + \"2\",\n      \"width\": _vm.width,\n      \"height\": 30\n    }\n  })])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-1ccedeee!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/InfoBoard.vue\n// module id = 723\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('svg', {\n    staticClass: \"project\",\n    attrs: {\n      \"id\": _vm.svgId,\n      \"width\": _vm.width,\n      \"height\": _vm.height\n    }\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-1d6c2814!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/ProjectGraph.vue\n// module id = 724\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('el-menu', {\n    staticClass: \"header-menu\",\n    attrs: {\n      \"theme\": \"dark\",\n      \"default-active\": '',\n      \"mode\": \"horizontal\"\n    },\n    on: {\n      \"select\": function () {\n        _vm.console.log('Hi!');\n      }\n    }\n  }, [_c('el-menu-item', {\n    staticClass: \"logo\",\n    attrs: {\n      \"index\": \"1\"\n    }\n  }, [_vm._v(\"RNNVis\")]), _vm._v(\" \"), _c('el-menu-item', {\n    attrs: {\n      \"index\": \"2\"\n    }\n  }, [_vm._v(\"Info\")])], 1), _vm._v(\" \"), _c('el-row', {\n    attrs: {\n      \"gutter\": 10\n    }\n  }, [_c('el-col', {\n    staticClass: \"col-bg\",\n    attrs: {\n      \"span\": 6,\n      \"gutter\": 15\n    }\n  }, [_c('model-view'), _vm._v(\" \"), _c('br'), _vm._v(\" \"), (!_vm.compare) ? _c('info-board', {\n    attrs: {\n      \"compare\": false,\n      \"type\": \"word\",\n      \"id\": \"info-word\",\n      \"height\": _vm.infoHeight * 1.0\n    }\n  }) : _vm._e(), _vm._v(\" \"), (!_vm.compare) ? _c('info-board', {\n    attrs: {\n      \"compare\": false,\n      \"type\": \"state\",\n      \"id\": \"info-state\",\n      \"height\": _vm.infoHeight * 0.8\n    }\n  }) : _vm._e()], 1), _vm._v(\" \"), _c('el-col', {\n    staticClass: \"col-bg\",\n    attrs: {\n      \"span\": 18,\n      \"gutter\": 15\n    }\n  }, [_c('el-row', [_c('main-view', {\n    attrs: {\n      \"height\": _vm.mainHeight\n    }\n  })], 1), _vm._v(\" \"), _c('el-row', {\n    attrs: {\n      \"gutter\": 10\n    }\n  }, [(_vm.compare) ? _c('info-view', {\n    attrs: {\n      \"height\": _vm.infoHeight\n    }\n  }) : _vm._e()], 1)], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-25441132!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 725\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('svg', {\n    attrs: {\n      \"id\": _vm.svgId\n    }\n  })])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-33a00f36!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/TestView.vue\n// module id = 726\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"arc\"\n  }, [_c('div', {\n    staticClass: \"header\"\n  }, [_c('el-radio-group', {\n    attrs: {\n      \"size\": \"small\"\n    },\n    model: {\n      value: (_vm.selectedState),\n      callback: function($$v) {\n        _vm.selectedState = $$v\n      },\n      expression: \"selectedState\"\n    }\n  }, _vm._l((_vm.states), function(state) {\n    return _c('el-radio-button', {\n      attrs: {\n        \"label\": state\n      }\n    })\n  }))], 1), _vm._v(\" \"), _c('svg', {\n    attrs: {\n      \"id\": _vm.svgId,\n      \"width\": _vm.width,\n      \"height\": _vm.height\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"arc_config\"\n  }, [_c('el-col', {\n    attrs: {\n      \"span\": 4\n    }\n  }, [_c('span', [_vm._v(\"Cluster No.\")])]), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 6\n    }\n  }, [_c('el-slider', {\n    attrs: {\n      \"min\": 2,\n      \"max\": 20\n    },\n    model: {\n      value: (_vm.clusterNum),\n      callback: function($$v) {\n        _vm.clusterNum = $$v\n      },\n      expression: \"clusterNum\"\n    }\n  })], 1)], 1)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-5a3bb6f0!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/ArcView.vue\n// module id = 727\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('el-col', {\n    staticClass: \"col-bg\",\n    attrs: {\n      \"span\": 12,\n      \"gutter\": 15\n    }\n  }, [_c('info-board', {\n    attrs: {\n      \"type\": _vm.type1,\n      \"id\": 'info-board-1',\n      \"height\": _vm.height,\n      \"compare\": _vm.compare\n    }\n  })], 1), _vm._v(\" \"), _c('el-col', {\n    staticClass: \"col-bg\",\n    attrs: {\n      \"span\": 12,\n      \"gutter\": 15\n    }\n  }, [_c('info-board', {\n    attrs: {\n      \"type\": _vm.type2,\n      \"id\": 'info-board-2',\n      \"height\": _vm.height,\n      \"compare\": false\n    }\n  })], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-6411595c!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/InfoView.vue\n// module id = 728\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"grid-content\"\n  }, [_c('el-form', {\n    attrs: {\n      \"label-position\": \"left\",\n      \"label-width\": \"30%\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": _vm.compare ? 'Model 2' : 'Model'\n    }\n  }, [_c('el-select', {\n    staticStyle: {\n      \"width\": \"80%\"\n    },\n    attrs: {\n      \"placeholder\": \"Select A Model\",\n      \"size\": \"small\"\n    },\n    model: {\n      value: (_vm.selectedModel),\n      callback: function($$v) {\n        _vm.selectedModel = $$v\n      },\n      expression: \"selectedModel\"\n    }\n  }, _vm._l((_vm.availableModels), function(model, idx) {\n    return _c('el-option', {\n      attrs: {\n        \"value\": model,\n        \"label\": model\n      }\n    })\n  })), _vm._v(\" \"), (_vm.compare) ? _c('el-button', {\n    attrs: {\n      \"icon\": \"delete\",\n      \"size\": \"small\"\n    },\n    on: {\n      \"click\": _vm.toggle\n    }\n  }) : _vm._e()], 1), _vm._v(\" \"), (_vm.config) ? _c('div', {\n    staticClass: \"el-form-item\"\n  }, _vm._l((Object.keys(_vm.config)), function(key) {\n    return _c('el-tag', {\n      attrs: {\n        \"type\": _vm.colorType\n      }\n    }, [_vm._v(_vm._s(key) + \": \" + _vm._s(_vm.config[key]))])\n  })) : _vm._e(), _vm._v(\" \"), (_vm.config) ? _c('hr', {\n    staticClass: \"local-hr\"\n  }) : _vm._e(), _vm._v(\" \"), (_vm.states.length) ? _c('el-form-item', {\n    attrs: {\n      \"label\": \"Hidden State\"\n    }\n  }, [_c('el-radio-group', {\n    attrs: {\n      \"size\": \"small\"\n    },\n    model: {\n      value: (_vm.selectedState),\n      callback: function($$v) {\n        _vm.selectedState = $$v\n      },\n      expression: \"selectedState\"\n    }\n  }, _vm._l((_vm.states), function(state) {\n    return _c('el-radio-button', {\n      attrs: {\n        \"label\": state\n      }\n    }, [_vm._v(_vm._s(_vm.stateName(state)))])\n  }))], 1) : _vm._e(), _vm._v(\" \"), (_vm.layerNum) ? _c('el-form-item', {\n    attrs: {\n      \"label\": \"Layer\"\n    }\n  }, [_c('el-input-number', {\n    staticStyle: {\n      \"width\": \"100px\",\n      \"margin-top\": \"5px\"\n    },\n    attrs: {\n      \"size\": \"small\",\n      \"max\": _vm.layerNum - 1\n    },\n    model: {\n      value: (_vm.selectedLayer),\n      callback: function($$v) {\n        _vm.selectedLayer = $$v\n      },\n      expression: \"selectedLayer\"\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.states.length) ? _c('el-form-item', {\n    attrs: {\n      \"label\": \"POS Tag\"\n    }\n  }, [_c('el-switch', {\n    attrs: {\n      \"on-text\": \"\",\n      \"off-text\": \"\"\n    },\n    model: {\n      value: (_vm.posSwitch),\n      callback: function($$v) {\n        _vm.posSwitch = $$v\n      },\n      expression: \"posSwitch\"\n    }\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"align\",\n    staticStyle: {\n      \"margin-left\": \"30px\"\n    }\n  }, [_vm._v(\"Align\")]), _vm._v(\" \"), _c('el-switch', {\n    attrs: {\n      \"on-text\": \"\",\n      \"off-text\": \"\"\n    },\n    on: {\n      \"change\": _vm.layoutChange\n    },\n    model: {\n      value: (_vm.mode),\n      callback: function($$v) {\n        _vm.mode = $$v\n      },\n      expression: \"mode\"\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.selectedModel) ? _c('el-form-item', {\n    attrs: {\n      \"label\": \"Sentences\"\n    }\n  }, [(_vm.inputVisible) ? _c('el-input', {\n    ref: \"saveTagInput\",\n    staticClass: \"input-new-tag\",\n    attrs: {\n      \"size\": \"small\"\n    },\n    on: {\n      \"blur\": _vm.handleInputConfirm\n    },\n    nativeOn: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")) { return null; }\n        return _vm.handleInputConfirm($event)\n      }\n    },\n    model: {\n      value: (_vm.inputValue),\n      callback: function($$v) {\n        _vm.inputValue = $$v\n      },\n      expression: \"inputValue\"\n    }\n  }) : _c('el-button', {\n    staticClass: \"button-new-tag\",\n    attrs: {\n      \"size\": \"small\"\n    },\n    on: {\n      \"click\": _vm.showInput\n    }\n  }, [_vm._v(\"+ New Sentence\")])], 1) : _vm._e(), _vm._v(\" \"), (_vm.sentences.length) ? _c('div', {\n    staticClass: \"sentence-container\"\n  }, _vm._l((_vm.sentences), function(sentence) {\n    return _c('el-tag', {\n      attrs: {\n        \"closable\": true,\n        \"type\": _vm.colorType\n      },\n      on: {\n        \"close\": function($event) {\n          _vm.closeSentence(sentence)\n        }\n      }\n    }, [_c('a', [_vm._v(_vm._s(sentence))])])\n  })) : _vm._e(), _vm._v(\" \"), (_vm.selectedState) ? _c('hr', {\n    staticClass: \"local-hr\"\n  }) : _vm._e(), _vm._v(\" \"), (_vm.selectedState) ? _c('el-form-item', {\n    attrs: {\n      \"label\": \"Cluster Num\"\n    }\n  }, [_c('el-slider', {\n    staticStyle: {\n      \"width\": \"80%\"\n    },\n    attrs: {\n      \"min\": 2,\n      \"max\": 20\n    },\n    on: {\n      \"change\": _vm.layoutChange\n    },\n    model: {\n      value: (_vm.layout.clusterNum),\n      callback: function($$v) {\n        _vm.$set(_vm.layout, \"clusterNum\", $$v)\n      },\n      expression: \"layout.clusterNum\"\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.selectedState) ? _c('el-form-item', {\n    staticStyle: {\n      \"margin-top\": \"-7px\",\n      \"padding-bottom\": \"-10px\"\n    },\n    attrs: {\n      \"label\": \"Stroke Width\"\n    }\n  }, [_c('el-slider', {\n    staticStyle: {\n      \"width\": \"80%\"\n    },\n    attrs: {\n      \"min\": 0,\n      \"max\": _vm.maxWidth,\n      \"step\": 0.1\n    },\n    on: {\n      \"change\": _vm.layoutChange\n    },\n    model: {\n      value: (_vm.layout.strokeControlStrength),\n      callback: function($$v) {\n        _vm.$set(_vm.layout, \"strokeControlStrength\", $$v)\n      },\n      expression: \"layout.strokeControlStrength\"\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.selectedState) ? _c('el-form-item', {\n    staticStyle: {\n      \"margin-top\": \"-7px\"\n    },\n    attrs: {\n      \"label\": \"Link Filter\"\n    }\n  }, [_c('el-slider', {\n    staticStyle: {\n      \"width\": \"80%\"\n    },\n    attrs: {\n      \"range\": \"\",\n      \"min\": 0,\n      \"max\": 1,\n      \"step\": 0.0001\n    },\n    on: {\n      \"change\": _vm.layoutChange\n    },\n    model: {\n      value: (_vm.layout.linkFilterThreshold),\n      callback: function($$v) {\n        _vm.$set(_vm.layout, \"linkFilterThreshold\", $$v)\n      },\n      expression: \"layout.linkFilterThreshold\"\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.selectedState) ? _c('el-form-item', {\n    staticStyle: {\n      \"margin-top\": \"-7px\"\n    },\n    attrs: {\n      \"label\": \"State Clip\"\n    }\n  }, [_c('el-slider', {\n    staticStyle: {\n      \"width\": \"80%\"\n    },\n    attrs: {\n      \"min\": 0,\n      \"max\": 10,\n      \"step\": 1\n    },\n    on: {\n      \"change\": _vm.layoutChange\n    },\n    model: {\n      value: (_vm.layout.stateClip),\n      callback: function($$v) {\n        _vm.$set(_vm.layout, \"stateClip\", $$v)\n      },\n      expression: \"layout.stateClip\"\n    }\n  })], 1) : _vm._e()], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-709c6488!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/ModelConfig.vue\n// module id = 729\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('h4', {\n    staticClass: \"normal\"\n  }, [_vm._v(\"Models\")]), _vm._v(\" \"), _c('hr'), _vm._v(\" \"), _c('div', {\n    staticClass: \"content model-view\"\n  }, [_c('model-config', {\n    attrs: {\n      \"compare\": false\n    }\n  }), _vm._v(\" \"), (_vm.compare) ? _c('hr') : _vm._e(), _vm._v(\" \"), (_vm.compare) ? _c('model-config', {\n    attrs: {\n      \"compare\": true,\n      \"toggle\": _vm.toggleCompare\n    }\n  }) : _vm._e(), _vm._v(\" \"), _c('hr'), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"size\": \"small\"\n    },\n    on: {\n      \"click\": _vm.toggleCompare\n    }\n  }, [_vm._v(\"Compare Model\")])], 1)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-820c27c2!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/ModelView.vue\n// module id = 730\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('h4', {\n    staticClass: \"normal\"\n  }, [_vm._v(\"Main\")]), _vm._v(\" \"), _c('hr'), _vm._v(\" \"), (_vm.compare) ? _c('cluster-view', {\n    attrs: {\n      \"width\": _vm.width / 2 - 15,\n      \"height\": _vm.height,\n      \"compare\": true\n    }\n  }) : _vm._e(), _vm._v(\" \"), _c('cluster-view', {\n    attrs: {\n      \"width\": _vm.compare ? _vm.width / 2 - 15 : _vm.width,\n      \"height\": _vm.height,\n      \"compare\": false\n    }\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-b48e8d46!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/MainView.vue\n// module id = 731\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('svg', {\n    attrs: {\n      \"id\": _vm.svgId,\n      \"width\": _vm.width,\n      \"height\": _vm.height\n    }\n  }, [_c('defs', [_c('linearGradient', {\n    attrs: {\n      \"id\": \"state-legend\"\n    }\n  }, [_c('stop', {\n    staticClass: \"stop1\",\n    attrs: {\n      \"offset\": \"0%\",\n      \"stop-color\": \"rgba(9, 173, 255, 1)\"\n    }\n  }), _vm._v(\" \"), _c('stop', {\n    staticClass: \"stop2\",\n    attrs: {\n      \"offset\": \"50%\",\n      \"stop-color\": \"rgba(128, 128, 128, 0.1)\"\n    }\n  }), _vm._v(\" \"), _c('stop', {\n    staticClass: \"stop3\",\n    attrs: {\n      \"offset\": \"100%\",\n      \"stop-color\": \"rgba(255, 91, 9, 1)\"\n    }\n  })], 1)], 1)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-d96d80a0!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/ClusterView.vue\n// module id = 732\n// module chunks = 1","import * as d3 from 'd3';\nimport cloud from 'd3-cloud';\nimport { bus, SELECT_WORD, DESELECT_WORD } from '../event-bus';\n// import cloud from './forcecloud.js';\n// console.log(d3);\n// var cloud = require('./d3.cloud.js');\n// console.log('haha');\n\nconst bgLayout = {\n  'stroke': 'black',\n  'stroke-width': 1,\n  'fill': 'white',\n  'fill-opacity': 0.0,\n  'stroke-opacity': 0.2,\n};\n\nconst wordLayout = {\n  'font': 'Arial',\n  // 'fontSize': [12, 24],\n  'fontSize': [9, 17],\n  // 'fontSize': [7, 11],\n  'fontWeight': [300, 400, 500],\n  'padding': 0,\n  'opacity': 0.7,\n  'baseColor': '#1f77b4',\n}\n\nexport class WordCloud{\n  constructor(selector, radiusX = 100, radiusY = radiusX, bgshape = 'rect', compare = false) {\n    this.selector = selector;\n    this.bggroup = this.selector.append('g');\n    this.bg = this.bggroup.append('g');\n    this.bgHandle;\n    this.bgshape = bgshape;\n    this.bgLayout = bgLayout;\n    this.wordLayout = wordLayout;\n    this.group = this.bggroup.append('g');\n    this.radius = [radiusX, radiusY];\n    this.data;\n    this.cloud = null;  // the handle to all the texts\n    this.font = 'Impact';\n    this.margin_ = 0;\n    this.colorScheme = d3.scaleOrdinal(d3.schemeCategory10);\n    this.word2data;\n    this.compare = compare;\n    this.boundingSize = [radiusX*2, radiusY*2];\n    // this.selected = [];\n    // this.bounding();\n    // register event listener\n  }\n  get width() {\n    return (this.radius[0] - this.margin_) * 2;\n  }\n  get height() {\n    return (this.radius[1] - this.margin_) * 2;\n  }\n  get polygon() {\n    let polygon = [];\n    const len = 4;\n    for (let i = 0; i < len; i++) {\n      polygon.push([\n        Math.round(this.radiusX * Math.cos(2 * Math.PI * i / len)),\n        Math.round(this.radiusY * Math.sin(2 * Math.PI * i / len))]);\n    }\n    return polygon;\n  }\n  size(size) {\n    this.radius[0] = size[0] / 2;\n    this.radius[1] = size[1] / 2;\n    return this;\n  }\n  wordLayoutParams(layoutParams) {\n    return arguments.length ? (this.wordLayout = layoutParams, this) : this.wordLayout;\n  }\n  bgLayoutParams(layoutParams) {\n    return arguments.length ? (this.bgLayout = layoutParams, this) : this.bgLayout;\n  }\n  transform(transformStr) {\n    if (this.compare) transformStr += ' scale(-1, 1)';\n    this.bggroup\n      .transition()\n      .duration(200)\n      .attr('transform', transformStr);\n    return this;\n  }\n  // set the background color and opacity\n  background(color, alpha = 1.0) {\n    this.bgLayout['fill'] = color;\n    this.bgLayout['fill-opacity'] = alpha;\n    return this;\n  }\n  drawBackground() {\n    // console.log(\"Redrawing backgrounds\")\n    if(this.bgHandle)\n      this.bgHandle.remove();\n    this.bgHandle = this.bg.append(this.bgshape);\n    if (this.bgshape === 'rect') {\n      this.bgHandle\n        .attr('x', -this.radius[0])\n        .attr('y', -this.radius[1])\n        .attr('rx', 4)\n        .attr('ry', 4)\n        .attr('width', 2 * this.radius[0])\n        .attr('height', 2 * this.radius[1])\n    } else if (this.bgshape === 'ellipse') {\n      this.bgHandle\n        .attr('cx', 0)\n        .attr('cy', 0)\n        .attr('rx', radius[0])\n        .attr('ry', radius[1]);\n    }\n    Object.keys(this.bgLayout).forEach((param) => {\n      this.bgHandle.attr(param, this.bgLayout[param]);\n    });\n    return this;\n  }\n  margin(margin) {\n    this.margin_ = margin;\n    // this.group.attr('transform', `scale()`)\n    return this;\n  }\n  fontFamily(font) {\n    this.wordLayout.font = font;\n    return this;\n  }\n  color(colorScheme) {\n    this.colorScheme = colorScheme;\n    return this;\n  }\n  draw(size = [this.width/2, this.height/2], data = this.data) {\n    // console.log(this.cloud);\n    if (size[0] !== this.width/2 || size[1] !== this.height/2) {\n      // this.size(size);\n      this.radius = size;\n      this.drawBackground();\n\n    }\n    if (!this.bgHandle)\n      this.drawBackground();\n    if (!this.data)\n      this.data = data;\n    // if (this.compare) this.group\n    // console.log(data);\n    const radiusX = size[0];\n    const radiusY = size[1];\n    const wordLayout = this.wordLayout;\n    // this.group.attr('transform', 'translate(' + [-radiusX, -radiusY] + ')');\n    const filterData = data.filter((d) => {\n      return -radiusX < d.x - d.width / 4 && -radiusY < d.y - d.size/2 && d.x + d.width/4 < radiusX && d.y -d.size/2 < radiusY;\n    });\n    const self = this;\n    this.cloud = this.group.selectAll('text')\n      .data(filterData, function (d) { return d.text; }); // matching key\n\n    //Entering words\n    const text = this.cloud.enter()\n      .append('text')\n      .style('font-family', wordLayout.font)\n      .attr('text-anchor', 'middle')\n      .style('fill', (d, i) => { return typeof d.type === 'number' ? self.colorScheme(d.type) : wordLayout.baseColor; });\n    text\n      .text(function (d) { return d.text; });\n\n    this.cloud\n      .style('fill', (d, i) => { return typeof d.type === 'number' ? self.colorScheme(d.type) : wordLayout.baseColor; });\n\n      // .attr('font-size', 1);\n\n    text\n      .attr('transform', function (d) {\n        return 'translate(' + [d.x, d.y] + ')';\n      })\n      // .attr('font-size', 1)\n      .attr('font-size', function (d) { return d.size + 'px'; })\n      .attr('font-weight', function(d) { return d.weight; })\n      .style('fill-opacity', 0)\n      .transition()\n      .duration(300)\n      .style('fill-opacity', wordLayout.opacity);\n\n    text\n      .on('mouseover', function () {\n        d3.select(this).style('fill-opacity', 1.0);\n      })\n      .on('mouseout', function (d, i) {\n        if (d.select) return;\n        d3.select(this).style('fill-opacity', wordLayout.opacity);\n      })\n      .on('click', function (d, i) {\n        if (!d.select){\n          d.select = true;\n          d.opacity = wordLayout.opacity;\n          d.baseColor = typeof d.type === 'number' ? self.colorScheme(d.type) : wordLayout.baseColor;\n          d3.select(this).style('fill-opacity', 1.0).style('font-weight', d.weight+500);\n          bus.$emit(SELECT_WORD, d, self.compare);\n        } else {\n          d.select = false;\n          bus.$emit(DESELECT_WORD, d, self.compare);\n          d3.select(this).style('fill-opacity', wordLayout.opacity).style('font-weight', d.weight);\n        }\n      });\n\n    // registering el in to datum\n    text.each(function(d) {\n      d.el = this;\n    });\n\n    this.word2data = {}\n    this.data.forEach((d) => this.word2data[d.text] = d);\n    // console.log(data);\n\n    //Exiting words\n    this.cloud.exit()\n      .transition()\n      .duration(200)\n      .style('fill-opacity', 1e-6)\n      .attr('font-size', 1)\n      .remove();\n\n    return this;\n\n    // this._txt = null;\n    // autoscale\n    // setTimeout(() => self.autoscale(bounds), 100);\n  }\n  update(words) {\n    const self = this;\n    // console.log(words);\n    words.sort((a, b) => {return a.size - b.size; });\n    const fontExtent = d3.extent(words, (d) => d.size);\n    const scale = d3.scalePow()\n      .range(this.wordLayout.fontSize)\n      .domain(fontExtent);\n    const weightScale = d3.scaleQuantize()\n      .range(this.wordLayout.fontWeight)\n      .domain(fontExtent);\n    words.forEach((word) => {\n      word.weight = Math.round(weightScale(word.size));\n      word.size = scale(word.size);\n    });\n    // d3.cloud()\n    self.boundingSize = [self.boundingSize[0]*1.3, self.boundingSize[1]*1.05];\n    cloud()\n      .size(this.boundingSize) // when layout, first give a larger region\n      .words(words)\n      .padding(this.wordLayout.padding)\n      .rotate(0)\n      .font(this.wordLayout.font)\n      .text(d => d.text)\n      .fontSize(d => d.size)\n      .fontWeight(d => d.weight)\n      .on('end', (words_) => {\n        // if(words_.length < words.length * 0.8){\n        //   self.boundingSize = [self.boundingSize[0]*1.3, self.boundingSize[1]*1.05];\n        //   console.log('word cloud size updated to ' + self.boundingSize);\n        //   self.update(words);\n        // } else {\n        self.draw([self.width/2, self.height/2], words_);\n        // }\n      })\n      .random(()=> 0.5)\n      .spiral('rectangular')\n      .start();\n    // return this\n  }\n  autoscale(bounds) {\n\n    // console.log(`centerx: ${centerX}, centerY: ${centerY}`);\n    const scaleX = 0.9 * this.width / Math.abs(bounds[0].x - bounds[1].x);\n    const scaleY = 0.9 * this.height / Math.abs(bounds[0].y - bounds[1].y);\n    const scale = Math.min(scaleX, scaleY);\n    const centerX = (bounds[1].x + bounds[0].x - this.width) / 2 * scale;\n    const centerY = (bounds[1].y + bounds[0].y - this.height) / 2 * scale;\n    this.group.attr('transform', `scale(${scale}) translate(${-centerX}, ${-centerY})`);\n  }\n  destroy() {\n    this.selector\n      .transition()\n      .duration(300)\n      .attr('opacity', 0)\n      .remove();\n  }\n}\n\nexport default {\n  WordCloud,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/layout/cloud.js"],"sourceRoot":""}